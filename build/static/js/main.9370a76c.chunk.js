(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{105:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return k})),n.d(t,"f",(function(){return O}));var r=n(14),a=n(1),i=n.n(a),c=n(3),o=n(28),s=n(44),u=n(31),l=n(96),p=n(64),d=new o.e.PublicKey("cndy3Z4yapfJBmL3ShUp5exZKqR3z33thTzeNMm2gRZ"),f=new o.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),b=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,o,s,u,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],o=!1,s={slot:0,confirmations:0,err:null},u=0,e.next=6,new Promise(function(){var e=Object(c.a)(i.a.mark((function e(u,l){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(o||!a){e.next=7;break}return Object(c.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,s=n&&n.value[0],o||(s?s.err?(console.log("REST error for",t,s),o=!0,l(s.err)):s.confirmations?(console.log("REST confirmation for",t,s),o=!0,u(s)):console.log("REST no confirmations for",t,s):console.log("REST null result for",t,s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,w(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:return s=e.sent,r._signatureSubscriptions[u]&&r.removeSignatureListener(u),o=!0,console.log("Returning status",s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s.b,isSigner:!1,isWritable:!1},{pubkey:o.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.e.TransactionInstruction({keys:i,programId:p.b,data:e.from([])})},h=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,c,s,u,l,p,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.c(r,t,{preflightCommitment:"processed"}),e.next=3,o.b.fetchIdl(d,a);case 3:return c=e.sent,s=new o.b(c,d,a),e.next=7,s.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),p=u.itemsRedeemed.toNumber(),f=l-p,e.abrupt("return",{id:n,program:s,state:{authority:u.authority,itemsAvailable:l,itemsRedeemed:p,itemsRemaining:f,isSoldOut:0===f,isActive:!1,isPresale:!1,isWhitelistOnly:!1,goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,gatekeeper:u.data.gatekeeper,endSettings:u.data.endSettings,whitelistMintSettings:u.data.whitelistMintSettings,hiddenSettings:u.data.hiddenSettings,price:u.data.price,retainAuthority:u.data.retainAuthority}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),f.toBuffer(),n.toBuffer(),e.from("edition")],f);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),f.toBuffer(),n.toBuffer()],f);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer()],d);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("collection"),n.toBuffer()],d);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),f.toBuffer(),n.toBuffer(),e.from("collection_authority"),r.toBuffer()],f);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.e.Keypair.generate(),e.next=3,Object(p.d)(r.publicKey,n);case 3:return a=e.sent[0],c=[r],e.t0=o.e.SystemProgram,e.t1=n,e.t2=r.publicKey,e.t3=s.a.span,e.next=11,t.program.provider.connection.getMinimumBalanceForRentExemption(s.a.span);case 11:return e.t4=e.sent,e.t5=s.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=s.c.createInitMintInstruction(s.b,r.publicKey,0,n,n),e.t9=g(a,n,n,r.publicKey),e.t10=s.c.createMintToInstruction(s.b,r.publicKey,a,n,[],1),u=[e.t7,e.t8,e.t9,e.t10],e.t11=r,e.t12=a,e.next=23,Object(l.d)(t.program.provider.connection,t.program.provider.wallet,[u],[c],l.b.StopOnFailure,"singleGossip",(function(){}),(function(){return!1}),void 0,[],[]);case 23:return e.t13=e.sent.txs[0].txid,e.abrupt("return",{mint:e.t11,userTokenAccount:e.t12,transaction:e.t13});case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a,c,d,b,h,k,O,w,S,T,P,A,M,K,E,R,I,N,C,B,W,D,_,L,U,G,F,Y,q,H,z,J,V,X,Z=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Z.length>2&&void 0!==Z[2]?Z[2]:[],d=Z.length>3&&void 0!==Z[3]?Z[3]:[],b=Z.length>4?Z[4]:void 0,h=null!==(a=null===b||void 0===b?void 0:b.mint)&&void 0!==a?a:o.e.Keypair.generate(),e.next=6,Object(p.d)(h.publicKey,n);case 6:if(k=e.sent[0],!t.state.tokenMint){e.next=13;break}return e.next=10,Object(p.d)(t.state.tokenMint,n);case 10:e.t0=e.sent[0],e.next=14;break;case 13:e.t0=n;case 14:if(O=e.t0,w=t.id,S=[],T=[],P=[],A=[],console.log("SetupState: ",b),b){e.next=40;break}return A.push(h),e.t1=P.push,e.t2=P,e.t3=o.e.SystemProgram,e.t4=n,e.t5=h.publicKey,e.t6=s.a.span,e.next=31,t.program.provider.connection.getMinimumBalanceForRentExemption(s.a.span);case 31:e.t7=e.sent,e.t8=s.b,e.t9={fromPubkey:e.t4,newAccountPubkey:e.t5,space:e.t6,lamports:e.t7,programId:e.t8},e.t10=e.t3.createAccount.call(e.t3,e.t9),e.t11=s.c.createInitMintInstruction(s.b,h.publicKey,0,n,n),e.t12=g(k,n,n,h.publicKey),e.t13=s.c.createMintToInstruction(s.b,h.publicKey,k,n,[],1),e.t14=[e.t10,e.t11,e.t12,e.t13],e.t1.apply.call(e.t1,e.t2,e.t14);case 40:if(!t.state.gatekeeper){e.next=55;break}return e.t15=S,e.next=44,Object(p.f)(n,t.state.gatekeeper.gatekeeperNetwork);case 44:if(e.t16=e.sent[0],e.t17={pubkey:e.t16,isWritable:!0,isSigner:!1},e.t15.push.call(e.t15,e.t17),!t.state.gatekeeper.expireOnUse){e.next=55;break}return S.push({pubkey:p.a,isWritable:!1,isSigner:!1}),e.t18=S,e.next=52,Object(p.e)(t.state.gatekeeper.gatekeeperNetwork);case 52:e.t19=e.sent[0],e.t20={pubkey:e.t19,isWritable:!1,isSigner:!1},e.t18.push.call(e.t18,e.t20);case 55:if(!t.state.whitelistMintSettings){e.next=70;break}return M=new o.e.PublicKey(t.state.whitelistMintSettings.mint),e.next=59,Object(p.d)(M,n);case 59:if(K=e.sent[0],S.push({pubkey:K,isWritable:!0,isSigner:!1}),!t.state.whitelistMintSettings.mode.burnEveryTime){e.next=70;break}return E=o.e.Keypair.generate(),S.push({pubkey:M,isWritable:!0,isSigner:!1}),S.push({pubkey:E.publicKey,isWritable:!1,isSigner:!0}),A.push(E),e.next=68,t.program.provider.connection.getAccountInfo(K);case 68:e.sent&&(P.push(s.c.createApproveInstruction(s.b,K,E.publicKey,n,[],1)),T.push(s.c.createRevokeInstruction(s.b,K,n,[])));case 70:return t.state.tokenMint&&(R=o.e.Keypair.generate(),A.push(R),S.push({pubkey:O,isWritable:!0,isSigner:!1}),S.push({pubkey:R.publicKey,isWritable:!1,isSigner:!0}),P.push(s.c.createApproveInstruction(s.b,O,R.publicKey,n,[],t.state.price.toNumber())),T.push(s.c.createRevokeInstruction(s.b,O,n,[]))),e.next=73,x(h.publicKey);case 73:return I=e.sent,e.next=76,m(h.publicKey);case 76:return N=e.sent,e.next=79,v(w);case 79:return C=e.sent,B=Object(r.a)(C,2),W=B[0],D=B[1],console.log(S.map((function(e){return e.pubkey.toBase58()}))),e.t21=P,e.next=87,t.program.instruction.mintNft(D,{accounts:{candyMachine:w,candyMachineCreator:W,payer:n,wallet:t.state.treasury,mint:h.publicKey,metadata:I,masterEdition:N,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:f,tokenProgram:s.b,systemProgram:u.SystemProgram.programId,rent:o.e.SYSVAR_RENT_PUBKEY,clock:o.e.SYSVAR_CLOCK_PUBKEY,recentBlockhashes:u.SYSVAR_SLOT_HASHES_PUBKEY,instructionSysvarAccount:o.e.SYSVAR_INSTRUCTIONS_PUBKEY},remainingAccounts:S.length>0?S:void 0});case 87:return e.t22=e.sent,e.t21.push.call(e.t21,e.t22),e.next=91,y(w);case 91:return _=e.sent,L=Object(r.a)(_,1),U=L[0],e.next=96,t.program.provider.connection.getAccountInfo(U);case 96:if(!e.sent||!t.state.retainAuthority){e.next=127;break}return e.prev=98,e.next=101,t.program.account.collectionPda.fetch(U);case 101:return G=e.sent,console.log(G),F=G.mint,e.next=106,j(F,U);case 106:if(Y=e.sent,console.log(F),!F){e.next=122;break}return e.next=111,x(F);case 111:return q=e.sent,e.next=114,m(F);case 114:return H=e.sent,console.log("Collection PDA: ",U.toBase58()),console.log("Authority: ",t.state.authority.toBase58()),e.t23=P,e.next=120,t.program.instruction.setCollectionDuringMint({accounts:{candyMachine:w,metadata:I,payer:n,collectionPda:U,tokenMetadataProgram:f,instructions:o.e.SYSVAR_INSTRUCTIONS_PUBKEY,collectionMint:F,collectionMetadata:q,collectionMasterEdition:H,authority:t.state.authority,collectionAuthorityRecord:Y}});case 120:e.t24=e.sent,e.t23.push.call(e.t23,e.t24);case 122:e.next=127;break;case 124:e.prev=124,e.t25=e.catch(98),console.error(e.t25);case 127:return z=[P,T],J=[A,[]],e.prev=129,e.next=132,Object(l.d)(t.program.provider.connection,t.program.provider.wallet,z,J,l.b.StopOnFailure,"singleGossip",(function(){}),(function(){return!1}),void 0,c,d);case 132:return V=e.sent.txs.map((function(e){return e.txid})),X=V[0],e.abrupt("return",{mintTxId:X,metadataKey:I});case 137:e.prev=137,e.t26=e.catch(129),console.log(e.t26);case 140:return e.abrupt("return",null);case 141:case"end":return e.stop()}}),e,null,[[98,124],[129,137]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(4).Buffer)},405:function(e,t,n){},406:function(e,t,n){},407:function(e,t){},408:function(e,t){},428:function(e,t){},429:function(e,t){},473:function(e){e.exports=JSON.parse('{"name":"candy-machine-mint","version":"0.2.0","homepage":".","private":true,"dependencies":{"@babel/runtime":"^7.15.5","@civic/solana-gateway-react":"^0.7.0-beta.12","@material-ui/core":"^4.12.3","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.60","@nfteyez/sol-rayz":"^0.8.0","@project-serum/anchor":"^0.14.0","@solana/spl-token":"^0.1.8","@solana/wallet-adapter-base":"^0.5.2","@solana/wallet-adapter-material-ui":"^0.11.0","@solana/wallet-adapter-react":"^0.11.0","@solana/wallet-adapter-wallets":"^0.9.0","@solana/web3.js":"^1.41.8","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","axios":"^0.24.0","react":"^17.0.2","react-app-rewired":"^2.2.1","react-countdown":"^2.3.2","react-dom":"^17.0.2","react-native":"^0.66.4","react-native-game-engine":"^1.2.0","react-router-dom":"^6.2.1","react-scripts":"4.0.3","styled-components":"^5.3.1","typescript":"^4.1.2","typewriter-effect":"^2.18.2","web-vitals":"^1.0.1"},"scripts":{"start":"react-app-rewired start","build":"react-app-rewired build","test":"react-app-rewired test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/styled-components":"^5.1.14"}}')},505:function(e,t,n){},558:function(e,t){},560:function(e,t){},574:function(e,t){},578:function(e,t){},580:function(e,t){},590:function(e,t){},592:function(e,t){},619:function(e,t){},621:function(e,t){},626:function(e,t){},628:function(e,t){},634:function(e,t){},636:function(e,t){},64:function(e,t,n){"use strict";(function(e){n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return h}));var r=n(1),a=n.n(r),i=n(3),c=n(28),o=n(44),s=n(31),u=function(e){if(e)return new Date(1e3*e.toNumber())},l=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),p={format:function(e){return e?l.format(e):"--"},asNumber:function(e){if(e)return e.toNumber()/s.LAMPORTS_PER_SOL}},d=new c.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),f=new c.e.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs"),b=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),o.b.toBuffer(),t.toBuffer()],d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),e.from("expire")],f);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),e.from("gateway"),e.from([0,0,0,0,0,0,0,0]),r.toBuffer()],f);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(4).Buffer)},648:function(e,t){},651:function(e,t){},663:function(e,t){},664:function(e,t,n){"use strict";n.r(t);var r,a=n(2),i=n.n(a),c=n(45),o=n.n(c),s=(n(405),n(406),n(8)),u=n(1),l=n.n(u),p=n(3),d=n(14),f=n(149),b=n(28),g=n(110),h=n(698),m=n(703),x=n(693),v=n(702),y=n(699),j=n(694),k=n(31),O=n(59),w=n(194),S=n(105),T=n(64),P=n(691),A=n(697),M=n(104),K=n(111),E=n(20),R=Object(g.default)(P.a)(r||(r=Object(f.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),I=function(e){var t=e.onMint,n=e.candyMachine,r=e.isMinting,i=e.setIsMinting,c=e.isActive,o=Object(O.d)(),s=Object(O.c)(),u=Object(a.useState)(!1),f=Object(d.a)(u,2),b=f[0],g=f[1],h=Object(M.useGateway)(),m=h.requestGatewayToken,x=h.gatewayStatus,v=Object(a.useState)(-1),y=Object(d.a)(v,2),j=y[0],k=y[1],w=Object(a.useState)(!1),S=Object(d.a)(w,2),T=S[0],P=S[1];Object(a.useEffect)((function(){b&&T&&function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.removeAccountChangeListener)(s.connection,j);case 2:return e.next=4,t();case 4:P(!1),g(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[b,T,s.connection,t,j]);var I=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(x);return Object(a.useEffect)((function(){var e=[M.GatewayStatus.NOT_REQUESTED,M.GatewayStatus.REFRESH_TOKEN_REQUIRED],t=[].concat(e,[M.GatewayStatus.UNKNOWN]);e.find((function(e){return I===e}))&&!t.find((function(e){return x===e}))&&i(!0),console.log("change: ",x)}),[i,I,x]),Object(E.jsx)(R,{disabled:r||!c,onClick:Object(p.a)(l.a.mark((function e(){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||void 0===n?void 0:n.state.isActive)||!(null===n||void 0===n?void 0:n.state.gatekeeper)){e.next=34;break}if("ignREusXmGrscGNUesoU9mxfds9AiYTezUKex2PsZV6"!==(r=n.state.gatekeeper.gatekeeperNetwork.toBase58())){e.next=13;break}if(x!==M.GatewayStatus.ACTIVE){e.next=8;break}return e.next=6,t();case 6:e.next=11;break;case 8:return e.next=10,m();case 10:console.log("after: ",x);case 11:e.next=32;break;case 13:if("ttib7tuX8PTWPqFsmUFQTj78MbRhUmqxidJRDv4hRRE"!==r&&"tibePmPaoTgrs929rWpu755EXaxC7M3SthVCf6GzjZt"!==r){e.next=30;break}return P(!0),e.next=17,Object(K.findGatewayToken)(s.connection,o.publicKey,n.state.gatekeeper.gatekeeperNetwork);case 17:if(!(null===(a=e.sent)||void 0===a?void 0:a.isValid())){e.next=23;break}return e.next=21,t();case 21:e.next=28;break;case 23:return window.open("https://verify.encore.fans/?gkNetwork=".concat(r),"_blank"),e.next=26,Object(K.getGatewayTokenAddressForOwnerAndGatekeeperNetwork)(o.publicKey,n.state.gatekeeper.gatekeeperNetwork);case 26:i=e.sent,k(Object(K.onGatewayTokenChange)(s.connection,i,(function(){return g(!0)}),"confirmed"));case 28:e.next=32;break;case 30:throw P(!1),new Error("Unknown Gatekeeper Network: ".concat(r));case 32:e.next=37;break;case 34:return e.next=36,t();case 36:P(!1);case 37:case"end":return e.stop()}}),e)}))),variant:"contained",children:(null===n||void 0===n?void 0:n.state.isSoldOut)?"SOLD OUT":r?Object(E.jsx)(A.a,{}):(null===n||void 0===n?void 0:n.state.isPresale)||(null===n||void 0===n?void 0:n.state.isWhitelistOnly)?"WHITELIST MINT":"MINT"})};var N,C,B=n(96),W=n(27),D=(n(505),Object(g.default)(w.a)(N||(N=Object(f.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"])))),_=g.default.div(C||(C=Object(f.a)([""]))),L=function(e){var t,n,r,i=Object(a.useState)(!1),c=Object(d.a)(i,2),o=c[0],u=c[1],f=Object(a.useState)(),g=Object(d.a)(f,2),w=g[0],P=g[1],A=Object(a.useState)({open:!1,message:"",severity:void 0}),K=Object(d.a)(A,2),R=K[0],N=K[1],C=Object(a.useState)(!1),L=Object(d.a)(C,2),U=L[0],G=L[1],F=Object(a.useState)(),Y=Object(d.a)(F,2),q=(Y[0],Y[1],Object(a.useState)()),H=Object(d.a)(q,2),z=H[0],J=H[1],V=Object(a.useState)(!1),X=Object(d.a)(V,2),Z=X[0],Q=(X[1],Object(a.useState)(!1)),$=Object(d.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),re=Object(d.a)(ne,2),ae=re[0],ie=re[1],ce=Object(a.useState)(),oe=Object(d.a)(ce,2),se=oe[0],ue=(oe[1],Object(a.useState)(!0)),le=Object(d.a)(ue,2),pe=le[0],de=le[1],fe=Object(a.useState)(),be=Object(d.a)(fe,2),ge=be[0],he=be[1],me=e.rpcHost,xe=Object(O.d)(),ve=Object(a.useMemo)((function(){if(xe&&xe.publicKey&&xe.signAllTransactions&&xe.signTransaction)return{publicKey:xe.publicKey,signAllTransactions:xe.signAllTransactions,signTransaction:xe.signTransaction}}),[xe]),ye=Object(a.useCallback)(Object(p.a)(l.a.mark((function t(){var n,r,a,i,c,o,s,u,p,f,g,h,m,x,v,y,j,O,w,A,M,K,E=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=E.length>0&&void 0!==E[0]?E[0]:"confirmed",ve){t.next=3;break}return t.abrupt("return");case 3:if(r=new k.Connection(e.rpcHost,n),!e.candyMachineId){t.next=67;break}return console.log(null===e||void 0===e?void 0:e.candyMachineId),t.prev=6,t.next=9,Object(S.d)(ve,e.candyMachineId,r);case 9:if(s=t.sent,u=(null===s||void 0===s||null===(a=s.state.goLiveDate)||void 0===a?void 0:a.toNumber())<(new Date).getTime()/1e3,p=!1,f=!1,g=s.state.price,g=f?g:s.state.price,!(null===s||void 0===s?void 0:s.state.tokenMint)){t.next=37;break}return h=new b.e.PublicKey(s.state.tokenMint),t.next=19,Object(T.d)(h,ve.publicKey);case 19:return m=t.sent[0],t.prev=20,t.next=23,r.getTokenAccountBalance(m);case 23:x=t.sent,v=new b.a(x.value.amount).gte(g),ie(v),u=u&&v,t.next=35;break;case 29:t.prev=29,t.t0=t.catch(20),ie(!1),u=!1,console.log("There was a problem fetching SPL token balance"),console.log(t.t0);case 35:t.next=45;break;case 37:return t.t1=b.a,t.next=40,r.getBalance(ve.publicKey);case 40:t.t2=t.sent,y=new t.t1(t.t2),j=y.gte(g),ie(j),u=u&&j;case 45:return s.state.isSoldOut&&(u=!1),t.next=48,Object(S.e)(e.candyMachineId);case 48:return O=t.sent,w=Object(d.a)(O,1),A=w[0],t.next=53,r.getAccountInfo(A);case 53:M=t.sent,G(s.state.isActive=u),te(s.state.isPresale=p),P(s),K=892+(M&&s.state.retainAuthority?182:0)+(s.state.tokenMint?177:0)+(s.state.whitelistMintSettings?33:0)+((null===(i=s.state.whitelistMintSettings)||void 0===i||null===(c=i.mode)||void 0===c?void 0:c.burnEveryTime)?145:0)+(s.state.gatekeeper?33:0)+((null===(o=s.state.gatekeeper)||void 0===o?void 0:o.expireOnUse)?66:0),de(K>1230),t.next=65;break;case 61:t.prev=61,t.t3=t.catch(6),t.t3 instanceof Error?t.t3.message==="Account does not exist ".concat(e.candyMachineId)?N({open:!0,message:"Couldn't fetch candy machine state from candy machine with address: ".concat(e.candyMachineId,", using rpc: ").concat(e.rpcHost,"! You probably typed the REACT_APP_CANDY_MACHINE_ID value in wrong in your .env file, or you are using the wrong RPC!"),severity:"error",hideDuration:null}):t.t3.message.startsWith("failed to get info about account")&&N({open:!0,message:"Couldn't fetch candy machine state with rpc: ".concat(e.rpcHost,"! This probably means you have an issue with the REACT_APP_SOLANA_RPC_HOST value in your .env file, or you are not using a custom RPC!"),severity:"error",hideDuration:null}):N({open:!0,message:"".concat(t.t3),severity:"error",hideDuration:null}),console.log(t.t3);case 65:t.next=68;break;case 67:N({open:!0,message:"Your REACT_APP_CANDY_MACHINE_ID value in the .env file doesn't look right! Make sure you enter it in as plain base-58 address!",severity:"error",hideDuration:null});case 68:case"end":return t.stop()}}),t,null,[[6,61],[20,29]])}))),[ve,e.candyMachineId,e.rpcHost]),je=function(){var t=Object(p.a)(l.a.mark((function t(){var n,r,a,i,c,o,s,p,d,f,b,g=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=g.length>0&&void 0!==g[0]?g[0]:[],r=g.length>1&&void 0!==g[1]?g[1]:[],t.prev=2,u(!0),null===(a=document.getElementById("#identity"))||void 0===a||a.click(),!(xe.connected&&(null===w||void 0===w?void 0:w.program)&&xe.publicKey)){t.next=41;break}if(!pe||void 0!==ge){t.next=26;break}return N({open:!0,message:"Please sign account setup transaction",severity:"info"}),t.next=10,Object(S.c)(w,xe.publicKey);case 10:if(c=t.sent,o={err:!0},!c.transaction){t.next=16;break}return t.next=15,Object(S.b)(c.transaction,e.txTimeout,e.connection,!0);case 15:o=t.sent;case 16:if(!o||o.err){t.next=21;break}he(c),N({open:!0,message:"Setup transaction succeeded! Please sign minting transaction",severity:"info"}),t.next=24;break;case 21:return N({open:!0,message:"Mint failed! Please try again!",severity:"error"}),u(!1),t.abrupt("return");case 24:t.next=27;break;case 26:N({open:!0,message:"Please sign minting transaction",severity:"info"});case 27:return t.next=29,Object(S.f)(w,xe.publicKey,n,r,null!==(i=c)&&void 0!==i?i:ge);case 29:if(s=t.sent,p={err:!0},d=null,!s){t.next=40;break}return t.next=35,Object(S.b)(s.mintTxId,e.txTimeout,e.connection,!0);case 35:return p=t.sent,t.next=38,w.program.provider.connection.getAccountInfo(s.metadataKey,"processed");case 38:d=t.sent,console.log("Metadata status: ",!!d);case 40:p&&!p.err&&d?(console.log("status"),f=z-1,console.log(f),J(f),G(w.state.isActive=f>0),w.state.isSoldOut=0===f,he(void 0),N({open:!0,message:"Congratulations! Mint succeeded!",severity:"success",hideDuration:7e3}),ye("processed")):p&&!p.err?(N({open:!0,message:"Mint likely failed! Anti-bot SOL 0.01 fee potentially charged! Check the explorer to confirm the mint failed and if so, make sure you are eligible to mint before trying again.",severity:"error",hideDuration:8e3}),ye()):(N({open:!0,message:"Mint failed! Please try again!",severity:"error"}),ye());case 41:t.next=49;break;case 43:t.prev=43,t.t0=t.catch(2),b=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(console.log(t.t0),b="SOLD OUT!",window.location.reload()):312===t.t0.code&&(b="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x137")?(console.log(t.t0),b="SOLD OUT!"):t.t0.message.indexOf("0x135")&&(b="Insufficient funds to mint. Please fund your wallet."):b="Transaction timeout! Please try again.",N({open:!0,message:b,severity:"error"}),ye();case 49:return t.prev=49,u(!1),t.finish(49);case 52:case"end":return t.stop()}}),t,null,[[2,43,49,52]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){ye(),console.log("use efect"),w&&(console.log("candyMachine"),console.log(w.state),J(w.state.itemsRemaining),console.log(z))}),[ve,e.candyMachineId,e.connection,ye]),Object(a.useEffect)((function(){!function e(){setTimeout((function(){ye(),e()}),2e4)}()}),[ye]),Object(E.jsxs)("main",{children:[Object(E.jsxs)("div",{className:"main",children:[Object(E.jsx)("div",{id:"mainEmptyDiv"}),Object(E.jsxs)("div",{className:"mintContainer",children:[ve&&Object(E.jsxs)(j.a,{variant:"body2",color:"textSecondary",children:["Wallet: ",(null===ve||void 0===ve||null===(t=ve.publicKey)||void 0===t?void 0:t.toBase58())||""]}),Object(E.jsxs)(h.a,{style:{marginTop:20},children:[Object(E.jsx)(h.a,{maxWidth:"xs",style:{position:"relative"},children:Object(E.jsx)(x.a,{style:{padding:24,paddingBottom:24,backgroundColor:"#151A1F",borderRadius:6},children:xe.connected?Object(E.jsxs)(E.Fragment,{children:[w&&Object(E.jsxs)(y.a,{container:!0,direction:"row",justifyContent:"center",wrap:"nowrap",children:[Object(E.jsxs)(y.a,{item:!0,xs:3,children:[Object(E.jsx)(j.a,{variant:"body2",color:"textSecondary",children:"Remaining"}),Object(E.jsx)(j.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"".concat(z)})]}),Object(E.jsxs)(y.a,{item:!0,xs:4,children:[Object(E.jsx)(j.a,{variant:"body2",color:"textSecondary",children:Z&&se?"Discount Price":"Price"}),Object(E.jsx)(j.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"\u25ce ".concat(Z&&se?T.c.asNumber(se):T.c.asNumber(w.state.price))})]}),Object(E.jsx)(y.a,{item:!0,xs:5,children:Object(E.jsx)(j.a,{variant:"caption",align:"center",display:"block",style:{fontWeight:"bold"},children:"MINT TBA"})})]}),Object(E.jsx)(_,{children:(null===w||void 0===w?void 0:w.state.isActive)&&(null===w||void 0===w?void 0:w.state.gatekeeper)&&xe.publicKey&&xe.signTransaction?Object(E.jsx)(M.GatewayProvider,{wallet:{publicKey:xe.publicKey||new k.PublicKey(S.a),signTransaction:xe.signTransaction},gatekeeperNetwork:null===w||void 0===w||null===(n=w.state)||void 0===n||null===(r=n.gatekeeper)||void 0===r?void 0:r.gatekeeperNetwork,clusterUrl:e.network===W.WalletAdapterNetwork.Devnet?"https://api.devnet.solana.com":me,handleTransaction:function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u(!0),!n.signatures.find((function(e){return e.publicKey.equals(xe.publicKey)}))){t.next=17;break}return N({open:!0,message:"Please sign one-time Civic Pass issuance",severity:"info"}),t.prev=4,t.next=7,xe.signTransaction(n);case 7:n=t.sent,t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(4),N({open:!0,message:"User cancelled signing",severity:"error"}),u(!1),t.t0;case 15:t.next=18;break;case 17:N({open:!0,message:"Refreshing Civic Pass",severity:"info"});case 18:return t.prev=18,t.next=21,Object(B.c)(e.connection,xe,n,[],!0,"confirmed");case 21:N({open:!0,message:"Please sign minting",severity:"info"}),t.next=30;break;case 24:throw t.prev=24,t.t1=t.catch(18),N({open:!0,message:"Solana dropped the transaction, please try again",severity:"warning"}),console.error(t.t1),u(!1),t.t1;case 30:return t.next=32,je();case 32:case"end":return t.stop()}}),t,null,[[4,10],[18,24]])})));return function(e){return t.apply(this,arguments)}}(),broadcastTransaction:!1,options:{autoShowModal:!1},children:Object(E.jsx)(I,{candyMachine:w,isMinting:o,setIsMinting:function(e){return u(e)},onMint:je,isActive:U||ee&&Z&&ae})}):Object(E.jsx)(I,{candyMachine:w,isMinting:o,setIsMinting:function(e){return u(e)},onMint:je,isActive:U||ee&&Z&&ae})})]}):Object(E.jsx)(D,{children:"Connect Wallet"})})}),Object(E.jsx)(m.a,{open:R.open,autoHideDuration:void 0===R.hideDuration?6e3:R.hideDuration,onClose:function(){return N(Object(s.a)(Object(s.a)({},R),{},{open:!1}))},children:Object(E.jsx)(v.a,{onClose:function(){return N(Object(s.a)(Object(s.a)({},R),{},{open:!1}))},severity:R.severity,children:R.message})})]})]})]}),Object(E.jsx)("div",{id:"about",children:Object(E.jsxs)("div",{className:"aboutContainer",children:[Object(E.jsx)("h1",{className:"h1",children:"ABOUT"}),Object(E.jsx)("p",{children:"For those beginning or continuing their awakening on NFTs..."}),Object(E.jsx)("p",{children:"A collection of 2,222 uniquely generated Awakened Sols on the Solana blockchain."}),Object(E.jsx)("p",{children:"An alpha group and Sniping tool with unique features only available to holders."}),Object(E.jsx)("p",{children:"An open minded community."})]})}),Object(E.jsx)("div",{id:"roadmap",children:Object(E.jsxs)("div",{className:"roadMapContainer",children:[Object(E.jsx)("h1",{className:"h1",children:"ROADMAP"}),Object(E.jsxs)("ul",{children:[Object(E.jsx)("h3",{children:"Phase 1"}),Object(E.jsx)("li",{children:"Artwork Development"}),Object(E.jsx)("li",{children:"Sniping Tool Development"}),Object(E.jsx)("li",{children:"2,222 Awakened Sols Mint(0.5 SOL) - 50 OG(FREE) - 500 WL(0.3 SOL)"}),Object(E.jsx)("li",{children:"Launch Sniping Tool to the public with special features for holders"})]}),Object(E.jsxs)("ul",{children:[Object(E.jsx)("h3",{children:"Phase 2"}),Object(E.jsx)("li",{children:"Listing on Secondary Market"}),Object(E.jsx)("li",{children:"SOL Giveaways, NFT airdrops, WL spots"}),Object(E.jsx)("li",{children:"Develop extra features based on feedback for Sniping Tool for NFT holders."})]}),Object(E.jsxs)("ul",{children:[Object(E.jsx)("h3",{children:"Phase 3"}),Object(E.jsx)("li",{children:"Launch Sniping Tool v2"})]})]})})]})},U=n(32),G=n(134),F=n(391),Y=n(700),q=(new b.e.PublicKey("7BrcSv7WpCxax9n8SJnMF5TH8CybAACserKKxrLAiLm1"),new b.e.PublicKey("J2XX7E7ZSn8XTKdS2RDgWN2DGNU9wPBiJNUuDYY2yJG2"),new b.e.PublicKey("5gctKeLEBJzvQq5QW5e9tSeRGEUPw3h9hGSrTRdXdBow")),H="devnet",z="https://metaplex.devnet.rpcpool.com/",J=new b.e.Connection(z),V=(parseInt("1652227200",10),Object(F.a)({palette:{type:"dark"},overrides:{MuiButtonBase:{root:{justifyContent:"flex-start"}},MuiButton:{root:{textTransform:void 0,padding:"12px 16px"},startIcon:{marginRight:8},endIcon:{marginLeft:8}}}})),X=function(){var e=Object(a.useMemo)((function(){return Object(k.clusterApiUrl)(H)}),[]),t=Object(a.useMemo)((function(){return[Object(G.a)(),Object(G.b)(),Object(G.c)(),Object(G.e)({network:H}),Object(G.d)({network:H})]}),[]);return Object(E.jsx)(Y.a,{theme:V,children:Object(E.jsx)(O.a,{endpoint:e,children:Object(E.jsx)(O.b,{wallets:t,autoConnect:!0,children:Object(E.jsx)(w.b,{children:Object(E.jsx)(U.c,{children:Object(E.jsx)(U.a,{path:"/",element:Z()})})})})})})},Z=function(){return Object(E.jsx)(L,{candyMachineId:q,connection:J,txTimeout:B.a,rpcHost:z,network:H})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,705)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},$=n(254);o.a.render(Object(E.jsx)($.a,{children:Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(X,{})})}),document.getElementById("root")),Q()},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f}));var r,a=n(15),i=n(1),c=n.n(i),o=n(3),s=n(31),u=n(27),l=6e4,p=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,a=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&a.push(t[1])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(r||(r={}));var d=function(){var e=Object(o.a)(c.a.mark((function e(t,n,i,o){var l,p,d,f,b,h,m,x,v,y,j,k,O,w,S,T,P,A,M=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=M.length>4&&void 0!==M[4]?M[4]:r.Parallel,p=M.length>5&&void 0!==M[5]?M[5]:"singleGossip",d=M.length>6&&void 0!==M[6]?M[6]:function(e,t){},f=M.length>7&&void 0!==M[7]?M[7]:function(e,t){return!1},b=M.length>8?M[8]:void 0,h=M.length>9&&void 0!==M[9]?M[9]:[],m=M.length>10&&void 0!==M[10]?M[10]:[],n.publicKey){e.next=9;break}throw new u.WalletNotConnectedError;case 9:if(x=h,b){e.next=14;break}return e.next=13,t.getRecentBlockhash(p);case 13:b=e.sent;case 14:v=function(e){var t=i[e],r=o[e];if(0===t.length)return"continue";var c=new s.Transaction;t.forEach((function(e){return c.add(e)})),c.recentBlockhash=b.blockhash,c.setSigners.apply(c,[n.publicKey].concat(Object(a.a)(r.map((function(e){return e.publicKey}))))),r.length>0&&c.partialSign.apply(c,Object(a.a)(r)),x.push(c)},y=0;case 16:if(!(y<i.length)){e.next=23;break}if("continue"!==v(y)){e.next=20;break}return e.abrupt("continue",20);case 20:y++,e.next=16;break;case 23:return x.push.apply(x,Object(a.a)(m)),j=x.filter((function(e){return e.signatures.find((function(e){return e.publicKey.equals(n.publicKey)}))})),k=x.filter((function(e){return!e.signatures.find((function(e){return e.publicKey.equals(n.publicKey)}))})),e.next=28,n.signAllTransactions(j);case 28:O=e.sent,O=k.concat(O),w=[],console.log("Signed txns length",O.length,"vs handed in length",i.length),S=c.a.mark((function e(n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g({connection:t,signedTransaction:O[n]}),l===r.Parallel){e.next=22;break}return e.prev=2,e.next=5,a.then((function(e){var t=e.txid;e.slot;return d(t,n)}));case 5:w.push(a),e.next=20;break;case 8:if(e.prev=8,e.t0=e.catch(2),console.log("Failed at txn index:",n),console.log("Caught failure:",e.t0),f(O[n],n),l!==r.StopOnFailure){e.next=20;break}return e.t1=n,e.next=17,Promise.all(w);case 17:return e.t2=e.sent,e.t3={number:e.t1,txs:e.t2},e.abrupt("return",{v:e.t3});case 20:e.next=23;break;case 22:w.push(a);case 23:case"end":return e.stop()}}),e,null,[[2,8]])})),T=0;case 34:if(!(T<O.length)){e.next=42;break}return e.delegateYield(S(T),"t0",36);case 36:if("object"!==typeof(P=e.t0)){e.next=39;break}return e.abrupt("return",P.v);case 39:T++,e.next=34;break;case 42:if(l===r.Parallel){e.next=47;break}return e.next=45,Promise.all(w);case 45:return A=e.sent,e.abrupt("return",{number:O.length,txs:A});case 47:return e.t1=O.length,e.next=50,Promise.all(w);case 50:return e.t2=e.sent,e.abrupt("return",{number:e.t1,txs:e.t2});case 52:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r,i){var o,d,f,b,g,h,m,x,y,j,k,O,w,S,T=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(T.length>4&&void 0!==T[4])||T[4],d=T.length>5&&void 0!==T[5]?T[5]:"singleGossip",f=T.length>6&&void 0!==T[6]&&T[6],b=T.length>7?T[7]:void 0,n.publicKey){e.next=6;break}throw new u.WalletNotConnectedError;case 6:if(!(r instanceof s.Transaction)){e.next=10;break}g=r,e.next=24;break;case 10:if(g=new s.Transaction,r.forEach((function(e){return g.add(e)})),e.t0=b,e.t0){e.next=17;break}return e.next=16,t.getRecentBlockhash(d);case 16:e.t0=e.sent;case 17:if(g.recentBlockhash=e.t0.blockhash,f?(h=g).setSigners.apply(h,Object(a.a)(i.map((function(e){return e.publicKey})))):(m=g).setSigners.apply(m,[n.publicKey].concat(Object(a.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(x=g).partialSign.apply(x,Object(a.a)(i)),f){e.next=24;break}return e.next=23,n.signTransaction(g);case 23:g=e.sent;case 24:return y=g.serialize(),j={skipPreflight:!0,commitment:d},e.next=28,t.sendRawTransaction(y,j);case 28:if(k=e.sent,O=0,!o){e.next=43;break}return e.next=33,v(k,l,t,d);case 33:if(w=e.sent){e.next=36;break}throw new Error("Timed out awaiting confirmation on transaction");case 36:if(O=(null===w||void 0===w?void 0:w.slot)||0,!(null===w||void 0===w?void 0:w.err)){e.next=43;break}return e.next=40,p(t,k);case 40:throw S=e.sent,console.log(S),new Error("Raw transaction ".concat(k," failed"));case 43:return e.abrupt("return",{txid:k,slot:O});case 44:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),b=function(){return(new Date).getTime()/1e3};function g(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(c.a.mark((function e(t){var n,r,a,i,s,u,p,d,f,g,h,x,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,i=void 0===a?l:a,s=n.serialize(),u=b(),p=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return d=e.sent,console.log("Started awaiting confirmation for",d),f=!1,Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f||!(b()-u<i)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,j(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,v(d,i,r,"recent",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw console.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:p=(null===g||void 0===g?void 0:g.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return h=null,e.prev=28,e.next=31,m(r,n,"single");case 31:h=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!h||!h.err){e.next=47;break}if(!h.logs){e.next=46;break}x=h.logs.length-1;case 39:if(!(x>=0)){e.next=46;break}if(!(y=h.logs[x]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+y.slice("Program log: ".length));case 43:--x,e.next=39;break;case 46:throw new Error(JSON.stringify(h.err));case 47:return e.prev=47,f=!0,e.finish(47);case 50:return console.log("Latency",d,b()-u),e.abrupt("return",{txid:d,slot:p});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function m(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(c.a.mark((function e(t,n,r){var a,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),i=n._serialize(a),o=i.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function e(t,n,r){var a,i,s,u,l,p=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:"recent",i=p.length>4&&void 0!==p[4]&&p[4],s=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(o.a)(c.a.mark((function e(p,d){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),d({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),d(u)):(console.log("Resolved via websocket",e),p(u))}),a)}catch(f){s=!0,console.error("WS error in setup",t,f)}case 2:if(s||!i){e.next=8;break}return Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,d(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,p(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,j(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),s=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[664,1,2]]]);
//# sourceMappingURL=main.9370a76c.chunk.js.map