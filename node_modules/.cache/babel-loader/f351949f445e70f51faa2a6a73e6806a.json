{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Point_$type, markType } from \"./type\";\nimport { List$1 } from \"./List$1\";\nimport { LabelCollisionPlacementPositions_$type } from \"./LabelCollisionPlacementPositions\";\nimport { QuadTree } from \"./QuadTree\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { LabelCollisionInfo } from \"./LabelCollisionInfo\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { Random } from \"./Random\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { GeometryUtil } from \"./GeometryUtil\";\nimport { truncate, isNaN_ } from \"./number\";\n/**\n * @hidden\n */\n\nvar LabelCollisionManager =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(LabelCollisionManager, _super);\n\n  function LabelCollisionManager(a, b, c, d, e, f, g, h, i, j, k) {\n    var _this = _super.call(this) || this;\n\n    _this.l = false;\n    _this.a = new Array(8);\n    _this.y = null;\n    _this.labelsMoved = null;\n    _this.j = null;\n    _this.h = null;\n    _this.g = 0;\n    _this.e = null;\n    _this.x = null;\n    _this.ad = 0;\n    _this.ak = 0;\n    _this.aj = 0;\n    _this.a5 = null;\n    _this.ae = 0;\n    _this.ac = 0;\n    _this.v = new LinkedList$1(LabelCollisionInfo.$);\n    _this.ag = 0;\n    _this.w = new List$1(LabelCollisionInfo.$, 0);\n    _this.n = false;\n    _this.m = false;\n    _this.ai = 0;\n    _this.af = 0;\n    _this.z = 0;\n    _this.aa = 0;\n    _this.ah = 0;\n    _this.o = false;\n    _this.k = false;\n    _this.b = null;\n    _this.ap = null;\n    _this.an = null;\n    _this.l = k != null;\n    _this.a5 = c;\n    _this.ae = a;\n    _this.ac = b;\n    _this.h = new QuadTree(a, b, 8, 8);\n    _this.g = f;\n    _this.e = d;\n    _this.x = new List$1(LabelCollisionPlacementPositions_$type, 0);\n\n    _this.x.add(0);\n\n    _this.x.add(5);\n\n    _this.x.add(7);\n\n    _this.x.add(2);\n\n    _this.x.add(3);\n\n    _this.x.add(6);\n\n    _this.x.add(1);\n\n    _this.x.add(4);\n\n    var l = 0;\n\n    for (var m = 0; m < g.length; m++) {\n      if (_this.x.contains(g[m])) {\n        _this.x.remove(g[m]);\n\n        _this.x.insert(l, g[m]);\n\n        l++;\n      }\n    }\n\n    if (k != null) {\n      _this.y = new List$1(LabelCollisionPlacementPositions_$type, 0);\n\n      for (var n = 0; n < _this.a.length; n++) {\n        _this.a[n] = false;\n      }\n\n      for (var o = 0; o < k.length; o++) {\n        _this.a[k[o]] = true;\n\n        _this.y.add(k[o]);\n      }\n\n      _this.b = k;\n    } else {\n      _this.y = new List$1(LabelCollisionPlacementPositions_$type, 0);\n\n      _this.y.add(0);\n\n      _this.y.add(5);\n\n      _this.y.add(7);\n\n      _this.y.add(2);\n\n      _this.y.add(3);\n\n      _this.y.add(6);\n\n      _this.y.add(1);\n\n      _this.y.add(4);\n\n      var p = 0;\n\n      for (var q = 0; q < g.length; q++) {\n        if (_this.y.contains(g[q])) {\n          _this.y.remove(g[q]);\n\n          _this.y.insert(p, g[q]);\n\n          p++;\n        }\n      }\n    }\n\n    _this.ad = e;\n    _this.ak = h;\n    _this.aj = i;\n    _this.k = j;\n    return _this;\n  }\n\n  LabelCollisionManager.prototype.i = function (a, b, c, d, e) {\n    var f = 0;\n    var g = 0;\n\n    switch (b) {\n      case 0:\n        f = a.o;\n        g = a.p - a.m - a.k - this.ad - d;\n        break;\n\n      case 4:\n        f = a.o - a.n - a.l - this.ad - c;\n        g = a.p - a.m - a.k - this.ad - d;\n        break;\n\n      case 5:\n        f = a.o + a.n + a.l + this.ad + c;\n        g = a.p - a.m - a.k - this.ad - d;\n        break;\n\n      case 1:\n        f = a.o - a.n - a.l - this.ad - c;\n        g = a.p;\n        break;\n\n      case 2:\n        f = a.o + a.n + a.l + this.ad + c;\n        g = a.p;\n        break;\n\n      case 3:\n        f = a.o;\n        g = a.p + a.m + a.k + this.ad + d;\n        break;\n\n      case 6:\n        f = a.o - a.n - a.l - this.ad - c;\n        g = a.p + a.m + a.k + this.ad + d;\n        break;\n\n      case 7:\n        f = a.o + a.n + a.l + this.ad + c;\n        g = a.p + a.m + a.k + this.ad - d;\n        break;\n    }\n\n    var h = new QuadTreeBoundingBox();\n    h.b = f;\n    h.c = g;\n    h.e = a.l;\n    h.d = a.k;\n    h.g = a;\n\n    if (this.s(h) && !e) {\n      return null;\n    }\n\n    return h;\n  };\n\n  LabelCollisionManager.prototype.s = function (a) {\n    var b = a.b - a.e;\n    var c = a.b + a.e;\n    var d = a.c - a.d;\n    var e = a.c + a.d;\n    var f = this.a5;\n\n    if (b < f.left || c > f.right || d < f.top || e > f.bottom) {\n      return true;\n    }\n\n    return false;\n  };\n\n  LabelCollisionManager.prototype.ax = function (a, b, c, d, e) {\n    this.aw(a, b, c, d, e);\n  };\n\n  LabelCollisionManager.prototype.aw = function (a, b, c, d, e) {\n    this.h.d(a);\n    a.b = b;\n    a.c = c;\n    a.e = d;\n    a.d = e;\n    this.h.c(a);\n  };\n\n  LabelCollisionManager.prototype.a1 = function (a) {\n    this.h.d(a);\n  };\n\n  LabelCollisionManager.prototype.aq = function (a) {\n    this.ag++;\n    this.v.f(a);\n    a.e = this.v.d;\n\n    if (a.c == null) {\n      a.c = new QuadTreeBoundingBox();\n      a.c.b = a.o;\n      a.c.c = a.p;\n      a.c.e = a.n;\n      a.c.d = a.m;\n      a.c.g = a;\n      this.h.c(a.c);\n    }\n  };\n\n  LabelCollisionManager.prototype.a2 = function (a) {\n    if (a.c != null) {\n      this.h.d(a.c);\n      a.c = null;\n    }\n\n    if (a.b != null) {\n      this.h.d(a.b);\n      a.b = null;\n    }\n\n    if (a.e != null) {\n      this.v.h(a.e);\n      a.e = null;\n    }\n\n    this.ag--;\n  };\n\n  LabelCollisionManager.prototype.az = function (a) {\n    if (a.c != null && a.c.b == a.o && a.c.c == a.p) {\n      return;\n    }\n\n    if (a.c != null) {\n      this.h.d(a.c);\n    }\n\n    var b = NaN;\n    var c = NaN;\n\n    if (a.c == null) {\n      a.c = new QuadTreeBoundingBox();\n      a.c.g = a;\n    } else {\n      if (a.b != null) {\n        b = a.b.b - a.c.b;\n        c = a.b.c - a.c.c;\n      }\n    }\n\n    a.c.b = a.o;\n    a.c.c = a.p;\n    a.c.e = a.n;\n    a.c.d = a.m;\n    this.h.c(a.c);\n\n    if (a.b != null) {\n      this.h.d(a.b);\n\n      if (!isNaN_(b)) {\n        a.b = new QuadTreeBoundingBox();\n        a.b.b = a.c.b + b;\n        a.b.c = a.c.c + c;\n        a.b.g = a;\n        a.b.e = a.l;\n        a.b.d = a.k;\n        a.g = a.b.b;\n        a.h = a.b.c;\n        this.h.c(a.b);\n      } else {\n        a.b = this.i(a, a.a, 0, 0, true);\n        a.g = a.b.b;\n        a.h = a.b.c;\n        this.h.c(a.b);\n      }\n    }\n  };\n\n  LabelCollisionManager.prototype.ay = function (a) {\n    this.h.d(a.b);\n    a.b.b = a.g;\n    a.b.c = a.h;\n    a.b.e = a.l;\n    a.b.d = a.k;\n    this.h.c(a.b);\n  };\n\n  LabelCollisionManager.prototype.a4 = function () {\n    this.m = false;\n    {\n      var a = this.v.c;\n\n      while (a != null) {\n        if (a.c.b != null) {\n          this.h.d(a.c.b);\n          a.c.b = null;\n\n          if (a.c.f != null) {\n            a.c.f.clear();\n          }\n        }\n\n        a = a.a;\n      }\n\n      this.ah = 0;\n    }\n    this.af = 0;\n    this.z = 0.4;\n    this.aa = 0.4;\n    var b = truncate(Math.ceil(this.aj / 150 * this.ak));\n    this.ai = b;\n    this.at();\n  };\n\n  LabelCollisionManager.prototype.as = function () {\n    this.w.clear();\n  };\n\n  LabelCollisionManager.prototype.ar = function () {\n    this.m = true;\n  };\n\n  LabelCollisionManager.prototype.av = function () {\n    this.n = false;\n\n    if (this.m) {\n      return;\n    }\n\n    this.at();\n  };\n\n  LabelCollisionManager.prototype.at = function () {\n    this.w.clear();\n    this.a0(false);\n\n    if (this.g == 0) {\n      for (var a = 0; a < this.ak; a++) {\n        this.aa = this.z * (this.ai - this.af) / this.ai;\n        this.au();\n        this.af++;\n\n        if (this.af > this.ai) {\n          if (this.j != null) {\n            this.j();\n          }\n\n          return;\n        }\n      }\n\n      if (this.labelsMoved != null) {\n        this.labelsMoved(this.w);\n      }\n\n      if (this.ah > 0) {\n        if (!this.n) {\n          this.n = true;\n          this.e.executeDelayed(runOn(this, this.av), 150);\n        }\n      } else {\n        if (this.j != null) {\n          this.j();\n        }\n      }\n    } else {\n      if (this.g == 2) {\n        var b = this.v.c;\n        this.h.k();\n\n        while (b != null) {\n          var c = b.c;\n\n          if (c.b != null) {\n            this.h.d(c.b);\n            c.b = null;\n            c.d = false;\n            c.f = null;\n          }\n\n          b = b.a;\n        }\n\n        this.ah = 0;\n        this.a0(true);\n      }\n\n      if (this.labelsMoved != null) {\n        this.labelsMoved(this.w);\n      }\n    }\n  };\n\n  LabelCollisionManager.prototype.au = function () {\n    var a = truncate(Math.round((this.ag - 1) * LabelCollisionManager.ao.nextDouble()));\n    var b = 0;\n    var c = this.v.c;\n    var d = this.ab(null);\n    var e = 30;\n    var f = 60;\n\n    while (c != null) {\n      var g = c.c;\n      var h = 0;\n      var i = 0;\n\n      if (this.k) {\n        h = LabelCollisionManager.ao.nextDouble() * g.l * 2;\n        i = LabelCollisionManager.ao.nextDouble() * g.k * 2;\n      }\n\n      if (b == a) {\n        var j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n\n        while (this.y._inner[j] == g.a) {\n          j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n        }\n\n        var k = g.b;\n        var l = this.i(g, this.y._inner[j], h, i, false);\n        var m = 0;\n\n        while (l == null) {\n          if (m >= e) {\n            h = 0;\n            i = 0;\n          }\n\n          if (m >= f) {\n            break;\n          }\n\n          j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n          l = this.i(g, this.y._inner[j], h, i, false);\n          m++;\n        }\n\n        g.b = l;\n\n        if (k != null) {\n          this.h.d(k);\n        }\n\n        if (l != null) {\n          this.h.c(l);\n          var n = this.ab(g);\n          var o = d > n;\n\n          if (!o) {\n            var p = Math.exp(-(n - d) / this.aa);\n\n            if (LabelCollisionManager.ao.nextDouble() < p) {\n              o = true;\n            }\n          }\n\n          if (!o && k != null) {\n            this.h.d(l);\n            this.h.c(k);\n            g.b = k;\n\n            if (!this.o) {\n              this.ab(g);\n            }\n          } else {\n            g.a = this.y._inner[j];\n            g.g = g.b.b;\n            g.h = g.b.c;\n            this.w.add(g);\n          }\n        } else {\n          if (!this.o) {\n            this.ab(g);\n          }\n\n          g.d = false;\n          this.w.add(g);\n        }\n\n        break;\n      }\n\n      b++;\n      c = c.a;\n    }\n  };\n\n  LabelCollisionManager.prototype.ab = function (a) {\n    if (this.o) {\n      var b = 0;\n      var c = this.v.c;\n\n      while (c != null) {\n        var d = c.c;\n        var e = d.d;\n        d.d = false;\n\n        if (d.b != null) {\n          var f = this.h.e(d.b);\n\n          for (var g = 0; g < f.count; g++) {\n            var h = f._inner[g].l.c;\n\n            while (h != null) {\n              var i = h.c;\n\n              if (i.g == d) {\n                h = h.a;\n                continue;\n              }\n\n              if (d.b.a(i)) {\n                d.d = true;\n                b += d.b.f(i);\n              }\n\n              h = h.a;\n            }\n          }\n\n          if (d.d != e) {\n            this.w.add(d);\n          }\n        }\n\n        c = c.a;\n      }\n\n      return b;\n    } else {\n      if (a != null) {\n        var j = new HashSet$1(LabelCollisionInfo.$, 0);\n        var k = new HashSet$1(LabelCollisionInfo.$, 0);\n        var l = new HashSet$1(LabelCollisionInfo.$, 0);\n        var m = new List$1(LabelCollisionInfo.$, 0);\n\n        if (a.f != null) {\n          for (var n = 0; n < a.f.count; n++) {\n            j.add_1(a.f._inner[n]);\n            k.add_1(a.f._inner[n]);\n          }\n        }\n\n        var o = a.d;\n        a.d = false;\n\n        if (a.b != null) {\n          var p = this.h.e(a.b);\n\n          for (var q = 0; q < p.count; q++) {\n            var r = p._inner[q].l.c;\n\n            while (r != null) {\n              var s = r.c;\n\n              if (s.g == a) {\n                r = r.a;\n                continue;\n              }\n\n              if (a.b.a(s) && !l.contains(s.g)) {\n                a.d = true;\n                l.add_1(s.g);\n                m.add(s.g);\n              }\n\n              r = r.a;\n            }\n          }\n\n          p = this.h.e(a.c);\n\n          for (var t = 0; t < p.count; t++) {\n            var u = p._inner[t].l.c;\n\n            while (u != null) {\n              var v = u.c;\n\n              if (v.g == a) {\n                u = u.a;\n                continue;\n              }\n\n              if (this.p(a.c, v)) {\n                u = u.a;\n                continue;\n              }\n\n              if (a.c.a(v) && !l.contains(v.g)) {\n                a.d = true;\n                l.add_1(v.g);\n                m.add(v.g);\n              }\n\n              u = u.a;\n            }\n          }\n\n          if (a.d != o) {\n            this.w.add(a);\n          }\n\n          if (a.f != null) {\n            for (var w = a.f.count - 1; w >= 0; w--) {\n              if (!l.contains(a.f._inner[w])) {\n                var x = a.f._inner[w];\n                var y = x.f.remove(a);\n                a.f.removeAt(w);\n\n                if (x.f.count == 0 && y) {\n                  this.ah--;\n                }\n\n                var z = j.remove(x);\n\n                if (j.count == 0 && z) {\n                  this.ah--;\n                }\n              }\n            }\n          }\n\n          for (var aa = 0; aa < m.count; aa++) {\n            var ab = m._inner[aa];\n\n            if (!j.contains(ab)) {\n              if (a.f == null) {\n                a.f = new List$1(LabelCollisionInfo.$, 0);\n              }\n\n              a.f.add(ab);\n\n              if (j.count == 0) {\n                this.ah++;\n              }\n\n              j.add_1(ab);\n\n              if (ab.f == null) {\n                ab.f = new List$1(LabelCollisionInfo.$, 0);\n              }\n\n              if (ab.f.count == 0) {\n                this.ah++;\n              }\n\n              ab.f.add(a);\n            }\n          }\n        }\n      }\n\n      return this.ah;\n    }\n  };\n\n  LabelCollisionManager.prototype.p = function (a, b) {\n    if (a.g.c == a && b.g.c == b) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Object.defineProperty(LabelCollisionManager.prototype, \"al\", {\n    get: function () {\n      return this.ah;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  LabelCollisionManager.prototype.a3 = function (a, b, c) {\n    this.a5 = c;\n    var d = new QuadTree(a, b, this.h.i, this.h.f);\n    var e = this.v.c;\n\n    while (e != null) {\n      d.c(e.c.c);\n\n      if (e.c.b != null) {\n        d.c(e.c.b);\n      }\n\n      e = e.a;\n    }\n\n    this.h = d;\n    this.ae = a;\n    this.ac = b;\n  };\n\n  LabelCollisionManager.prototype.u = function () {\n    var a = this.v.c;\n\n    while (a != null) {\n      a.c.d = false;\n\n      if (a.c.b != null) {\n        if (this.s(a.c.b)) {\n          return true;\n        }\n      }\n\n      a = a.a;\n    }\n\n    return false;\n  };\n\n  LabelCollisionManager.prototype.q = function () {\n    var a = this.v.c;\n    var b = this.y;\n\n    while (a != null) {\n      if (a.c.b != null) {\n        if (this.s(a.c.b)) {\n          var c = a.c;\n\n          for (var d = 0; d < b.count; d++) {\n            var e = this.i(c, b._inner[d], 0, 0, false);\n\n            if (e != null) {\n              return true;\n            }\n          }\n        }\n      }\n\n      a = a.a;\n    }\n\n    return false;\n  };\n\n  LabelCollisionManager.prototype.am = function () {\n    var a = this.v.c;\n\n    while (a != null) {\n      a.c.d = false;\n      a = a.a;\n    }\n\n    a = this.v.c;\n\n    while (a != null) {\n      var b = a.c.b;\n      var c = a.c.c;\n      var d = this.h.e(c);\n\n      for (var e = 0; e < d.count; e++) {\n        var f = d._inner[e].l.c;\n\n        while (f != null) {\n          var g = f.c;\n\n          if (this.p(c, g)) {\n            f = f.a;\n            continue;\n          }\n\n          if (c.a(g)) {\n            var h = f.c.g;\n\n            if (h != a.c) {\n              h.d = true;\n              a.c.d = true;\n            }\n          }\n\n          f = f.a;\n        }\n      }\n\n      if (b == null) {\n        return -1;\n      }\n\n      d = this.h.e(b);\n\n      for (var i = 0; i < d.count; i++) {\n        var j = d._inner[i].l.c;\n\n        while (j != null) {\n          var k = j.c;\n\n          if (b.a(k)) {\n            var l = j.c.g;\n\n            if (l != a.c) {\n              l.d = true;\n              a.c.d = true;\n            }\n          }\n\n          j = j.a;\n        }\n      }\n\n      a = a.a;\n    }\n\n    var m = 0;\n    a = this.v.c;\n\n    while (a != null) {\n      if (a.c.d) {\n        m++;\n      }\n\n      a = a.a;\n    }\n\n    return m;\n  };\n\n  LabelCollisionManager.prototype.a0 = function (a) {\n    var b = this.v.c;\n\n    while (b != null) {\n      var c = b.c;\n\n      if (c.b == null || a) {\n        var d = false;\n\n        if (a) {\n          var e = this.h.a(c.o, c.p, 1.5);\n          var f = this.c(e);\n\n          if (f != null) {\n            for (var g = 0; g < f.length; g++) {\n              var h = f[g];\n              var i = this.i(c, h, 0, 0, false);\n\n              if (i == null) {\n                continue;\n              }\n\n              var j = this.h.e(i);\n              d = true;\n\n              for (var k = 0; k < j.count; k++) {\n                var l = j._inner[k].l.c;\n\n                while (l != null) {\n                  var m = l.c;\n\n                  if (i.a(m)) {\n                    d = false;\n                    break;\n                  }\n\n                  l = l.a;\n                }\n              }\n\n              if (d) {\n                c.b = i;\n                c.a = h;\n                c.g = c.b.b;\n                c.h = c.b.c;\n                this.h.c(c.b);\n                this.w.add(c);\n                break;\n              }\n            }\n          }\n        }\n\n        if (!d) {\n          d = this.t(c, false);\n        }\n\n        if (!d) {\n          if (c.b == null) {\n            this.t(c, true);\n          }\n        }\n      }\n\n      b = b.a;\n    }\n  };\n\n  LabelCollisionManager.prototype.t = function (a, b) {\n    var c = this.y;\n    var d = false;\n\n    if (!d) {\n      for (var e = 0; e < c.count; e++) {\n        var f = this.i(a, c._inner[e], 0, 0, b);\n\n        if (f == null) {\n          continue;\n        }\n\n        d = !this.r(f, a);\n        var g = a.c;\n\n        if (g == null) {\n          g = new QuadTreeBoundingBox();\n          g.g = a;\n          g.b = a.o;\n          g.c = a.p;\n          g.e = a.n;\n          g.d = a.m;\n          this.h.c(g);\n          a.c = g;\n        }\n\n        var h = this.r(g, a);\n        d = d && !h;\n\n        if (d) {\n          a.b = f;\n          a.a = c._inner[e];\n          a.g = a.b.b;\n          a.h = a.b.c;\n          this.h.c(a.b);\n          this.w.add(a);\n          break;\n        }\n      }\n    }\n\n    if (!d) {\n      var i = Number.POSITIVE_INFINITY;\n      var j = 0;\n      var k = null;\n\n      for (var l = 0; l < c.count; l++) {\n        var m = 0;\n        var n = null;\n        var o = new HashSet$1(LabelCollisionInfo.$, 0);\n\n        if (!this.o) {\n          n = new List$1(LabelCollisionInfo.$, 0);\n        }\n\n        var p = this.i(a, c._inner[l], 0, 0, b);\n\n        if (p == null) {\n          continue;\n        }\n\n        var q = this.h.e(p);\n\n        for (var r = 0; r < q.count; r++) {\n          var s = q._inner[r].l.c;\n\n          while (s != null) {\n            var t = s.c;\n\n            if (p.a(t)) {\n              m += p.f(t);\n\n              if (!this.o) {\n                if (!o.contains(t.g)) {\n                  n.add(t.g);\n                  o.add_1(t.g);\n                }\n              }\n            }\n\n            s = s.a;\n          }\n        }\n\n        var u = a.c;\n\n        if (u == null) {\n          u = new QuadTreeBoundingBox();\n          u.g = a;\n          u.b = a.o;\n          u.c = a.p;\n          u.e = a.n;\n          u.d = a.m;\n        }\n\n        q = this.h.e(u);\n\n        for (var v = 0; v < q.count; v++) {\n          var w = q._inner[v].l.c;\n\n          while (w != null) {\n            var x = w.c;\n\n            if (w.c.g == a) {\n              w = w.a;\n              continue;\n            }\n\n            if (this.p(u, x)) {\n              w = w.a;\n              continue;\n            }\n\n            if (u.a(x)) {\n              if (!this.o) {\n                if (!o.contains(x.g)) {\n                  n.add(x.g);\n                  o.add_1(x.g);\n                }\n              }\n            }\n\n            w = w.a;\n          }\n        }\n\n        if (m < i) {\n          var y = this.i(a, c._inner[l], 0, 0, b);\n\n          if (y != null) {\n            i = m;\n            j = l;\n\n            if (!this.o) {\n              k = n;\n            }\n          }\n        }\n      }\n\n      var z = this.i(a, c._inner[j], 0, 0, b);\n      a.d = true;\n\n      if (!this.o) {\n        if (a.f != null && a.f.count > 0) {\n          this.ah--;\n\n          for (var aa = a.f.count - 1; aa >= 0; aa--) {\n            var ab = a.f._inner[aa];\n\n            if (ab.f != null) {\n              ab.f.remove(a);\n\n              if (ab.f.count == 0) {\n                this.ah--;\n              }\n            }\n          }\n        }\n\n        if (k == null) {\n          a.d = false;\n          this.w.add(a);\n          return false;\n        }\n\n        a.f = k;\n\n        if (k.count > 0) {\n          this.ah++;\n        }\n\n        for (var ac = 0; ac < k.count; ac++) {\n          var ad = k._inner[ac];\n\n          if (ad.f == null) {\n            ad.f = new List$1(LabelCollisionInfo.$, 0);\n          }\n\n          if (!ad.f.contains(a)) {\n            if (ad.f.count == 0) {\n              this.ah++;\n            }\n\n            ad.f.add(a);\n          }\n        }\n      }\n\n      a.b = z;\n      a.a = c._inner[j];\n      a.g = a.b.b;\n      a.h = a.b.c;\n      this.h.c(a.b);\n      this.w.add(a);\n    }\n\n    return d;\n  };\n\n  LabelCollisionManager.prototype.r = function (a, b) {\n    var c = false;\n    var d = this.h.e(a);\n\n    for (var e = 0; e < d.count; e++) {\n      var f = d._inner[e].l.c;\n\n      while (f != null) {\n        if (f.c.g == b) {\n          f = f.a;\n          continue;\n        }\n\n        var g = f.c;\n\n        if (this.p(a, g)) {\n          f = f.a;\n          continue;\n        }\n\n        if (a.a(g)) {\n          c = true;\n          break;\n        }\n\n        f = f.a;\n      }\n    }\n\n    return c;\n  };\n\n  LabelCollisionManager.prototype.c = function (a) {\n    var b = new Array(3);\n    var c = GeometryUtil.f({\n      $type: Point_$type,\n      x: 0,\n      y: 0\n    }, {\n      $type: Point_$type,\n      x: a.a,\n      y: a.b\n    });\n    c = c * 180 / Math.PI;\n    c = GeometryUtil.i(c);\n\n    if (c >= 0 && c <= 22.5 || c >= 337.5 && c <= 360) {\n      b[0] = 2;\n      b[1] = 5;\n      b[2] = 7;\n    }\n\n    if (c >= 22.5 && c <= 67.5) {\n      b[0] = 2;\n      b[1] = 7;\n      b[2] = 3;\n    }\n\n    if (c >= 67.5 && c <= 112.5) {\n      b[0] = 7;\n      b[1] = 3;\n      b[2] = 6;\n    }\n\n    if (c >= 112.5 && c <= 157.5) {\n      b[0] = 3;\n      b[1] = 6;\n      b[2] = 1;\n    }\n\n    if (c >= 157.5 && c <= 202.5) {\n      b[0] = 6;\n      b[1] = 1;\n      b[2] = 4;\n    }\n\n    if (c >= 202.5 && c <= 247.5) {\n      b[0] = 1;\n      b[1] = 4;\n      b[2] = 0;\n    }\n\n    if (c >= 247.5 && c <= 292.5) {\n      b[0] = 4;\n      b[1] = 0;\n      b[2] = 5;\n    }\n\n    if (c >= 292.5 && c <= 337.5) {\n      b[0] = 0;\n      b[1] = 5;\n      b[2] = 2;\n    }\n\n    if (this.l) {\n      var d = 0;\n\n      for (var e = 0; e < b.length; e++) {\n        if (this.a[b[e]]) {\n          d++;\n        }\n      }\n\n      if (d == 0) {\n        return null;\n      }\n\n      var f = 0;\n      var g = new Array(d);\n\n      for (var h = 0; h < b.length; h++) {\n        if (this.a[b[h]]) {\n          g[f] = b[h];\n          f++;\n        }\n      }\n\n      b = g;\n    }\n\n    return b;\n  };\n\n  LabelCollisionManager.prototype.f = function (a, b) {\n    var c = false;\n    var d = null;\n    var e = new QuadTreeBoundingBox();\n    e.b = a.x;\n    e.c = a.y;\n    e.e = 5;\n    e.d = 5;\n    var f = this.h.e(e);\n\n    for (var g = 0; g < f.count; g++) {\n      var h = f._inner[g].l.c;\n\n      while (h != null) {\n        var i = h.c;\n\n        if (i.g.c == i) {\n          h = h.a;\n          continue;\n        }\n\n        if (e.a(i)) {\n          d = i;\n          c = true;\n          break;\n        }\n\n        h = h.a;\n      }\n    }\n\n    if (c) {\n      return d.g;\n    } else {\n      return null;\n    }\n  };\n\n  LabelCollisionManager.$t = markType(LabelCollisionManager, 'LabelCollisionManager');\n  LabelCollisionManager.ao = new Random(0);\n  return LabelCollisionManager;\n}(Base);\n\nexport { LabelCollisionManager };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/LabelCollisionManager.js"],"names":["__extends","Base","runOn","Point_$type","markType","List$1","LabelCollisionPlacementPositions_$type","QuadTree","LinkedList$1","LabelCollisionInfo","QuadTreeBoundingBox","Random","HashSet$1","GeometryUtil","truncate","isNaN_","LabelCollisionManager","_super","a","b","c","d","e","f","g","h","i","j","k","_this","call","l","Array","y","labelsMoved","x","ad","ak","aj","a5","ae","ac","v","$","ag","w","n","m","ai","af","z","aa","ah","o","ap","an","add","length","contains","remove","insert","p","q","prototype","s","left","right","top","bottom","ax","aw","a1","aq","a2","az","NaN","ay","a4","clear","Math","ceil","at","as","ar","av","a0","au","executeDelayed","round","ao","nextDouble","ab","count","_inner","exp","add_1","r","t","u","removeAt","Object","defineProperty","get","enumerable","configurable","a3","am","Number","POSITIVE_INFINITY","$type","PI","$t"],"mappings":"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","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Point_$type, markType } from \"./type\";\nimport { List$1 } from \"./List$1\";\nimport { LabelCollisionPlacementPositions_$type } from \"./LabelCollisionPlacementPositions\";\nimport { QuadTree } from \"./QuadTree\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { LabelCollisionInfo } from \"./LabelCollisionInfo\";\nimport { QuadTreeBoundingBox } from \"./QuadTreeBoundingBox\";\nimport { Random } from \"./Random\";\nimport { HashSet$1 } from \"./HashSet$1\";\nimport { GeometryUtil } from \"./GeometryUtil\";\nimport { truncate, isNaN_ } from \"./number\";\n/**\n * @hidden\n */\nvar LabelCollisionManager = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(LabelCollisionManager, _super);\n    function LabelCollisionManager(a, b, c, d, e, f, g, h, i, j, k) {\n        var _this = _super.call(this) || this;\n        _this.l = false;\n        _this.a = new Array(8);\n        _this.y = null;\n        _this.labelsMoved = null;\n        _this.j = null;\n        _this.h = null;\n        _this.g = 0;\n        _this.e = null;\n        _this.x = null;\n        _this.ad = 0;\n        _this.ak = 0;\n        _this.aj = 0;\n        _this.a5 = null;\n        _this.ae = 0;\n        _this.ac = 0;\n        _this.v = new LinkedList$1(LabelCollisionInfo.$);\n        _this.ag = 0;\n        _this.w = new List$1(LabelCollisionInfo.$, 0);\n        _this.n = false;\n        _this.m = false;\n        _this.ai = 0;\n        _this.af = 0;\n        _this.z = 0;\n        _this.aa = 0;\n        _this.ah = 0;\n        _this.o = false;\n        _this.k = false;\n        _this.b = null;\n        _this.ap = null;\n        _this.an = null;\n        _this.l = k != null;\n        _this.a5 = c;\n        _this.ae = a;\n        _this.ac = b;\n        _this.h = new QuadTree(a, b, 8, 8);\n        _this.g = f;\n        _this.e = d;\n        _this.x = new List$1(LabelCollisionPlacementPositions_$type, 0);\n        _this.x.add(0);\n        _this.x.add(5);\n        _this.x.add(7);\n        _this.x.add(2);\n        _this.x.add(3);\n        _this.x.add(6);\n        _this.x.add(1);\n        _this.x.add(4);\n        var l = 0;\n        for (var m = 0; m < g.length; m++) {\n            if (_this.x.contains(g[m])) {\n                _this.x.remove(g[m]);\n                _this.x.insert(l, g[m]);\n                l++;\n            }\n        }\n        if (k != null) {\n            _this.y = new List$1(LabelCollisionPlacementPositions_$type, 0);\n            for (var n = 0; n < _this.a.length; n++) {\n                _this.a[n] = false;\n            }\n            for (var o = 0; o < k.length; o++) {\n                _this.a[k[o]] = true;\n                _this.y.add(k[o]);\n            }\n            _this.b = k;\n        }\n        else {\n            _this.y = new List$1(LabelCollisionPlacementPositions_$type, 0);\n            _this.y.add(0);\n            _this.y.add(5);\n            _this.y.add(7);\n            _this.y.add(2);\n            _this.y.add(3);\n            _this.y.add(6);\n            _this.y.add(1);\n            _this.y.add(4);\n            var p = 0;\n            for (var q = 0; q < g.length; q++) {\n                if (_this.y.contains(g[q])) {\n                    _this.y.remove(g[q]);\n                    _this.y.insert(p, g[q]);\n                    p++;\n                }\n            }\n        }\n        _this.ad = e;\n        _this.ak = h;\n        _this.aj = i;\n        _this.k = j;\n        return _this;\n    }\n    LabelCollisionManager.prototype.i = function (a, b, c, d, e) {\n        var f = 0;\n        var g = 0;\n        switch (b) {\n            case 0:\n                f = a.o;\n                g = (((a.p - a.m) - a.k) - this.ad - d);\n                break;\n            case 4:\n                f = (((a.o - a.n) - a.l) - this.ad) - c;\n                g = (((a.p - a.m) - a.k) - this.ad) - d;\n                break;\n            case 5:\n                f = (((a.o + a.n) + a.l) + this.ad) + c;\n                g = (((a.p - a.m) - a.k) - this.ad) - d;\n                break;\n            case 1:\n                f = (((a.o - a.n) - a.l) - this.ad) - c;\n                g = a.p;\n                break;\n            case 2:\n                f = (((a.o + a.n) + a.l) + this.ad) + c;\n                g = a.p;\n                break;\n            case 3:\n                f = a.o;\n                g = (((a.p + a.m) + a.k) + this.ad) + d;\n                break;\n            case 6:\n                f = (((a.o - a.n) - a.l) - this.ad) - c;\n                g = (((a.p + a.m) + a.k) + this.ad) + d;\n                break;\n            case 7:\n                f = (((a.o + a.n) + a.l) + this.ad) + c;\n                g = (((a.p + a.m) + a.k) + this.ad) - d;\n                break;\n        }\n        var h = new QuadTreeBoundingBox();\n        h.b = f;\n        h.c = g;\n        h.e = a.l;\n        h.d = a.k;\n        h.g = a;\n        if (this.s(h) && !e) {\n            return null;\n        }\n        return h;\n    };\n    LabelCollisionManager.prototype.s = function (a) {\n        var b = a.b - a.e;\n        var c = a.b + a.e;\n        var d = a.c - a.d;\n        var e = a.c + a.d;\n        var f = this.a5;\n        if (b < f.left || c > f.right || d < f.top || e > f.bottom) {\n            return true;\n        }\n        return false;\n    };\n    LabelCollisionManager.prototype.ax = function (a, b, c, d, e) {\n        this.aw(a, b, c, d, e);\n    };\n    LabelCollisionManager.prototype.aw = function (a, b, c, d, e) {\n        this.h.d(a);\n        a.b = b;\n        a.c = c;\n        a.e = d;\n        a.d = e;\n        this.h.c(a);\n    };\n    LabelCollisionManager.prototype.a1 = function (a) {\n        this.h.d(a);\n    };\n    LabelCollisionManager.prototype.aq = function (a) {\n        this.ag++;\n        this.v.f(a);\n        a.e = this.v.d;\n        if (a.c == null) {\n            a.c = new QuadTreeBoundingBox();\n            a.c.b = a.o;\n            a.c.c = a.p;\n            a.c.e = a.n;\n            a.c.d = a.m;\n            a.c.g = a;\n            this.h.c(a.c);\n        }\n    };\n    LabelCollisionManager.prototype.a2 = function (a) {\n        if (a.c != null) {\n            this.h.d(a.c);\n            a.c = null;\n        }\n        if (a.b != null) {\n            this.h.d(a.b);\n            a.b = null;\n        }\n        if (a.e != null) {\n            this.v.h(a.e);\n            a.e = null;\n        }\n        this.ag--;\n    };\n    LabelCollisionManager.prototype.az = function (a) {\n        if (a.c != null && a.c.b == a.o && a.c.c == a.p) {\n            return;\n        }\n        if (a.c != null) {\n            this.h.d(a.c);\n        }\n        var b = NaN;\n        var c = NaN;\n        if (a.c == null) {\n            a.c = new QuadTreeBoundingBox();\n            a.c.g = a;\n        }\n        else {\n            if (a.b != null) {\n                b = a.b.b - a.c.b;\n                c = a.b.c - a.c.c;\n            }\n        }\n        a.c.b = a.o;\n        a.c.c = a.p;\n        a.c.e = a.n;\n        a.c.d = a.m;\n        this.h.c(a.c);\n        if (a.b != null) {\n            this.h.d(a.b);\n            if (!isNaN_(b)) {\n                a.b = new QuadTreeBoundingBox();\n                a.b.b = a.c.b + b;\n                a.b.c = a.c.c + c;\n                a.b.g = a;\n                a.b.e = a.l;\n                a.b.d = a.k;\n                a.g = a.b.b;\n                a.h = a.b.c;\n                this.h.c(a.b);\n            }\n            else {\n                a.b = this.i(a, a.a, 0, 0, true);\n                a.g = a.b.b;\n                a.h = a.b.c;\n                this.h.c(a.b);\n            }\n        }\n    };\n    LabelCollisionManager.prototype.ay = function (a) {\n        this.h.d(a.b);\n        a.b.b = a.g;\n        a.b.c = a.h;\n        a.b.e = a.l;\n        a.b.d = a.k;\n        this.h.c(a.b);\n    };\n    LabelCollisionManager.prototype.a4 = function () {\n        this.m = false;\n        {\n            var a = this.v.c;\n            while (a != null) {\n                if (a.c.b != null) {\n                    this.h.d(a.c.b);\n                    a.c.b = null;\n                    if (a.c.f != null) {\n                        a.c.f.clear();\n                    }\n                }\n                a = a.a;\n            }\n            this.ah = 0;\n        }\n        this.af = 0;\n        this.z = 0.4;\n        this.aa = 0.4;\n        var b = truncate(Math.ceil((this.aj / 150) * this.ak));\n        this.ai = b;\n        this.at();\n    };\n    LabelCollisionManager.prototype.as = function () {\n        this.w.clear();\n    };\n    LabelCollisionManager.prototype.ar = function () {\n        this.m = true;\n    };\n    LabelCollisionManager.prototype.av = function () {\n        this.n = false;\n        if (this.m) {\n            return;\n        }\n        this.at();\n    };\n    LabelCollisionManager.prototype.at = function () {\n        this.w.clear();\n        this.a0(false);\n        if (this.g == 0) {\n            for (var a = 0; a < this.ak; a++) {\n                this.aa = this.z * (this.ai - this.af) / this.ai;\n                this.au();\n                this.af++;\n                if (this.af > this.ai) {\n                    if (this.j != null) {\n                        this.j();\n                    }\n                    return;\n                }\n            }\n            if (this.labelsMoved != null) {\n                this.labelsMoved(this.w);\n            }\n            if (this.ah > 0) {\n                if (!this.n) {\n                    this.n = true;\n                    this.e.executeDelayed(runOn(this, this.av), 150);\n                }\n            }\n            else {\n                if (this.j != null) {\n                    this.j();\n                }\n            }\n        }\n        else {\n            if (this.g == 2) {\n                var b = this.v.c;\n                this.h.k();\n                while (b != null) {\n                    var c = b.c;\n                    if (c.b != null) {\n                        this.h.d(c.b);\n                        c.b = null;\n                        c.d = false;\n                        c.f = null;\n                    }\n                    b = b.a;\n                }\n                this.ah = 0;\n                this.a0(true);\n            }\n            if (this.labelsMoved != null) {\n                this.labelsMoved(this.w);\n            }\n        }\n    };\n    LabelCollisionManager.prototype.au = function () {\n        var a = truncate(Math.round((this.ag - 1) * LabelCollisionManager.ao.nextDouble()));\n        var b = 0;\n        var c = this.v.c;\n        var d = this.ab(null);\n        var e = 30;\n        var f = 60;\n        while (c != null) {\n            var g = c.c;\n            var h = 0;\n            var i = 0;\n            if (this.k) {\n                h = LabelCollisionManager.ao.nextDouble() * g.l * 2;\n                i = LabelCollisionManager.ao.nextDouble() * g.k * 2;\n            }\n            if (b == a) {\n                var j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n                while (this.y._inner[j] == g.a) {\n                    j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n                }\n                var k = g.b;\n                var l = this.i(g, this.y._inner[j], h, i, false);\n                var m = 0;\n                while (l == null) {\n                    if (m >= e) {\n                        h = 0;\n                        i = 0;\n                    }\n                    if (m >= f) {\n                        break;\n                    }\n                    j = truncate(Math.round((this.y.count - 1) * LabelCollisionManager.ao.nextDouble()));\n                    l = this.i(g, this.y._inner[j], h, i, false);\n                    m++;\n                }\n                g.b = l;\n                if (k != null) {\n                    this.h.d(k);\n                }\n                if (l != null) {\n                    this.h.c(l);\n                    var n = this.ab(g);\n                    var o = d > n;\n                    if (!o) {\n                        var p = Math.exp(-(n - d) / this.aa);\n                        if (LabelCollisionManager.ao.nextDouble() < p) {\n                            o = true;\n                        }\n                    }\n                    if (!o && k != null) {\n                        this.h.d(l);\n                        this.h.c(k);\n                        g.b = k;\n                        if (!this.o) {\n                            this.ab(g);\n                        }\n                    }\n                    else {\n                        g.a = this.y._inner[j];\n                        g.g = g.b.b;\n                        g.h = g.b.c;\n                        this.w.add(g);\n                    }\n                }\n                else {\n                    if (!this.o) {\n                        this.ab(g);\n                    }\n                    g.d = false;\n                    this.w.add(g);\n                }\n                break;\n            }\n            b++;\n            c = c.a;\n        }\n    };\n    LabelCollisionManager.prototype.ab = function (a) {\n        if (this.o) {\n            var b = 0;\n            var c = this.v.c;\n            while (c != null) {\n                var d = c.c;\n                var e = d.d;\n                d.d = false;\n                if (d.b != null) {\n                    var f = this.h.e(d.b);\n                    for (var g = 0; g < f.count; g++) {\n                        var h = f._inner[g].l.c;\n                        while (h != null) {\n                            var i = h.c;\n                            if (i.g == d) {\n                                h = h.a;\n                                continue;\n                            }\n                            if (d.b.a(i)) {\n                                d.d = true;\n                                b += d.b.f(i);\n                            }\n                            h = h.a;\n                        }\n                    }\n                    if (d.d != e) {\n                        this.w.add(d);\n                    }\n                }\n                c = c.a;\n            }\n            return b;\n        }\n        else {\n            if (a != null) {\n                var j = new HashSet$1(LabelCollisionInfo.$, 0);\n                var k = new HashSet$1(LabelCollisionInfo.$, 0);\n                var l = new HashSet$1(LabelCollisionInfo.$, 0);\n                var m = new List$1(LabelCollisionInfo.$, 0);\n                if (a.f != null) {\n                    for (var n = 0; n < a.f.count; n++) {\n                        j.add_1(a.f._inner[n]);\n                        k.add_1(a.f._inner[n]);\n                    }\n                }\n                var o = a.d;\n                a.d = false;\n                if (a.b != null) {\n                    var p = this.h.e(a.b);\n                    for (var q = 0; q < p.count; q++) {\n                        var r = p._inner[q].l.c;\n                        while (r != null) {\n                            var s = r.c;\n                            if (s.g == a) {\n                                r = r.a;\n                                continue;\n                            }\n                            if (a.b.a(s) && !l.contains(s.g)) {\n                                a.d = true;\n                                l.add_1(s.g);\n                                m.add(s.g);\n                            }\n                            r = r.a;\n                        }\n                    }\n                    p = this.h.e(a.c);\n                    for (var t = 0; t < p.count; t++) {\n                        var u = p._inner[t].l.c;\n                        while (u != null) {\n                            var v = u.c;\n                            if (v.g == a) {\n                                u = u.a;\n                                continue;\n                            }\n                            if (this.p(a.c, v)) {\n                                u = u.a;\n                                continue;\n                            }\n                            if (a.c.a(v) && !l.contains(v.g)) {\n                                a.d = true;\n                                l.add_1(v.g);\n                                m.add(v.g);\n                            }\n                            u = u.a;\n                        }\n                    }\n                    if (a.d != o) {\n                        this.w.add(a);\n                    }\n                    if (a.f != null) {\n                        for (var w = a.f.count - 1; w >= 0; w--) {\n                            if (!l.contains(a.f._inner[w])) {\n                                var x = a.f._inner[w];\n                                var y = x.f.remove(a);\n                                a.f.removeAt(w);\n                                if (x.f.count == 0 && y) {\n                                    this.ah--;\n                                }\n                                var z = j.remove(x);\n                                if (j.count == 0 && z) {\n                                    this.ah--;\n                                }\n                            }\n                        }\n                    }\n                    for (var aa = 0; aa < m.count; aa++) {\n                        var ab = m._inner[aa];\n                        if (!j.contains(ab)) {\n                            if (a.f == null) {\n                                a.f = new List$1(LabelCollisionInfo.$, 0);\n                            }\n                            a.f.add(ab);\n                            if (j.count == 0) {\n                                this.ah++;\n                            }\n                            j.add_1(ab);\n                            if (ab.f == null) {\n                                ab.f = new List$1(LabelCollisionInfo.$, 0);\n                            }\n                            if (ab.f.count == 0) {\n                                this.ah++;\n                            }\n                            ab.f.add(a);\n                        }\n                    }\n                }\n            }\n            return this.ah;\n        }\n    };\n    LabelCollisionManager.prototype.p = function (a, b) {\n        if (a.g.c == a && b.g.c == b) {\n            return true;\n        }\n        return false;\n    };\n    Object.defineProperty(LabelCollisionManager.prototype, \"al\", {\n        get: function () {\n            return this.ah;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LabelCollisionManager.prototype.a3 = function (a, b, c) {\n        this.a5 = c;\n        var d = new QuadTree(a, b, this.h.i, this.h.f);\n        var e = this.v.c;\n        while (e != null) {\n            d.c(e.c.c);\n            if (e.c.b != null) {\n                d.c(e.c.b);\n            }\n            e = e.a;\n        }\n        this.h = d;\n        this.ae = a;\n        this.ac = b;\n    };\n    LabelCollisionManager.prototype.u = function () {\n        var a = this.v.c;\n        while (a != null) {\n            a.c.d = false;\n            if (a.c.b != null) {\n                if (this.s(a.c.b)) {\n                    return true;\n                }\n            }\n            a = a.a;\n        }\n        return false;\n    };\n    LabelCollisionManager.prototype.q = function () {\n        var a = this.v.c;\n        var b = this.y;\n        while (a != null) {\n            if (a.c.b != null) {\n                if (this.s(a.c.b)) {\n                    var c = a.c;\n                    for (var d = 0; d < b.count; d++) {\n                        var e = this.i(c, b._inner[d], 0, 0, false);\n                        if (e != null) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            a = a.a;\n        }\n        return false;\n    };\n    LabelCollisionManager.prototype.am = function () {\n        var a = this.v.c;\n        while (a != null) {\n            a.c.d = false;\n            a = a.a;\n        }\n        a = this.v.c;\n        while (a != null) {\n            var b = a.c.b;\n            var c = a.c.c;\n            var d = this.h.e(c);\n            for (var e = 0; e < d.count; e++) {\n                var f = d._inner[e].l.c;\n                while (f != null) {\n                    var g = f.c;\n                    if (this.p(c, g)) {\n                        f = f.a;\n                        continue;\n                    }\n                    if (c.a(g)) {\n                        var h = f.c.g;\n                        if (h != a.c) {\n                            h.d = true;\n                            a.c.d = true;\n                        }\n                    }\n                    f = f.a;\n                }\n            }\n            if (b == null) {\n                return -1;\n            }\n            d = this.h.e(b);\n            for (var i = 0; i < d.count; i++) {\n                var j = d._inner[i].l.c;\n                while (j != null) {\n                    var k = j.c;\n                    if (b.a(k)) {\n                        var l = j.c.g;\n                        if (l != a.c) {\n                            l.d = true;\n                            a.c.d = true;\n                        }\n                    }\n                    j = j.a;\n                }\n            }\n            a = a.a;\n        }\n        var m = 0;\n        a = this.v.c;\n        while (a != null) {\n            if (a.c.d) {\n                m++;\n            }\n            a = a.a;\n        }\n        return m;\n    };\n    LabelCollisionManager.prototype.a0 = function (a) {\n        var b = this.v.c;\n        while (b != null) {\n            var c = b.c;\n            if (c.b == null || a) {\n                var d = false;\n                if (a) {\n                    var e = this.h.a(c.o, c.p, 1.5);\n                    var f = this.c(e);\n                    if (f != null) {\n                        for (var g = 0; g < f.length; g++) {\n                            var h = f[g];\n                            var i = this.i(c, h, 0, 0, false);\n                            if (i == null) {\n                                continue;\n                            }\n                            var j = this.h.e(i);\n                            d = true;\n                            for (var k = 0; k < j.count; k++) {\n                                var l = j._inner[k].l.c;\n                                while (l != null) {\n                                    var m = l.c;\n                                    if (i.a(m)) {\n                                        d = false;\n                                        break;\n                                    }\n                                    l = l.a;\n                                }\n                            }\n                            if (d) {\n                                c.b = i;\n                                c.a = h;\n                                c.g = c.b.b;\n                                c.h = c.b.c;\n                                this.h.c(c.b);\n                                this.w.add(c);\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (!d) {\n                    d = this.t(c, false);\n                }\n                if (!d) {\n                    if (c.b == null) {\n                        this.t(c, true);\n                    }\n                }\n            }\n            b = b.a;\n        }\n    };\n    LabelCollisionManager.prototype.t = function (a, b) {\n        var c = this.y;\n        var d = false;\n        if (!d) {\n            for (var e = 0; e < c.count; e++) {\n                var f = this.i(a, c._inner[e], 0, 0, b);\n                if (f == null) {\n                    continue;\n                }\n                d = !this.r(f, a);\n                var g = a.c;\n                if (g == null) {\n                    g = new QuadTreeBoundingBox();\n                    g.g = a;\n                    g.b = a.o;\n                    g.c = a.p;\n                    g.e = a.n;\n                    g.d = a.m;\n                    this.h.c(g);\n                    a.c = g;\n                }\n                var h = this.r(g, a);\n                d = d && !h;\n                if (d) {\n                    a.b = f;\n                    a.a = c._inner[e];\n                    a.g = a.b.b;\n                    a.h = a.b.c;\n                    this.h.c(a.b);\n                    this.w.add(a);\n                    break;\n                }\n            }\n        }\n        if (!d) {\n            var i = Number.POSITIVE_INFINITY;\n            var j = 0;\n            var k = null;\n            for (var l = 0; l < c.count; l++) {\n                var m = 0;\n                var n = null;\n                var o = new HashSet$1(LabelCollisionInfo.$, 0);\n                if (!this.o) {\n                    n = new List$1(LabelCollisionInfo.$, 0);\n                }\n                var p = this.i(a, c._inner[l], 0, 0, b);\n                if (p == null) {\n                    continue;\n                }\n                var q = this.h.e(p);\n                for (var r = 0; r < q.count; r++) {\n                    var s = q._inner[r].l.c;\n                    while (s != null) {\n                        var t = s.c;\n                        if (p.a(t)) {\n                            m += p.f(t);\n                            if (!this.o) {\n                                if (!o.contains(t.g)) {\n                                    n.add(t.g);\n                                    o.add_1(t.g);\n                                }\n                            }\n                        }\n                        s = s.a;\n                    }\n                }\n                var u = a.c;\n                if (u == null) {\n                    u = new QuadTreeBoundingBox();\n                    u.g = a;\n                    u.b = a.o;\n                    u.c = a.p;\n                    u.e = a.n;\n                    u.d = a.m;\n                }\n                q = this.h.e(u);\n                for (var v = 0; v < q.count; v++) {\n                    var w = q._inner[v].l.c;\n                    while (w != null) {\n                        var x = w.c;\n                        if (w.c.g == a) {\n                            w = w.a;\n                            continue;\n                        }\n                        if (this.p(u, x)) {\n                            w = w.a;\n                            continue;\n                        }\n                        if (u.a(x)) {\n                            if (!this.o) {\n                                if (!o.contains(x.g)) {\n                                    n.add(x.g);\n                                    o.add_1(x.g);\n                                }\n                            }\n                        }\n                        w = w.a;\n                    }\n                }\n                if (m < i) {\n                    var y = this.i(a, c._inner[l], 0, 0, b);\n                    if (y != null) {\n                        i = m;\n                        j = l;\n                        if (!this.o) {\n                            k = n;\n                        }\n                    }\n                }\n            }\n            var z = this.i(a, c._inner[j], 0, 0, b);\n            a.d = true;\n            if (!this.o) {\n                if (a.f != null && a.f.count > 0) {\n                    this.ah--;\n                    for (var aa = a.f.count - 1; aa >= 0; aa--) {\n                        var ab = a.f._inner[aa];\n                        if (ab.f != null) {\n                            ab.f.remove(a);\n                            if (ab.f.count == 0) {\n                                this.ah--;\n                            }\n                        }\n                    }\n                }\n                if (k == null) {\n                    a.d = false;\n                    this.w.add(a);\n                    return false;\n                }\n                a.f = k;\n                if (k.count > 0) {\n                    this.ah++;\n                }\n                for (var ac = 0; ac < k.count; ac++) {\n                    var ad = k._inner[ac];\n                    if (ad.f == null) {\n                        ad.f = new List$1(LabelCollisionInfo.$, 0);\n                    }\n                    if (!ad.f.contains(a)) {\n                        if (ad.f.count == 0) {\n                            this.ah++;\n                        }\n                        ad.f.add(a);\n                    }\n                }\n            }\n            a.b = z;\n            a.a = c._inner[j];\n            a.g = a.b.b;\n            a.h = a.b.c;\n            this.h.c(a.b);\n            this.w.add(a);\n        }\n        return d;\n    };\n    LabelCollisionManager.prototype.r = function (a, b) {\n        var c = false;\n        var d = this.h.e(a);\n        for (var e = 0; e < d.count; e++) {\n            var f = d._inner[e].l.c;\n            while (f != null) {\n                if (f.c.g == b) {\n                    f = f.a;\n                    continue;\n                }\n                var g = f.c;\n                if (this.p(a, g)) {\n                    f = f.a;\n                    continue;\n                }\n                if (a.a(g)) {\n                    c = true;\n                    break;\n                }\n                f = f.a;\n            }\n        }\n        return c;\n    };\n    LabelCollisionManager.prototype.c = function (a) {\n        var b = new Array(3);\n        var c = GeometryUtil.f({ $type: Point_$type, x: 0, y: 0 }, { $type: Point_$type, x: a.a, y: a.b });\n        c = c * 180 / Math.PI;\n        c = GeometryUtil.i(c);\n        if ((c >= 0 && c <= 22.5) || (c >= 337.5 && c <= 360)) {\n            b[0] = 2;\n            b[1] = 5;\n            b[2] = 7;\n        }\n        if (c >= 22.5 && c <= 67.5) {\n            b[0] = 2;\n            b[1] = 7;\n            b[2] = 3;\n        }\n        if (c >= 67.5 && c <= 112.5) {\n            b[0] = 7;\n            b[1] = 3;\n            b[2] = 6;\n        }\n        if (c >= 112.5 && c <= 157.5) {\n            b[0] = 3;\n            b[1] = 6;\n            b[2] = 1;\n        }\n        if (c >= 157.5 && c <= 202.5) {\n            b[0] = 6;\n            b[1] = 1;\n            b[2] = 4;\n        }\n        if (c >= 202.5 && c <= 247.5) {\n            b[0] = 1;\n            b[1] = 4;\n            b[2] = 0;\n        }\n        if (c >= 247.5 && c <= 292.5) {\n            b[0] = 4;\n            b[1] = 0;\n            b[2] = 5;\n        }\n        if (c >= 292.5 && c <= 337.5) {\n            b[0] = 0;\n            b[1] = 5;\n            b[2] = 2;\n        }\n        if (this.l) {\n            var d = 0;\n            for (var e = 0; e < b.length; e++) {\n                if (this.a[b[e]]) {\n                    d++;\n                }\n            }\n            if (d == 0) {\n                return null;\n            }\n            var f = 0;\n            var g = new Array(d);\n            for (var h = 0; h < b.length; h++) {\n                if (this.a[b[h]]) {\n                    g[f] = b[h];\n                    f++;\n                }\n            }\n            b = g;\n        }\n        return b;\n    };\n    LabelCollisionManager.prototype.f = function (a, b) {\n        var c = false;\n        var d = null;\n        var e = new QuadTreeBoundingBox();\n        e.b = a.x;\n        e.c = a.y;\n        e.e = 5;\n        e.d = 5;\n        var f = this.h.e(e);\n        for (var g = 0; g < f.count; g++) {\n            var h = f._inner[g].l.c;\n            while (h != null) {\n                var i = h.c;\n                if (i.g.c == i) {\n                    h = h.a;\n                    continue;\n                }\n                if (e.a(i)) {\n                    d = i;\n                    c = true;\n                    break;\n                }\n                h = h.a;\n            }\n        }\n        if (c) {\n            return d.g;\n        }\n        else {\n            return null;\n        }\n    };\n    LabelCollisionManager.$t = markType(LabelCollisionManager, 'LabelCollisionManager');\n    LabelCollisionManager.ao = new Random(0);\n    return LabelCollisionManager;\n}(Base));\nexport { LabelCollisionManager };\n"]},"metadata":{},"sourceType":"module"}