{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, typeCast, markType } from \"./type\";\nimport { AsyncDataSourcePageRequest } from \"./AsyncDataSourcePageRequest\";\nimport { WeakReference } from \"./WeakReference\";\nimport { IDataSourceExecutionContext_$type } from \"./IDataSourceExecutionContext\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { List$1 } from \"./List$1\";\n/**\n * @hidden\n */\n\nvar AsyncVirtualDataSourceProviderWorker =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(AsyncVirtualDataSourceProviderWorker, _super);\n\n  function AsyncVirtualDataSourceProviderWorker(a) {\n    var _this = _super.call(this) || this;\n\n    _this.r = new LinkedList$1(AsyncDataSourcePageRequest.$);\n    _this.p = new List$1(AsyncDataSourcePageRequest.$, 0);\n    _this.ac = {};\n    _this.i = true;\n    _this.u = 0;\n    _this.t = 0;\n    _this.v = 0;\n    _this.e = null;\n    _this.s = -1;\n    _this.as = null;\n    _this.aq = null;\n    _this.ar = null;\n    _this.h = false;\n    _this._isShutdown = false;\n    _this.g = false;\n    _this.i = true;\n    _this.u = a.pageSizeRequested;\n    _this.t = _this.u;\n    _this.v = a.timeoutMilliseconds;\n    _this.as = new WeakReference(a.pageLoaded);\n    _this.aq = new WeakReference(a.batchCompleted);\n    _this.ar = new WeakReference(a.executionContext);\n    return _this;\n  }\n\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"tasks\", {\n    get: function () {\n      return this.p;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"pageLoaded\", {\n    get: function () {\n      if (this.as == null) {\n        return null;\n      }\n\n      return this.as.c;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"batchCompleted\", {\n    get: function () {\n      if (this.aq == null) {\n        return null;\n      }\n\n      return this.aq.c;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"executionContext\", {\n    get: function () {\n      if (this.ar == null) {\n        return null;\n      }\n\n      return this.ar.c;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualPageSize\", {\n    get: function () {\n      return this.t;\n    },\n    set: function (a) {\n      this.t = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualCount\", {\n    get: function () {\n      return this.s;\n    },\n    set: function (a) {\n      this.s = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualSchema\", {\n    get: function () {\n      return this.e;\n    },\n    set: function (a) {\n      this.e = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"populatedActualPageSize\", {\n    get: function () {\n      return this.h;\n    },\n    set: function (a) {\n      this.h = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"isRunning\", {\n    get: function () {\n      return this.i;\n    },\n    set: function (a) {\n      this.i = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AsyncVirtualDataSourceProviderWorker.prototype.addPageRequest = function (a, b) {\n    return this.addPageRequestWithRetry(a, b, 200);\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.addPageRequestWithRetry = function (a, b, c) {\n    if (this.isShutdown) {\n      return false;\n    }\n\n    if (b == 2) {\n      this.r.e(new AsyncDataSourcePageRequest(a, c));\n    } else {\n      this.r.f(new AsyncDataSourcePageRequest(a, c));\n    }\n\n    return true;\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.removePageRequest = function (a) {\n    var b = null;\n    var c = this.r.c;\n\n    while (c != null) {\n      var d = c.c;\n\n      if (d.index == a) {\n        b = c;\n        break;\n      }\n\n      c = c.a;\n    }\n\n    if (b != null) {\n      this.r.h(b);\n    }\n  };\n\n  Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"isShutdown\", {\n    get: function () {\n      return this._isShutdown;\n    },\n    set: function (a) {\n      this._isShutdown = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AsyncVirtualDataSourceProviderWorker.prototype.removeAllPageRequests = function () {\n    this.r.g();\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.shutdown = function () {\n    this.as = null;\n    this.aq = null;\n    this.ar = null;\n    this.isShutdown = true;\n    this.i = false;\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.initialize = function () {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.getTaskDataHolder = function () {\n    return null;\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.getTasksData = function (a) {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.removeCompletedTaskData = function (a, b) {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.getCompletedTaskData = function (a, b) {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.runATask = function () {\n    for (var a = 0; a < this.p.count; a++) {\n      if (!this.p.item(a).taskHolder.task.isRunning && !this.p.item(a).isDone && !this.p.item(a).taskHolder.task.isCompleted && !this.p.item(a).taskHolder.task.isCancelled) {\n        this.p.item(a).taskHolder.task.isRunning = true;\n        this.p.item(a).taskHolder.task.run();\n        break;\n      }\n    }\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.checkAndPotentiallyWaitOnTasks = function (a) {\n    this.runATask();\n\n    for (var b = 0; b < a.length; b++) {\n      if (a[b].isDone || a[b].taskHolder.task.isCompleted || a[b].taskHolder.task.isCancelled) {\n        return b;\n      }\n    }\n\n    return -1;\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.doWork = function () {\n    if (!this.g) {\n      this.g = true;\n      this.initialize();\n    }\n\n    {\n      var a = null;\n      var b = null;\n      var c = this.p.count;\n\n      if (this.r.c != null && c < 2) {\n        var d = this.r.c;\n        this.r.i();\n        this.makeTaskForRequest(d.c, d.c.retryDelay);\n        c = this.p.count;\n      }\n\n      if (c > 0) {\n        a = new Array(c);\n\n        for (var e = 0; e < c; e++) {\n          a[e] = this.p.item(e);\n        }\n\n        b = this.getTaskDataHolder();\n        this.getTasksData(b);\n      }\n\n      if (a != null && a.length > 0) {\n        var f = this.checkAndPotentiallyWaitOnTasks(a);\n\n        if (!this.i) {\n          return;\n        }\n\n        if (f >= 0) {\n          var g = a[f];\n          this.getCompletedTaskData(b, f);\n          this.p.remove(g);\n          this.removeCompletedTaskData(b, f);\n          this.processCompletedTask(g.taskHolder, g.retryDelay, g.index, b);\n        }\n      } else {}\n\n      if (!this.i) {\n        return;\n      }\n\n      if (this.i) {\n        window.setTimeout(runOn(this, this.doWork), 100);\n      }\n    }\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.makeTaskForRequest = function (a, b) {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.processCompletedTask = function (a, b, c, d) {};\n\n  AsyncVirtualDataSourceProviderWorker.prototype.retryIndex = function (a, b) {\n    var _this = this;\n\n    var c = b * 2;\n\n    if (b > 20000) {\n      this.removePageRequest(a);\n    }\n\n    if (this.ar == null) {\n      this.shutdown();\n      return;\n    }\n\n    var d = typeCast(IDataSourceExecutionContext_$type, this.ar.c);\n\n    if (d == null) {\n      this.shutdown();\n      return;\n    }\n\n    d.executeDelayed(function () {\n      return _this.addPageRequestWithRetry(a, 0, c);\n    }, b);\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.isLastPage = function (a) {\n    if (this.s < 0) {\n      return false;\n    }\n\n    if (this.s - a * this.t < this.t) {\n      return true;\n    }\n\n    return false;\n  };\n\n  AsyncVirtualDataSourceProviderWorker.prototype.createBatchRequest = function (a) {};\n\n  AsyncVirtualDataSourceProviderWorker.$t = markType(AsyncVirtualDataSourceProviderWorker, 'AsyncVirtualDataSourceProviderWorker');\n  AsyncVirtualDataSourceProviderWorker.maxSimultaneousExecutingTasks = 2;\n  AsyncVirtualDataSourceProviderWorker.maxRetryDelay = 20000;\n  AsyncVirtualDataSourceProviderWorker.initialRetryDelay = 200;\n  return AsyncVirtualDataSourceProviderWorker;\n}(Base);\n\nexport { AsyncVirtualDataSourceProviderWorker };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/AsyncVirtualDataSourceProviderWorker.js"],"names":["__extends","Base","runOn","typeCast","markType","AsyncDataSourcePageRequest","WeakReference","IDataSourceExecutionContext_$type","LinkedList$1","List$1","AsyncVirtualDataSourceProviderWorker","_super","a","_this","call","r","$","p","ac","i","u","t","v","e","s","as","aq","ar","h","_isShutdown","g","pageSizeRequested","timeoutMilliseconds","pageLoaded","batchCompleted","executionContext","Object","defineProperty","prototype","get","enumerable","configurable","c","set","addPageRequest","b","addPageRequestWithRetry","isShutdown","f","removePageRequest","d","index","removeAllPageRequests","shutdown","initialize","getTaskDataHolder","getTasksData","removeCompletedTaskData","getCompletedTaskData","runATask","count","item","taskHolder","task","isRunning","isDone","isCompleted","isCancelled","run","checkAndPotentiallyWaitOnTasks","length","doWork","makeTaskForRequest","retryDelay","Array","remove","processCompletedTask","window","setTimeout","retryIndex","executeDelayed","isLastPage","createBatchRequest","$t","maxSimultaneousExecutingTasks","maxRetryDelay","initialRetryDelay"],"mappings":"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","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, typeCast, markType } from \"./type\";\nimport { AsyncDataSourcePageRequest } from \"./AsyncDataSourcePageRequest\";\nimport { WeakReference } from \"./WeakReference\";\nimport { IDataSourceExecutionContext_$type } from \"./IDataSourceExecutionContext\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { List$1 } from \"./List$1\";\n/**\n * @hidden\n */\nvar AsyncVirtualDataSourceProviderWorker = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(AsyncVirtualDataSourceProviderWorker, _super);\n    function AsyncVirtualDataSourceProviderWorker(a) {\n        var _this = _super.call(this) || this;\n        _this.r = new LinkedList$1(AsyncDataSourcePageRequest.$);\n        _this.p = new List$1(AsyncDataSourcePageRequest.$, 0);\n        _this.ac = {};\n        _this.i = true;\n        _this.u = 0;\n        _this.t = 0;\n        _this.v = 0;\n        _this.e = null;\n        _this.s = -1;\n        _this.as = null;\n        _this.aq = null;\n        _this.ar = null;\n        _this.h = false;\n        _this._isShutdown = false;\n        _this.g = false;\n        _this.i = true;\n        _this.u = a.pageSizeRequested;\n        _this.t = _this.u;\n        _this.v = a.timeoutMilliseconds;\n        _this.as = new WeakReference(a.pageLoaded);\n        _this.aq = new WeakReference(a.batchCompleted);\n        _this.ar = new WeakReference(a.executionContext);\n        return _this;\n    }\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"tasks\", {\n        get: function () {\n            return this.p;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"pageLoaded\", {\n        get: function () {\n            if (this.as == null) {\n                return null;\n            }\n            return this.as.c;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"batchCompleted\", {\n        get: function () {\n            if (this.aq == null) {\n                return null;\n            }\n            return this.aq.c;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"executionContext\", {\n        get: function () {\n            if (this.ar == null) {\n                return null;\n            }\n            return this.ar.c;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualPageSize\", {\n        get: function () {\n            return this.t;\n        },\n        set: function (a) {\n            this.t = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualCount\", {\n        get: function () {\n            return this.s;\n        },\n        set: function (a) {\n            this.s = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"actualSchema\", {\n        get: function () {\n            return this.e;\n        },\n        set: function (a) {\n            this.e = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"populatedActualPageSize\", {\n        get: function () {\n            return this.h;\n        },\n        set: function (a) {\n            this.h = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"isRunning\", {\n        get: function () {\n            return this.i;\n        },\n        set: function (a) {\n            this.i = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AsyncVirtualDataSourceProviderWorker.prototype.addPageRequest = function (a, b) {\n        return this.addPageRequestWithRetry(a, b, 200);\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.addPageRequestWithRetry = function (a, b, c) {\n        if (this.isShutdown) {\n            return false;\n        }\n        if (b == 2) {\n            this.r.e(new AsyncDataSourcePageRequest(a, c));\n        }\n        else {\n            this.r.f(new AsyncDataSourcePageRequest(a, c));\n        }\n        return true;\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.removePageRequest = function (a) {\n        var b = null;\n        var c = this.r.c;\n        while (c != null) {\n            var d = c.c;\n            if (d.index == a) {\n                b = c;\n                break;\n            }\n            c = c.a;\n        }\n        if (b != null) {\n            this.r.h(b);\n        }\n    };\n    Object.defineProperty(AsyncVirtualDataSourceProviderWorker.prototype, \"isShutdown\", {\n        get: function () {\n            return this._isShutdown;\n        },\n        set: function (a) {\n            this._isShutdown = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AsyncVirtualDataSourceProviderWorker.prototype.removeAllPageRequests = function () {\n        this.r.g();\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.shutdown = function () {\n        this.as = null;\n        this.aq = null;\n        this.ar = null;\n        this.isShutdown = true;\n        this.i = false;\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.initialize = function () {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.getTaskDataHolder = function () {\n        return null;\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.getTasksData = function (a) {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.removeCompletedTaskData = function (a, b) {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.getCompletedTaskData = function (a, b) {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.runATask = function () {\n        for (var a = 0; a < this.p.count; a++) {\n            if (!this.p.item(a).taskHolder.task.isRunning && !this.p.item(a).isDone && !this.p.item(a).taskHolder.task.isCompleted && !this.p.item(a).taskHolder.task.isCancelled) {\n                this.p.item(a).taskHolder.task.isRunning = true;\n                this.p.item(a).taskHolder.task.run();\n                break;\n            }\n        }\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.checkAndPotentiallyWaitOnTasks = function (a) {\n        this.runATask();\n        for (var b = 0; b < a.length; b++) {\n            if (a[b].isDone || a[b].taskHolder.task.isCompleted || a[b].taskHolder.task.isCancelled) {\n                return b;\n            }\n        }\n        return -1;\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.doWork = function () {\n        if (!this.g) {\n            this.g = true;\n            this.initialize();\n        }\n        {\n            var a = null;\n            var b = null;\n            var c = this.p.count;\n            if (this.r.c != null && c < 2) {\n                var d = this.r.c;\n                this.r.i();\n                this.makeTaskForRequest(d.c, d.c.retryDelay);\n                c = this.p.count;\n            }\n            if (c > 0) {\n                a = new Array(c);\n                for (var e = 0; e < c; e++) {\n                    a[e] = this.p.item(e);\n                }\n                b = this.getTaskDataHolder();\n                this.getTasksData(b);\n            }\n            if (a != null && a.length > 0) {\n                var f = this.checkAndPotentiallyWaitOnTasks(a);\n                if (!this.i) {\n                    return;\n                }\n                if (f >= 0) {\n                    var g = a[f];\n                    this.getCompletedTaskData(b, f);\n                    this.p.remove(g);\n                    this.removeCompletedTaskData(b, f);\n                    this.processCompletedTask(g.taskHolder, g.retryDelay, g.index, b);\n                }\n            }\n            else {\n            }\n            if (!this.i) {\n                return;\n            }\n            if (this.i) {\n                window.setTimeout(runOn(this, this.doWork), 100);\n            }\n        }\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.makeTaskForRequest = function (a, b) {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.processCompletedTask = function (a, b, c, d) {\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.retryIndex = function (a, b) {\n        var _this = this;\n        var c = b * 2;\n        if (b > 20000) {\n            this.removePageRequest(a);\n        }\n        if (this.ar == null) {\n            this.shutdown();\n            return;\n        }\n        var d = typeCast(IDataSourceExecutionContext_$type, this.ar.c);\n        if (d == null) {\n            this.shutdown();\n            return;\n        }\n        d.executeDelayed(function () { return _this.addPageRequestWithRetry(a, 0, c); }, b);\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.isLastPage = function (a) {\n        if (this.s < 0) {\n            return false;\n        }\n        if ((this.s - (a * this.t)) < this.t) {\n            return true;\n        }\n        return false;\n    };\n    AsyncVirtualDataSourceProviderWorker.prototype.createBatchRequest = function (a) {\n    };\n    AsyncVirtualDataSourceProviderWorker.$t = markType(AsyncVirtualDataSourceProviderWorker, 'AsyncVirtualDataSourceProviderWorker');\n    AsyncVirtualDataSourceProviderWorker.maxSimultaneousExecutingTasks = 2;\n    AsyncVirtualDataSourceProviderWorker.maxRetryDelay = 20000;\n    AsyncVirtualDataSourceProviderWorker.initialRetryDelay = 200;\n    return AsyncVirtualDataSourceProviderWorker;\n}(Base));\nexport { AsyncVirtualDataSourceProviderWorker };\n"]},"metadata":{},"sourceType":"module"}