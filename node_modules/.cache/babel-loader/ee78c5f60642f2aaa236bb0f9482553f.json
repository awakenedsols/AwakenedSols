{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends, __values } from \"tslib\";\nimport { BaseTransactionService } from \"./BaseTransactionService\";\nimport { List$1 } from \"./List$1\";\nimport { TransactionHistory } from \"./TransactionHistory\";\nimport { Base, fromEnum, markType } from \"./type\";\nimport { Transaction } from \"./Transaction\";\nimport { TransactionCommit } from \"./TransactionCommit\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { TransactionState } from \"./TransactionState\";\nimport { TransactionType } from \"./TransactionType\";\nimport { InvalidOperationException } from \"./InvalidOperationException\";\n/**\n * @hidden\n */\n\nvar TransactionService =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(TransactionService, _super);\n\n  function TransactionService(a, b, c) {\n    var _this = _super.call(this, a, b, c) || this;\n\n    _this.am = new List$1(Transaction.$, 0);\n    _this.ak = new List$1(TransactionCommit.$, 0);\n    _this.ai = null;\n    _this.an = new List$1(TransactionHistory.$, 0);\n    _this.al = new List$1(TransactionHistory.$, 0);\n    _this.aj = null;\n    _this.aj = c;\n\n    if (_this.aj != null) {\n      _this.ai = new Dictionary$2(Base.$, TransactionState.$, 2, _this.aj);\n    } else {\n      _this.ai = new Dictionary$2(Base.$, TransactionState.$, 0);\n    }\n\n    return _this;\n  }\n\n  TransactionService.prototype.get_l = function () {\n    return true;\n  };\n\n  TransactionService.prototype.set_l = function (a) {\n    _super.prototype.set_l.call(this, a);\n  };\n\n  TransactionService.prototype.get_k = function () {\n    return this.an.count > 0;\n  };\n\n  TransactionService.prototype.get_j = function () {\n    return this.al.count > 0;\n  };\n\n  TransactionService.prototype.af = function (a, b) {\n    var c = null;\n\n    if (a.containsKey(b.id)) {\n      c = a.item(b.id);\n    }\n\n    if (c != null) {\n      switch (b.type) {\n        case TransactionType.Delete:\n          if (c.transactionType == 0) {\n            a.removeItem(b.id);\n          } else if (c.transactionType == 1) {\n            c.value = null;\n            c.transactionType = TransactionType.Delete;\n          }\n\n          break;\n\n        case 1:\n          if (c.transactionType == 0 || c.transactionType == 1) {\n            this.h(c.value, b.value);\n          }\n\n          break;\n      }\n    } else {\n      a.addItem(b.id, new TransactionState(b.id, b.type, this.r(b.value)));\n    }\n  };\n\n  TransactionService.prototype.aq = function (a, b) {\n    var c = null;\n\n    if (a.containsKey(b.id)) {\n      c = a.item(b.id);\n    }\n\n    switch (b.type) {\n      case 0:\n        if (c != null) {\n          throw new InvalidOperationException(1, \"Cannot add this transaction. A transaction with this ID already exists.\");\n        }\n\n        break;\n\n      case 1:\n      case TransactionType.Delete:\n        if (c != null && c.transactionType == TransactionType.Delete) {\n          throw new InvalidOperationException(1, \"Cannot add this transaction. A transaction with this ID has already been deleted.\");\n        }\n\n        break;\n    }\n  };\n\n  TransactionService.prototype.z = function (a, b, c) {\n    _super.prototype.z.call(this, a, b, c);\n\n    switch (a) {\n      case \"IsEnabled\":\n        this.w(true, null);\n        break;\n    }\n  };\n\n  TransactionService.prototype.v = function (a, b) {\n    if (b === void 0) {\n      b = false;\n    }\n\n    var c = this.m || b ? this.o : this.ai;\n    var d = this.m || b ? this.q : this.am;\n    this.aq(c, a);\n    this.af(c, a);\n    d.add(a);\n    a.transactionID = TransactionService.ao++;\n\n    if (!this.m && !b) {\n      var e = new TransactionHistory();\n      e.transactions.add(a);\n      this.an.insert(0, e);\n      this.al.clear();\n      this.aa(3, e);\n    }\n  };\n\n  TransactionService.prototype.w = function (a, b) {\n    if (b === void 0) {\n      b = null;\n    }\n\n    if (b != null) {\n      for (var c = 0; c < this.am.count; c++) {\n        if (this.am._inner[c].id == b) {\n          this.am.removeAt(c);\n          c--;\n        }\n      }\n\n      this.ai.removeItem(b);\n\n      for (var d = 0; d < this.an.count; d++) {\n        for (var e = 0; e < this.an._inner[d].transactions.count; e++) {\n          if (this.an._inner[d].transactions._inner[e].id == b) {\n            this.an._inner[d].transactions.removeAt(e);\n\n            e--;\n          }\n        }\n\n        if (this.an._inner[d].transactions.count == 0) {\n          this.an.removeAt(d);\n          d--;\n        }\n      }\n    } else {\n      if (this.aj != null) {\n        this.ai = new Dictionary$2(Base.$, TransactionState.$, 2, this.aj);\n      } else {\n        this.ai = new Dictionary$2(Base.$, TransactionState.$, 0);\n      }\n\n      this.am.clear();\n      this.an.clear();\n    }\n\n    this.al.clear();\n\n    _super.prototype.w.call(this, a, b);\n  };\n\n  TransactionService.prototype.g = function (a) {\n    var b = this.m ? this.o : this.ai;\n\n    if (b.count > 0 && b.containsKey(a)) {\n      return b.item(a);\n    }\n\n    return null;\n  };\n\n  TransactionService.prototype.ah = function (a) {\n    return _super.prototype.g.call(this, a);\n  };\n\n  TransactionService.prototype.ag = function (a) {\n    for (var b = this.ak.count - 1; b >= 0; b--) {\n      if (this.ak._inner[b].b.containsKey(a)) {\n        return this.ak._inner[b].b.item(a);\n      }\n    }\n\n    return null;\n  };\n\n  TransactionService.prototype.y = function (a) {\n    this.m = false;\n\n    if (a) {\n      var b = new TransactionHistory();\n\n      for (var c = 0; c < this.q.count; c++) {\n        var d = this.q._inner[c];\n        var e = this.o.item(d.id);\n        this.am.add(d);\n        this.af(this.ai, d);\n        b.transactions.add(d);\n      }\n\n      this.an.insert(0, b);\n      this.al.clear();\n    }\n\n    _super.prototype.y.call(this, a);\n  };\n\n  TransactionService.prototype.ap = function (a) {\n    for (var b = 0; b < this.q.count; b++) {\n      var c = this.q._inner[b];\n\n      if (c.transactionID == a) {\n        this.am.add(c);\n        this.af(this.ai, c);\n        this.q.removeAt(b);\n        this.o.clear();\n\n        for (var d = 0; d < this.q.count; d++) {\n          this.af(this.o, this.q._inner[d]);\n        }\n\n        var e = new TransactionHistory();\n        e.transactions.add(c);\n        this.an.insert(0, e);\n        this.al.clear();\n        break;\n      }\n    }\n  };\n\n  TransactionService.prototype.s = function (a, b) {\n    var c = -1;\n\n    if (this.ai.count > 0) {\n      var d = new TransactionCommit();\n      d.id = TransactionService.ao++;\n      d.a = this.a(-1);\n      d.b = this.ai;\n      d.d = -1;\n\n      if (a) {\n        d.d = this.ak.count;\n        this.ak.add(d);\n      } else {\n        this.aa(5, d);\n      }\n\n      c = d.id;\n    }\n\n    this.w(b, null);\n    return c;\n  };\n\n  TransactionService.prototype.u = function (a) {\n    var b = this.e(a);\n\n    if (b != null) {\n      this.aa(5, b);\n      this.ak.removeAt(b.d);\n    }\n  };\n\n  TransactionService.prototype.ac = function (a) {\n    var b = this.e(a);\n\n    if (b != null) {\n      this.ak.removeAt(b.d);\n    }\n  };\n\n  TransactionService.prototype.ae = function () {\n    if (this.k) {\n      var a = this.an._inner[0];\n      this.an.removeAt(0);\n      var b = this.am.count - a.transactions.count;\n      this.am.v(b, a.transactions.count);\n      this.al.insert(0, a);\n      this.ai.clear();\n\n      for (var c = 0; c < this.an.count; c++) {\n        for (var d = 0; d < this.an._inner[c].transactions.count; d++) {\n          this.af(this.ai, this.an._inner[c].transactions._inner[d]);\n        }\n      }\n\n      this.aa(0, a);\n    }\n  };\n\n  TransactionService.prototype.ab = function () {\n    if (this.j) {\n      var a = this.al._inner[0];\n      this.al.removeAt(0);\n\n      for (var b = 0; b < a.transactions.count; b++) {\n        this.af(this.ai, a.transactions._inner[b]);\n        this.am.add(a.transactions._inner[b]);\n      }\n\n      this.an.insert(0, a);\n      this.aa(1, a);\n    }\n  };\n\n  TransactionService.prototype.a = function (a) {\n    var e_1, _a, e_2, _b;\n\n    if (a === void 0) {\n      a = -1;\n    }\n\n    var b = new List$1(TransactionState.$, 0);\n\n    if (a > -1) {\n      var c = this.e(a);\n\n      if (c != null) {\n        try {\n          for (var _c = __values(fromEnum(c.b.values)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var d = _d.value;\n            b.add(d);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    } else {\n      try {\n        for (var _e = __values(fromEnum(this.ai.values)), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var e = _f.value;\n          b.add(e);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    return b.toArray();\n  };\n\n  TransactionService.prototype.e = function (a) {\n    for (var b = 0; b < this.ak.count; b++) {\n      if (this.ak._inner[b].id == a) {\n        return this.ak._inner[b];\n      }\n    }\n\n    return null;\n  };\n\n  TransactionService.prototype.c = function (a) {\n    if (a === void 0) {\n      a = null;\n    }\n\n    if (a != null) {\n      var b = new List$1(Transaction.$, 0);\n\n      for (var c = 0; c < this.q.count; c++) {\n        if (this.q._inner[c].id == a || this.aj.equalsC(this.q._inner[c].id, a)) {\n          b.add(this.q._inner[c]);\n        }\n      }\n\n      return b.toArray();\n    }\n\n    return this.q.toArray();\n  };\n\n  TransactionService.$t = markType(TransactionService, 'TransactionService', BaseTransactionService.$);\n  TransactionService.ao = 0;\n  return TransactionService;\n}(BaseTransactionService);\n\nexport { TransactionService };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/TransactionService.js"],"names":["__extends","__values","BaseTransactionService","List$1","TransactionHistory","Base","fromEnum","markType","Transaction","TransactionCommit","Dictionary$2","TransactionState","TransactionType","InvalidOperationException","TransactionService","_super","a","b","c","_this","call","am","$","ak","ai","an","al","aj","prototype","get_l","set_l","get_k","count","get_j","af","containsKey","id","item","type","Delete","transactionType","removeItem","value","h","addItem","r","aq","z","w","v","m","o","d","q","add","transactionID","ao","e","transactions","insert","clear","aa","_inner","removeAt","g","ah","ag","y","ap","s","u","ac","ae","k","ab","j","e_1","_a","e_2","_b","_c","values","_d","next","done","e_1_1","error","return","_e","_f","e_2_1","toArray","equalsC","$t"],"mappings":"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","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends, __values } from \"tslib\";\nimport { BaseTransactionService } from \"./BaseTransactionService\";\nimport { List$1 } from \"./List$1\";\nimport { TransactionHistory } from \"./TransactionHistory\";\nimport { Base, fromEnum, markType } from \"./type\";\nimport { Transaction } from \"./Transaction\";\nimport { TransactionCommit } from \"./TransactionCommit\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { TransactionState } from \"./TransactionState\";\nimport { TransactionType } from \"./TransactionType\";\nimport { InvalidOperationException } from \"./InvalidOperationException\";\n/**\n * @hidden\n */\nvar TransactionService = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(TransactionService, _super);\n    function TransactionService(a, b, c) {\n        var _this = _super.call(this, a, b, c) || this;\n        _this.am = new List$1(Transaction.$, 0);\n        _this.ak = new List$1(TransactionCommit.$, 0);\n        _this.ai = null;\n        _this.an = new List$1(TransactionHistory.$, 0);\n        _this.al = new List$1(TransactionHistory.$, 0);\n        _this.aj = null;\n        _this.aj = c;\n        if (_this.aj != null) {\n            _this.ai = new Dictionary$2(Base.$, TransactionState.$, 2, _this.aj);\n        }\n        else {\n            _this.ai = new Dictionary$2(Base.$, TransactionState.$, 0);\n        }\n        return _this;\n    }\n    TransactionService.prototype.get_l = function () {\n        return true;\n    };\n    TransactionService.prototype.set_l = function (a) {\n        _super.prototype.set_l.call(this, a);\n    };\n    TransactionService.prototype.get_k = function () {\n        return this.an.count > 0;\n    };\n    TransactionService.prototype.get_j = function () {\n        return this.al.count > 0;\n    };\n    TransactionService.prototype.af = function (a, b) {\n        var c = null;\n        if (a.containsKey(b.id)) {\n            c = a.item(b.id);\n        }\n        if (c != null) {\n            switch (b.type) {\n                case TransactionType.Delete:\n                    if (c.transactionType == 0) {\n                        a.removeItem(b.id);\n                    }\n                    else if (c.transactionType == 1) {\n                        c.value = null;\n                        c.transactionType = TransactionType.Delete;\n                    }\n                    break;\n                case 1:\n                    if (c.transactionType == 0 || c.transactionType == 1) {\n                        this.h(c.value, b.value);\n                    }\n                    break;\n            }\n        }\n        else {\n            a.addItem(b.id, new TransactionState(b.id, b.type, this.r(b.value)));\n        }\n    };\n    TransactionService.prototype.aq = function (a, b) {\n        var c = null;\n        if (a.containsKey(b.id)) {\n            c = a.item(b.id);\n        }\n        switch (b.type) {\n            case 0:\n                if (c != null) {\n                    throw new InvalidOperationException(1, \"Cannot add this transaction. A transaction with this ID already exists.\");\n                }\n                break;\n            case 1:\n            case TransactionType.Delete:\n                if (c != null && c.transactionType == TransactionType.Delete) {\n                    throw new InvalidOperationException(1, \"Cannot add this transaction. A transaction with this ID has already been deleted.\");\n                }\n                break;\n        }\n    };\n    TransactionService.prototype.z = function (a, b, c) {\n        _super.prototype.z.call(this, a, b, c);\n        switch (a) {\n            case \"IsEnabled\":\n                this.w(true, null);\n                break;\n        }\n    };\n    TransactionService.prototype.v = function (a, b) {\n        if (b === void 0) {\n            b = false;\n        }\n        var c = (this.m || b) ? this.o : this.ai;\n        var d = (this.m || b) ? this.q : this.am;\n        this.aq(c, a);\n        this.af(c, a);\n        d.add(a);\n        a.transactionID = TransactionService.ao++;\n        if (!this.m && !b) {\n            var e = new TransactionHistory();\n            e.transactions.add(a);\n            this.an.insert(0, e);\n            this.al.clear();\n            this.aa(3, e);\n        }\n    };\n    TransactionService.prototype.w = function (a, b) {\n        if (b === void 0) {\n            b = null;\n        }\n        if (b != null) {\n            for (var c = 0; c < this.am.count; c++) {\n                if (this.am._inner[c].id == b) {\n                    this.am.removeAt(c);\n                    c--;\n                }\n            }\n            this.ai.removeItem(b);\n            for (var d = 0; d < this.an.count; d++) {\n                for (var e = 0; e < this.an._inner[d].transactions.count; e++) {\n                    if (this.an._inner[d].transactions._inner[e].id == b) {\n                        this.an._inner[d].transactions.removeAt(e);\n                        e--;\n                    }\n                }\n                if (this.an._inner[d].transactions.count == 0) {\n                    this.an.removeAt(d);\n                    d--;\n                }\n            }\n        }\n        else {\n            if (this.aj != null) {\n                this.ai = new Dictionary$2(Base.$, TransactionState.$, 2, this.aj);\n            }\n            else {\n                this.ai = new Dictionary$2(Base.$, TransactionState.$, 0);\n            }\n            this.am.clear();\n            this.an.clear();\n        }\n        this.al.clear();\n        _super.prototype.w.call(this, a, b);\n    };\n    TransactionService.prototype.g = function (a) {\n        var b = this.m ? this.o : this.ai;\n        if (b.count > 0 && b.containsKey(a)) {\n            return b.item(a);\n        }\n        return null;\n    };\n    TransactionService.prototype.ah = function (a) {\n        return _super.prototype.g.call(this, a);\n    };\n    TransactionService.prototype.ag = function (a) {\n        for (var b = this.ak.count - 1; b >= 0; b--) {\n            if (this.ak._inner[b].b.containsKey(a)) {\n                return this.ak._inner[b].b.item(a);\n            }\n        }\n        return null;\n    };\n    TransactionService.prototype.y = function (a) {\n        this.m = false;\n        if (a) {\n            var b = new TransactionHistory();\n            for (var c = 0; c < this.q.count; c++) {\n                var d = this.q._inner[c];\n                var e = this.o.item(d.id);\n                this.am.add(d);\n                this.af(this.ai, d);\n                b.transactions.add(d);\n            }\n            this.an.insert(0, b);\n            this.al.clear();\n        }\n        _super.prototype.y.call(this, a);\n    };\n    TransactionService.prototype.ap = function (a) {\n        for (var b = 0; b < this.q.count; b++) {\n            var c = this.q._inner[b];\n            if (c.transactionID == a) {\n                this.am.add(c);\n                this.af(this.ai, c);\n                this.q.removeAt(b);\n                this.o.clear();\n                for (var d = 0; d < this.q.count; d++) {\n                    this.af(this.o, this.q._inner[d]);\n                }\n                var e = new TransactionHistory();\n                e.transactions.add(c);\n                this.an.insert(0, e);\n                this.al.clear();\n                break;\n            }\n        }\n    };\n    TransactionService.prototype.s = function (a, b) {\n        var c = -1;\n        if (this.ai.count > 0) {\n            var d = new TransactionCommit();\n            d.id = TransactionService.ao++;\n            d.a = this.a(-1);\n            d.b = this.ai;\n            d.d = -1;\n            if (a) {\n                d.d = this.ak.count;\n                this.ak.add(d);\n            }\n            else {\n                this.aa(5, d);\n            }\n            c = d.id;\n        }\n        this.w(b, null);\n        return c;\n    };\n    TransactionService.prototype.u = function (a) {\n        var b = this.e(a);\n        if (b != null) {\n            this.aa(5, b);\n            this.ak.removeAt(b.d);\n        }\n    };\n    TransactionService.prototype.ac = function (a) {\n        var b = this.e(a);\n        if (b != null) {\n            this.ak.removeAt(b.d);\n        }\n    };\n    TransactionService.prototype.ae = function () {\n        if (this.k) {\n            var a = this.an._inner[0];\n            this.an.removeAt(0);\n            var b = this.am.count - a.transactions.count;\n            this.am.v(b, a.transactions.count);\n            this.al.insert(0, a);\n            this.ai.clear();\n            for (var c = 0; c < this.an.count; c++) {\n                for (var d = 0; d < this.an._inner[c].transactions.count; d++) {\n                    this.af(this.ai, this.an._inner[c].transactions._inner[d]);\n                }\n            }\n            this.aa(0, a);\n        }\n    };\n    TransactionService.prototype.ab = function () {\n        if (this.j) {\n            var a = this.al._inner[0];\n            this.al.removeAt(0);\n            for (var b = 0; b < a.transactions.count; b++) {\n                this.af(this.ai, a.transactions._inner[b]);\n                this.am.add(a.transactions._inner[b]);\n            }\n            this.an.insert(0, a);\n            this.aa(1, a);\n        }\n    };\n    TransactionService.prototype.a = function (a) {\n        var e_1, _a, e_2, _b;\n        if (a === void 0) {\n            a = -1;\n        }\n        var b = new List$1(TransactionState.$, 0);\n        if (a > -1) {\n            var c = this.e(a);\n            if (c != null) {\n                try {\n                    for (var _c = __values(fromEnum(c.b.values)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var d = _d.value;\n                        b.add(d);\n                    }\n                }\n                catch (e_1_1) {\n                    e_1 = { error: e_1_1 };\n                }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_a = _c.return))\n                            _a.call(_c);\n                    }\n                    finally {\n                        if (e_1)\n                            throw e_1.error;\n                    }\n                }\n            }\n        }\n        else {\n            try {\n                for (var _e = __values(fromEnum(this.ai.values)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var e = _f.value;\n                    b.add(e);\n                }\n            }\n            catch (e_2_1) {\n                e_2 = { error: e_2_1 };\n            }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return))\n                        _b.call(_e);\n                }\n                finally {\n                    if (e_2)\n                        throw e_2.error;\n                }\n            }\n        }\n        return b.toArray();\n    };\n    TransactionService.prototype.e = function (a) {\n        for (var b = 0; b < this.ak.count; b++) {\n            if (this.ak._inner[b].id == a) {\n                return this.ak._inner[b];\n            }\n        }\n        return null;\n    };\n    TransactionService.prototype.c = function (a) {\n        if (a === void 0) {\n            a = null;\n        }\n        if (a != null) {\n            var b = new List$1(Transaction.$, 0);\n            for (var c = 0; c < this.q.count; c++) {\n                if (this.q._inner[c].id == a || this.aj.equalsC(this.q._inner[c].id, a)) {\n                    b.add(this.q._inner[c]);\n                }\n            }\n            return b.toArray();\n        }\n        return this.q.toArray();\n    };\n    TransactionService.$t = markType(TransactionService, 'TransactionService', BaseTransactionService.$);\n    TransactionService.ao = 0;\n    return TransactionService;\n}(BaseTransactionService));\nexport { TransactionService };\n"]},"metadata":{},"sourceType":"module"}