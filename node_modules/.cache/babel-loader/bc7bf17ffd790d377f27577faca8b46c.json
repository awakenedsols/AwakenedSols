{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Delegate_$type, markType, typeCast, INotifyPropertyChanged_$type, PropertyChangedEventArgs, EventArgs, Point_$type, markDep } from \"./type\";\nimport { ISchedulableRender_$type } from \"./ISchedulableRender\";\nimport { List$1 } from \"./List$1\";\nimport { Image } from \"./Image\";\nimport { RenderingContext } from \"./RenderingContext\";\nimport { StackPool$1 } from \"./StackPool$1\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { Tile } from \"./Tile\";\nimport { Rect } from \"./Rect\";\nimport { CanvasRenderScheduler } from \"./CanvasRenderScheduler\";\nimport { WriteableBitmap } from \"./WriteableBitmap\";\nimport { Uri } from \"./Uri\";\nimport { CancellingMultiScaleImageEventArgs } from \"./CancellingMultiScaleImageEventArgs\";\nimport { DownloadingMultiScaleImageEventArgs } from \"./DownloadingMultiScaleImageEventArgs\";\nimport { CanvasViewRenderer } from \"./CanvasViewRenderer\";\nimport { truncate, intDivide, logBase } from \"./number\";\nimport { DependencyObject } from \"./DependencyObject\";\nimport { Control } from \"./Control\";\nimport { DependencyProperty } from \"./DependencyProperty\";\nimport { IEasingFunction_$type } from \"./IEasingFunction\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { TilePositionComparer } from \"./TilePositionComparer\";\nimport { Convert } from \"./Convert\";\nimport { MathUtil } from \"./MathUtil\";\nimport { PropertyMetadata } from \"./PropertyMetadata\";\nimport { stringIsNullOrEmpty } from \"./string\";\nimport { dateNow } from \"./date\";\n/**\n * @hidden\n */\n\nvar XamMultiScaleImageView =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleImageView, _super);\n\n  function XamMultiScaleImageView(a) {\n    var _this = _super.call(this) || this;\n\n    _this.b = null;\n    _this.h = null;\n    _this.g = new Dictionary$2(Base.$, List$1.$.specialize(Delegate_$type), 0);\n    _this.j = new List$1(Tile.$, 0);\n    _this.i = new List$1(Tile.$, 0);\n    _this.p = -1;\n    _this.o = -1;\n    _this.k = null;\n    _this.m = null;\n    _this.c = null;\n    _this._isDirty = false;\n    _this.au = Rect.empty;\n    _this.l = null;\n    _this.b = a;\n\n    _this.b.ag.l(_this);\n\n    _this.h = new List$1(Image.$, 0);\n\n    _this.b.ap = function () {\n      var $ret = new StackPool$1(Image.$);\n      $ret.j = runOn(_this, _this.at);\n      $ret.b = runOn(_this, _this.y);\n      $ret.c = runOn(_this, _this.aa);\n      $ret.d = runOn(_this, _this.z);\n      return $ret;\n    }();\n\n    for (var b = 0; b < 4; ++b) {\n      _this.i.add(null);\n    }\n\n    return _this;\n  }\n\n  XamMultiScaleImageView.prototype.at = function () {\n    return new Image();\n  };\n\n  XamMultiScaleImageView.prototype.y = function (a) {\n    this.h.add(a);\n  };\n\n  XamMultiScaleImageView.prototype.aa = function (a) {\n    this.h.remove(a);\n  };\n\n  XamMultiScaleImageView.prototype.z = function (a) {};\n\n  XamMultiScaleImageView.prototype.ao = function (a, b, c) {\n    a.n = b;\n    a.o = c;\n  };\n\n  XamMultiScaleImageView.prototype.r = function (a) {\n    var _loop_1 = function (b) {\n      if (a == this_1.i._inner[b]) {\n        if (a.i != null && a.i.ac != null) {\n          var c = a.i.ac;\n          var d_1 = c.c;\n          var e_1 = this_1.b.ao.w(a.f + 8, a.d, a.e);\n\n          if (e_1 != null) {\n            var f = function () {\n              var $ret = new CancellingMultiScaleImageEventArgs();\n              $ret.uri = e_1.value;\n              $ret.image = d_1;\n              return $ret;\n            }();\n\n            this_1.b.bu(f);\n          }\n\n          if (this_1.g.containsKey(d_1)) {\n            var g = this_1.g.item(d_1);\n\n            for (var h = 0; h < g.count; h++) {\n              g._inner[h]();\n            }\n\n            g.clear();\n            this_1.g.removeItem(d_1);\n          }\n        }\n\n        this_1.i._inner[b] = null;\n        this_1.q();\n        return {\n          value: void 0\n        };\n      }\n    };\n\n    var this_1 = this;\n\n    for (var b = 0; b < this.i.count; ++b) {\n      var state_1 = _loop_1(b);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    for (var i = 0; i < this.j.count; ++i) {\n      if (this.j._inner[i] == a) {\n        this.j.removeAt(i);\n        break;\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.u = function (a) {\n    this.j.add(a);\n    this.j.aa(function (b, c) {\n      var d = 0;\n      var e = 0;\n\n      if (b.h != null) {\n        d = b.h.ac.b;\n      }\n\n      if (c.h != null) {\n        e = c.h.ac.b;\n      }\n\n      if (d < e) {\n        return -1;\n      } else if (d > e) {\n        return 1;\n      }\n\n      return 0;\n    });\n    this.q();\n  };\n\n  XamMultiScaleImageView.prototype.q = function () {\n    var _this = this;\n\n    var index_ = -1;\n\n    if (this.l == null) {\n      return;\n    }\n\n    if (this.j.count > 0) {\n      for (var a = 0; a < this.i.count; ++a) {\n        if (this.i._inner[a] == null) {\n          index_ = a;\n          break;\n        }\n      }\n    }\n\n    if (index_ >= 0) {\n      this.i._inner[index_] = this.j._inner[0];\n      var b = new WriteableBitmap(this.b.ao.r, this.b.ao.p);\n      this.i._inner[index_].i.ac = b;\n      var ele_ = this.l.createElement(\"img\");\n      var c_1 = ele_.getNativeElement();\n      b.c = c_1;\n      var self_ = this;\n      var d = new List$1(Delegate_$type, 0);\n      this.g.addItem(c_1, d);\n      d.add(ele_.listen(\"load\", function (e) {\n        return _this.ab(e, index_);\n      }));\n      d.add(ele_.listen(\"readystatechange\", function (e) {\n        return _this.ab(e, index_);\n      }));\n      d.add(ele_.listen(\"error\", function (e) {\n        return _this.ac(e, index_);\n      }));\n      this.j.removeAt(0);\n      var e = this.b.ao.w(this.i._inner[index_].f + 8, this.i._inner[index_].d, this.i._inner[index_].e);\n\n      if (e == null) {\n        return;\n      }\n\n      var f_1 = e.value;\n\n      var g = function () {\n        var $ret = new DownloadingMultiScaleImageEventArgs();\n        $ret.uri = f_1;\n        $ret.image = c_1;\n        return $ret;\n      }();\n\n      this.b.bv(g);\n      f_1 = g.uri;\n\n      if (f_1 != null) {\n        c_1.src = f_1;\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ab = function (a, b) {\n    var e_ = a.originalEvent;\n    var img_ = e_.target;\n    var c = img_.complete || img_.readyState == 'complete' && e_.type == 'readystatechange';\n\n    if (c) {\n      this.downloadCompleted(a, b);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ac = function (a, b) {\n    this.downloadError(a, b);\n  };\n\n  XamMultiScaleImageView.prototype.downloadError = function (a, b) {\n    var c = this.i._inner[b];\n    this.i._inner[b] = null;\n\n    if (c != null && c.i != null && c.i.ac != null) {\n      var e_ = a.originalEvent;\n      var d = e_.target;\n\n      if (this.g.containsKey(d)) {\n        var e = this.g.item(d);\n\n        for (var f = 0; f < e.count; f++) {\n          e._inner[f]();\n        }\n\n        e.clear();\n        this.g.removeItem(d);\n      }\n    }\n\n    this.q();\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.downloadCompleted = function (a, b) {\n    var c = this.i._inner[b];\n    var d = true;\n\n    if (c != null && c.i != null && c.i.ac != null) {\n      d = false;\n      var ele_ = c.i.ac.c;\n\n      if (!ele_.complete) {\n        d = true;\n      }\n\n      if (ele_.width == 0 && ele_.height == 0) {\n        d = true;\n      }\n    }\n\n    this.i._inner[b] = null;\n\n    if (d) {\n      this.q();\n      this.ad();\n      return;\n    }\n\n    var e_ = a.originalEvent;\n    var e = e_.target;\n\n    if (this.g.containsKey(e)) {\n      var f = this.g.item(e);\n\n      for (var g = 0; g < f.count; g++) {\n        f._inner[g]();\n      }\n\n      f.clear();\n      this.g.removeItem(e);\n    }\n\n    this.b.bo(c, c.i.ac);\n\n    if (c.i != null) {\n      this.b.ca(c);\n    }\n\n    this.q();\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.a = function (a, b, c, d) {\n    var e = new WriteableBitmap(a, a);\n    e.c = b.c;\n\n    if (!b.d.isEmpty) {\n      c += truncate(Math.round(b.d.left));\n      d += truncate(Math.round(b.d.top));\n    }\n\n    e.d = new Rect(0, c, d, a, a);\n    return e;\n  };\n\n  XamMultiScaleImageView.prototype.am = function (a) {\n    a.s = 0;\n  };\n\n  XamMultiScaleImageView.prototype.an = function (a) {\n    a.s = 1;\n  };\n\n  XamMultiScaleImageView.prototype.f = function () {\n    return true;\n  };\n\n  XamMultiScaleImageView.prototype.s = function (a) {\n    if (this.b.al != null) {\n      this.b.al.deferredRefresh();\n    } else {\n      if (this.k != null) {\n        this.k.setTimeout(a, 0);\n      } else {\n        window.setTimeout(a, 0);\n      }\n    }\n  };\n\n  XamMultiScaleImageView.prototype.aq = function () {\n    if (this.p == -1) {\n      this.p = window.setInterval(runOn(this.b, this.b.b9), 50);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.as = function () {\n    if (this.p != -1) {\n      window.clearInterval(this.p);\n      this.p = -1;\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ap = function () {\n    if (this.o == -1) {\n      this.o = window.setInterval(runOn(this.b, this.b.br), 50);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ar = function () {\n    if (this.o != -1) {\n      window.clearInterval(this.o);\n      this.o = -1;\n    }\n  };\n\n  XamMultiScaleImageView.prototype.t = function () {\n    if (this.p != -1) {\n      this.ar();\n      this.b.by();\n    }\n  };\n\n  XamMultiScaleImageView.prototype.ae = function (a) {\n    this.k = a;\n    this.k.rootWrapper.setStyleProperty(\"position\", \"relative\");\n    this.m = this.k.createElement(\"canvas\");\n    this.m.setStyleProperty(\"position\", \"absolute\");\n    this.m.setStyleProperty(\"top\", \"0px\");\n    this.m.setStyleProperty(\"left\", \"0px\");\n    this.k.append(this.m);\n    this.c = new RenderingContext(new CanvasViewRenderer(), this.k.get2DCanvasContext(this.m));\n    this.af(this.k.rootWrapper.width(), this.k.rootWrapper.height());\n  };\n\n  XamMultiScaleImageView.prototype.af = function (a, b) {\n    this.m.setAttribute(\"width\", truncate(a * this.b.a4).toString());\n    this.m.setAttribute(\"height\", truncate(b * this.b.a4).toString());\n    this.m.setStyleProperty(\"width\", a.toString() + \"px\");\n    this.m.setStyleProperty(\"height\", b.toString() + \"px\");\n    this.b.cn = new Rect(0, 0, 0, a, b);\n    this.b.b5();\n  };\n\n  XamMultiScaleImageView.prototype.aj = function () {\n    this.ad();\n  };\n\n  Object.defineProperty(XamMultiScaleImageView.prototype, \"index\", {\n    get: function () {\n      return 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImageView.prototype.postRender = function () {};\n\n  Object.defineProperty(XamMultiScaleImageView.prototype, \"isDirty\", {\n    get: function () {\n      return this._isDirty;\n    },\n    set: function (a) {\n      this._isDirty = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImageView.prototype.ad = function () {\n    if (this.c == null) {\n      return;\n    }\n\n    if (!this.isDirty) {\n      this.isDirty = true;\n      this.b.ag.n();\n    }\n  };\n\n  XamMultiScaleImageView.prototype.undirty = function (a) {\n    this.isDirty = false;\n    this.ak();\n  };\n\n  XamMultiScaleImageView.prototype.ak = function () {\n    if (this.c == null) {\n      return;\n    }\n\n    if (this.c.d && this.b.a4 != 1) {\n      this.c.z();\n      this.c.aa(this.b.a4, this.b.a4);\n    }\n\n    if (!this.au.isEmpty) {\n      this.c.k(this.au.left, this.au.top, this.au.width, this.au.height);\n    }\n\n    this.au = this.b.cn;\n\n    for (var a = 0; a < this.h.count; a++) {\n      var b = this.h._inner[a];\n\n      if (b.s == 0) {\n        this.al(b);\n      }\n    }\n\n    for (var c = 0; c < this.h.count; c++) {\n      var d = this.h._inner[c];\n\n      if (d.s == 1) {\n        this.al(d);\n      }\n    }\n\n    if (this.c.d && this.b.a4 != 1) {\n      this.c.y();\n    }\n\n    this.b.bt();\n    this.b.bw();\n  };\n\n  XamMultiScaleImageView.prototype.d = function () {\n    var a = true;\n\n    for (var b = 0; b < this.i.count; b++) {\n      if (this.i._inner[b] != null) {\n        a = false;\n      }\n    }\n\n    return a;\n  };\n\n  XamMultiScaleImageView.prototype.al = function (a) {\n    if (this.c == null) {\n      return;\n    }\n\n    var b = a.ac;\n    var c = a._opacity * this.b._opacity;\n\n    if (b == null || b.c == null) {\n      return;\n    }\n\n    if (this.e(b.c)) {\n      return;\n    }\n\n    if (!b.d.isEmpty) {\n      if (b.d.width < 1 || b.d.height < 1) {\n        return;\n      }\n\n      this.c.n(b.c, c, b.d.left, b.d.top, b.d.width, b.d.height, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n    } else {\n      this.c.m(b.c, c, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n    }\n  };\n\n  XamMultiScaleImageView.prototype.e = function (a) {\n    var img_ = a;\n\n    if (!img_.complete) {\n      return true;\n    }\n\n    if (img_.width == 0 && img_.height == 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  XamMultiScaleImageView.prototype.x = function () {\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.ag = function (a) {\n    this.c = a;\n    this.ad();\n  };\n\n  XamMultiScaleImageView.prototype.ah = function (a) {\n    this.l = a;\n    this.q();\n  };\n\n  XamMultiScaleImageView.prototype.ai = function (a) {\n    this.b.cn = a;\n    this.b.b5();\n  };\n\n  XamMultiScaleImageView.prototype.preRender = function () {};\n\n  XamMultiScaleImageView.prototype.isValid = function () {\n    return true;\n  };\n\n  XamMultiScaleImageView.$t = markType(XamMultiScaleImageView, 'XamMultiScaleImageView', Base.$, [ISchedulableRender_$type]);\n  return XamMultiScaleImageView;\n}(Base);\n\nexport { XamMultiScaleImageView };\n/**\n * @hidden\n */\n\nvar XamMultiScaleTileSource =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleTileSource, _super);\n\n  function XamMultiScaleTileSource(a, b, c, d, e) {\n    var _this = _super.call(this) || this;\n\n    _this.t = 0;\n    _this.s = 0;\n    _this.n = 1;\n    _this.l = false;\n    _this.r = 0;\n    _this.p = 0;\n    _this.q = 0;\n    _this.j = null;\n    _this.t = a;\n    _this.s = b;\n    _this.r = c;\n    _this.p = d;\n    _this.q = e;\n    return _this;\n  }\n\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"v\", {\n    get: function () {\n      return this.t;\n    },\n    set: function (a) {\n      this.t = a;\n      this.y(0, 0, 0, 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"u\", {\n    get: function () {\n      return this.s;\n    },\n    set: function (a) {\n      this.s = a;\n      this.y(0, 0, 0, 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"o\", {\n    get: function () {\n      return this.n;\n    },\n    set: function (a) {\n      this.n = a;\n\n      if (this.k != null) {\n        this.k._opacity = this.n;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"m\", {\n    get: function () {\n      return this.l;\n    },\n    set: function (a) {\n      this.l = a;\n\n      if (this.k != null) {\n        this.k.av = this.l;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(XamMultiScaleTileSource.prototype, \"k\", {\n    get: function () {\n      return this.j;\n    },\n    set: function (a) {\n      this.j = a;\n\n      if (this.j != null) {\n        this.j._opacity = this.o;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleTileSource.prototype.w = function (a, b, c) {\n    var d = new List$1(Base.$, 0);\n    this.x(a, b, c, d);\n    var e = null;\n\n    if (d.count > 0) {\n      e = typeCast(Uri.$, d._inner[0]);\n    }\n\n    return e;\n  };\n\n  XamMultiScaleTileSource.prototype.y = function (a, b, c, d) {\n    if (this.k != null) {\n      this.k.bs(a, b, c, d);\n    }\n  };\n\n  XamMultiScaleTileSource.$t = markType(XamMultiScaleTileSource, 'XamMultiScaleTileSource', DependencyObject.$);\n  return XamMultiScaleTileSource;\n}(DependencyObject);\n\nexport { XamMultiScaleTileSource };\n/**\n * @hidden\n */\n\nvar XamMultiScaleImage =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(XamMultiScaleImage, _super);\n\n  function XamMultiScaleImage() {\n    var _this = _super.call(this) || this;\n\n    _this.ap = null;\n    _this.an = null;\n    _this.ak = null;\n    _this.ck = null;\n    _this.a2 = 0;\n    _this.at = false;\n    _this.propertyChanged = null;\n    _this.ba = 0;\n    _this.bb = 0;\n    _this.a0 = new Date();\n    _this.cl = null;\n    _this.a3 = 0;\n    _this.ay = new List$1(Tile.$, 0);\n    _this.aw = false;\n    _this.aq = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, 0x7FFFFFFF, new TilePositionComparer());\n    _this.az = new List$1(Tile.$, 0);\n    _this.imageTilesReady = null;\n    _this.as = false;\n    _this.cn = null;\n    _this.ag = null;\n    _this.imagesChanged = null;\n    _this.downloadingImage = null;\n    _this.cancellingImage = null;\n    _this.a1 = 1;\n    _this.cn = Rect.empty;\n    _this.ag = new CanvasRenderScheduler();\n    _this.an = new XamMultiScaleImageView(_this);\n    _this.ab = XamMultiScaleImage.$;\n    _this.ck = _this.cm;\n    _this.a2 = _this.a5;\n    return _this;\n  }\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"al\", {\n    get: function () {\n      return this.ak;\n    },\n    set: function (a) {\n      if (this.ak != null) {\n        this.ak.unRegister(this);\n      }\n\n      this.ak = a;\n\n      if (this.ak != null) {\n        this.ak.register(this, runOn(this, this.b6));\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.bc = function () {\n    if (!stringIsNullOrEmpty(this.bf)) {\n      return this.bf;\n    }\n\n    return null;\n  };\n\n  XamMultiScaleImage.prototype.bd = function () {\n    if (!stringIsNullOrEmpty(this.bj)) {\n      return this.bj;\n    }\n\n    return null;\n  };\n\n  XamMultiScaleImage.prototype.bx = function (a, b, c) {\n    var d = new PropertyChangedEventArgs(a);\n\n    if (this.propertyChanged != null) {\n      this.propertyChanged(this, d);\n    }\n\n    switch (a) {\n      case XamMultiScaleImage.$$p[2]:\n        if (this.ao != null) {\n          this.ao.k = this;\n        }\n\n        this.b4();\n        this.b7();\n        this.b5();\n        break;\n\n      case XamMultiScaleImage.$$p[6]:\n        this.b8();\n        break;\n\n      case XamMultiScaleImage.$$p[7]:\n        this.b8();\n        break;\n\n      case XamMultiScaleImage.$$p[5]:\n        if (!this.ax) {\n          this.an.t();\n        }\n\n        break;\n\n      case XamMultiScaleImage.$$p[0]:\n        this.at = this.av;\n        this.b5();\n        break;\n    }\n  };\n\n  XamMultiScaleImage.prototype.v = function () {\n    _super.prototype.v.call(this);\n\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b7 = function () {\n    this.cb();\n\n    if (this.ao != null) {\n      this.ba = Convert.toInt32(logBase(this.ao.r, 2));\n      this.bb = Convert.toInt32(logBase(this.ao.v, 2));\n    }\n  };\n\n  XamMultiScaleImage.prototype.bs = function (a, b, c, d) {\n    this.b4();\n    this.b7();\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b8 = function () {\n    if (this.ax) {\n      this.a0 = dateNow();\n      this.cl = this.ck;\n      this.a3 = this.a2;\n      this.an.aq();\n    } else {\n      this.ck = this.cm;\n      this.a2 = this.a5;\n      this.b5();\n    }\n  };\n\n  XamMultiScaleImage.prototype.b9 = function () {\n    var a = 2;\n    var b = dateNow().getTime() - this.a0.getTime();\n    var c = b / 1000;\n    var d = MathUtil.c(c / a, 0, 1);\n    var e = this.aj != null ? this.aj.ease(d) : d;\n    var f = 1 - e;\n    this.a2 = this.a3 * f + this.a5 * e;\n    this.ck = {\n      $type: Point_$type,\n      x: this.cl.x * f + this.cm.x * e,\n      y: this.cl.y * f + this.cm.y * e\n    };\n\n    if (d >= 1) {\n      this.an.as();\n    } else {}\n\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.a8 = function (a, b, c, d) {\n    for (var e = 0; e < this.ay.count; ++e) {\n      if (this.ay._inner[e].c == a && this.ay._inner[e].d == b && this.ay._inner[e].e == c && this.ay._inner[e].f == d) {\n        return e;\n      }\n    }\n\n    return -1;\n  };\n\n  XamMultiScaleImage.prototype.b6 = function (a) {\n    var _this = this;\n\n    this.aw = false;\n    this.as = false;\n    var b = this.at;\n\n    if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n      return;\n    }\n\n    var c = truncate(Math.ceil(this.cn.width / this.ao.r));\n    var d = truncate(Math.max(1, Math.floor(-logBase(this.a2 / c, 2))));\n\n    if (d >= this.bb - 8) {\n      d = this.bb - 8 - 1;\n    }\n\n    var e = truncate(Math.round(Math.pow(2, d)));\n    var f = this.a2;\n    var g = this.cn.height * f / this.cn.width;\n    var h = this.ao.v / Math.pow(2, d);\n    var i = this.ao.u / Math.pow(2, d);\n    var j = truncate(Math.floor(this.ck.x * this.ao.v / h));\n    var k = truncate(Math.ceil((this.ck.x + f) * this.ao.v / h));\n    var l = truncate(Math.floor(this.ck.y * this.ao.u / i));\n    var m = truncate(Math.ceil((this.ck.y + g) * this.ao.v / i));\n\n    if (!b) {\n      j = Math.max(j, 0);\n      k = Math.min(k, e);\n    }\n\n    l = Math.max(l, 0);\n    m = Math.min(m, e);\n    var n = (j * h - this.ck.x * this.ao.v) / h;\n    var o = (l * i - this.ck.y * this.ao.u) / i;\n    var p = f * this.ao.v / h * (this.ao.r / this.cn.width);\n    var q = new List$1(Tile.$, 0);\n    var r;\n    var s;\n\n    for (var t = j; t < k; ++t) {\n      r = t;\n      s = t;\n\n      while (s < 0) {\n        s = e + s;\n      }\n\n      while (s > e - 1) {\n        s = s - e;\n      }\n\n      var _loop_2 = function (u) {\n        var v = this_2.a8(r, s, u, d);\n\n        if (v >= 0) {\n          q.add(this_2.ay._inner[v]);\n          this_2.ay.removeAt(v);\n        } else {\n          q.add(function () {\n            var $ret = new Tile();\n            $ret.c = r;\n            $ret.d = s;\n            $ret.e = u;\n            $ret.f = d;\n            return $ret;\n          }());\n        }\n      };\n\n      var this_2 = this;\n\n      for (var u = l; u < m; ++u) {\n        _loop_2(u);\n      }\n    }\n\n    this.ap.f = true;\n    this.cb();\n    this.ay = q;\n\n    var _loop_3 = function (w) {\n      if (this_3.ay._inner[w].i == null) {\n        this_3.ay._inner[w].i = this_3.ap.a();\n        this_3.ay._inner[w].i._opacity = 1;\n        this_3.an.am(this_3.ay._inner[w].i);\n        var x = this_3.am(this_3.ay._inner[w]);\n\n        if (x != null) {\n          this_3.ay._inner[w].i.ac = x;\n        } else {\n          var y = null;\n\n          var z = function () {\n            var $ret = new Tile();\n            $ret.d = _this.ay._inner[w].d;\n            $ret.e = _this.ay._inner[w].e;\n            $ret.f = _this.ay._inner[w].f;\n            return $ret;\n          }();\n\n          while (z.f >= 0 && y == null) {\n            z.d = z.d >> 1;\n            z.e = z.e >> 1;\n            z.f = z.f - 1;\n            y = this_3.am(z);\n          }\n\n          if (y != null) {\n            var aa = truncate(Math.pow(2, this_3.ay._inner[w].f - z.f));\n            var ab = intDivide(256, aa);\n            var ac = ab * (this_3.ay._inner[w].d % aa);\n            var ad = ab * (this_3.ay._inner[w].e % aa);\n            this_3.ay._inner[w].h = this_3.ap.a();\n            this_3.ay._inner[w].h._opacity = 1;\n            this_3.an.an(this_3.ay._inner[w].h);\n            x = this_3.an.a(ab, y, ac, ad);\n            this_3.ay._inner[w].h.ac = x;\n          }\n\n          this_3.an.u(this_3.ay._inner[w]);\n        }\n      }\n\n      var ae = this_3.ao.r / p;\n      var af = this_3.ao.p / p;\n      var ag = (this_3.ay._inner[w].c - j + n) * ae;\n      var ah = (this_3.ay._inner[w].e - l + o) * af;\n      this_3.ay._inner[w].i.width = ae + 0.5;\n      this_3.ay._inner[w].i.height = af + 0.5;\n      this_3.an.ao(this_3.ay._inner[w].i, ag, ah);\n\n      if (this_3.ay._inner[w].h != null) {\n        this_3.ay._inner[w].h.width = ae + 0.5;\n        this_3.ay._inner[w].h.height = af + 0.5;\n        this_3.an.ao(this_3.ay._inner[w].h, ag, ah);\n      }\n    };\n\n    var this_3 = this;\n\n    for (var w = 0; w < this.ay.count; ++w) {\n      _loop_3(w);\n    }\n\n    this.ap.f = false;\n    this.an.aj();\n  };\n\n  XamMultiScaleImage.prototype.b5 = function () {\n    if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n      return;\n    }\n\n    if (this.aw) {\n      return;\n    }\n\n    this.aw = true;\n    this.an.s(runOn(this, this.b6));\n  };\n\n  XamMultiScaleImage.prototype.cb = function () {\n    for (var a = 0; a < this.ay.count; ++a) {\n      this.an.r(this.ay._inner[a]);\n      this.bp(this.ay._inner[a]);\n\n      if (this.ay._inner[a].i != null) {\n        this.ap.n(this.ay._inner[a].i);\n        this.ay._inner[a].i.ac = null;\n        this.ay._inner[a].i = null;\n      }\n    }\n  };\n\n  XamMultiScaleImage.prototype.b4 = function () {\n    this.ar.i();\n  };\n\n  XamMultiScaleImage.prototype.am = function (a) {\n    return this.ar.item(a);\n  };\n\n  XamMultiScaleImage.prototype.bo = function (a, b) {\n    this.ar.item(a, b);\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"ar\", {\n    get: function () {\n      return this.aq;\n    },\n    set: function (a) {\n      this.aq = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.au = function () {\n    return this.az.count != 0;\n  };\n\n  XamMultiScaleImage.prototype.bt = function () {\n    var a = true;\n\n    if (this.au()) {\n      a = false;\n    }\n\n    if (!this.an.d()) {\n      a = false;\n    }\n\n    if (a && !this.as) {\n      if (this.imageTilesReady != null) {\n        this.imageTilesReady(this, new EventArgs());\n      }\n    }\n\n    this.as = a;\n  };\n\n  XamMultiScaleImage.prototype.ca = function (a) {\n    if (a.h != null) {\n      a.b = dateNow();\n      this.az.add(a);\n      this.an.ap();\n    } else {\n      this.bt();\n    }\n  };\n\n  XamMultiScaleImage.prototype.bp = function (a) {\n    if (a.h != null) {\n      this.ap.n(a.h);\n      a.h.ac = null;\n      a.h = null;\n\n      for (var b = 0; b < this.az.count; ++b) {\n        if (this.az._inner[b] == a) {\n          this.az.removeAt(b);\n          break;\n        }\n      }\n\n      if (this.az.count == 0) {\n        this.an.ar();\n      }\n    }\n  };\n\n  XamMultiScaleImage.prototype.br = function () {\n    var a = dateNow();\n    var b = 0.5;\n\n    for (var c = 0; c < this.az.count;) {\n      var d = a.getTime() - this.az._inner[c].b.getTime();\n\n      var e = d / 1000;\n      var f = e / b;\n      f = MathUtil.c(f, 0, 1);\n      this.az._inner[c].h._opacity = 1 - f;\n\n      if (f >= 1) {\n        this.ap.n(this.az._inner[c].h);\n        this.az._inner[c].h.ac = null;\n        this.az._inner[c].h = null;\n        this.az.removeAt(c);\n      } else {\n        ++c;\n      }\n\n      this.an.x();\n    }\n\n    if (this.az.count == 0) {\n      this.an.ar();\n    }\n  };\n\n  XamMultiScaleImage.prototype.by = function () {\n    this.a2 = this.a5;\n    this.ck = this.cm;\n    this.b5();\n  };\n\n  XamMultiScaleImage.prototype.b0 = function (a) {\n    var b = a;\n    this.ag.j(b);\n    this.an.ae(a);\n  };\n\n  XamMultiScaleImage.prototype.b1 = function (a) {\n    this.an.ag(a);\n  };\n\n  XamMultiScaleImage.prototype.b2 = function (a) {\n    this.an.ah(a);\n  };\n\n  XamMultiScaleImage.prototype.b3 = function (a) {\n    this.an.ai(a);\n  };\n\n  XamMultiScaleImage.prototype.bw = function () {\n    if (this.imagesChanged != null) {\n      this.imagesChanged(this, new EventArgs());\n    }\n  };\n\n  XamMultiScaleImage.prototype.bq = function () {\n    this.aw = false;\n  };\n\n  XamMultiScaleImage.prototype.bv = function (a) {\n    if (this.downloadingImage != null) {\n      this.downloadingImage(this, a);\n    }\n  };\n\n  XamMultiScaleImage.prototype.bu = function (a) {\n    if (this.cancellingImage != null) {\n      this.cancellingImage(this, a);\n    }\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"a4\", {\n    get: function () {\n      return this.a1;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  XamMultiScaleImage.prototype.bz = function (a) {\n    this.a1 = a;\n  };\n\n  Object.defineProperty(XamMultiScaleImage.prototype, \"a9\", {\n    get: function () {\n      return this.ar.h;\n    },\n    set: function (a) {\n      var b = a != this.a9;\n\n      if (b) {\n        this.ar = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, a, new TilePositionComparer());\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  XamMultiScaleImage.$t = markType(XamMultiScaleImage, 'XamMultiScaleImage', Control.$, [INotifyPropertyChanged_$type]);\n  XamMultiScaleImage.$$p = markDep(DependencyProperty, PropertyMetadata, XamMultiScaleImage, 'bx', ['IsHorizontalTileWrappingEnabled:av:cc', [0, false], 'Referer:bf:cd', [2, null], 'Source:ao:ce', [XamMultiScaleTileSource.$, null], 'SpringsEasingFunction:aj:cf', [IEasingFunction_$type, null], 'UserAgent:bj:cg', [2, null], 'UseSprings:ax:ch', [0, false], 'ViewportOrigin:cm:ci', [Point_$type, {\n    $type: Point_$type,\n    x: 0,\n    y: 0\n  }], 'ViewportWidth:a5:cj', [1, 1]]);\n  return XamMultiScaleImage;\n}(Control);\n\nexport { XamMultiScaleImage };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/XamMultiScaleImageView_combined.js"],"names":["__extends","Base","runOn","Delegate_$type","markType","typeCast","INotifyPropertyChanged_$type","PropertyChangedEventArgs","EventArgs","Point_$type","markDep","ISchedulableRender_$type","List$1","Image","RenderingContext","StackPool$1","Dictionary$2","Tile","Rect","CanvasRenderScheduler","WriteableBitmap","Uri","CancellingMultiScaleImageEventArgs","DownloadingMultiScaleImageEventArgs","CanvasViewRenderer","truncate","intDivide","logBase","DependencyObject","Control","DependencyProperty","IEasingFunction_$type","LRUCache$2","TilePositionComparer","Convert","MathUtil","PropertyMetadata","stringIsNullOrEmpty","dateNow","XamMultiScaleImageView","_super","a","_this","call","b","h","g","$","specialize","j","i","p","o","k","m","c","_isDirty","au","empty","l","ag","ap","$ret","at","y","aa","d","z","add","prototype","remove","ao","n","r","_loop_1","this_1","_inner","ac","d_1","e_1","w","f","e","uri","value","image","bu","containsKey","item","count","clear","removeItem","q","state_1","removeAt","u","index_","ele_","createElement","c_1","getNativeElement","self_","addItem","listen","ab","f_1","bv","src","e_","originalEvent","img_","target","complete","readyState","type","downloadCompleted","downloadError","ad","width","height","bo","ca","isEmpty","Math","round","left","top","am","s","an","al","deferredRefresh","setTimeout","window","aq","setInterval","b9","as","clearInterval","br","ar","t","by","ae","rootWrapper","setStyleProperty","append","get2DCanvasContext","af","setAttribute","a4","toString","cn","b5","aj","Object","defineProperty","get","enumerable","configurable","postRender","set","isDirty","undirty","ak","bt","bw","_opacity","x","ah","ai","preRender","isValid","$t","XamMultiScaleTileSource","av","bs","XamMultiScaleImage","ck","a2","propertyChanged","ba","bb","a0","Date","cl","a3","ay","aw","az","imageTilesReady","imagesChanged","downloadingImage","cancellingImage","a1","cm","a5","unRegister","register","b6","bc","bf","bd","bj","bx","$$p","b4","b7","b8","ax","v","cb","toInt32","getTime","ease","$type","a8","ceil","max","floor","pow","min","_loop_2","this_2","_loop_3","this_3","bp","b0","b1","b2","b3","bq","bz","a9"],"mappings":"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","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, Delegate_$type, markType, typeCast, INotifyPropertyChanged_$type, PropertyChangedEventArgs, EventArgs, Point_$type, markDep } from \"./type\";\nimport { ISchedulableRender_$type } from \"./ISchedulableRender\";\nimport { List$1 } from \"./List$1\";\nimport { Image } from \"./Image\";\nimport { RenderingContext } from \"./RenderingContext\";\nimport { StackPool$1 } from \"./StackPool$1\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { Tile } from \"./Tile\";\nimport { Rect } from \"./Rect\";\nimport { CanvasRenderScheduler } from \"./CanvasRenderScheduler\";\nimport { WriteableBitmap } from \"./WriteableBitmap\";\nimport { Uri } from \"./Uri\";\nimport { CancellingMultiScaleImageEventArgs } from \"./CancellingMultiScaleImageEventArgs\";\nimport { DownloadingMultiScaleImageEventArgs } from \"./DownloadingMultiScaleImageEventArgs\";\nimport { CanvasViewRenderer } from \"./CanvasViewRenderer\";\nimport { truncate, intDivide, logBase } from \"./number\";\nimport { DependencyObject } from \"./DependencyObject\";\nimport { Control } from \"./Control\";\nimport { DependencyProperty } from \"./DependencyProperty\";\nimport { IEasingFunction_$type } from \"./IEasingFunction\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { TilePositionComparer } from \"./TilePositionComparer\";\nimport { Convert } from \"./Convert\";\nimport { MathUtil } from \"./MathUtil\";\nimport { PropertyMetadata } from \"./PropertyMetadata\";\nimport { stringIsNullOrEmpty } from \"./string\";\nimport { dateNow } from \"./date\";\n/**\n * @hidden\n */\nvar XamMultiScaleImageView = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleImageView, _super);\n    function XamMultiScaleImageView(a) {\n        var _this = _super.call(this) || this;\n        _this.b = null;\n        _this.h = null;\n        _this.g = new Dictionary$2(Base.$, List$1.$.specialize(Delegate_$type), 0);\n        _this.j = new List$1(Tile.$, 0);\n        _this.i = new List$1(Tile.$, 0);\n        _this.p = -1;\n        _this.o = -1;\n        _this.k = null;\n        _this.m = null;\n        _this.c = null;\n        _this._isDirty = false;\n        _this.au = Rect.empty;\n        _this.l = null;\n        _this.b = a;\n        _this.b.ag.l(_this);\n        _this.h = new List$1(Image.$, 0);\n        _this.b.ap = ((function () {\n            var $ret = new StackPool$1(Image.$);\n            $ret.j = runOn(_this, _this.at);\n            $ret.b = runOn(_this, _this.y);\n            $ret.c = runOn(_this, _this.aa);\n            $ret.d = runOn(_this, _this.z);\n            return $ret;\n        })());\n        for (var b = 0; b < 4; ++b) {\n            _this.i.add(null);\n        }\n        return _this;\n    }\n    XamMultiScaleImageView.prototype.at = function () {\n        return new Image();\n    };\n    XamMultiScaleImageView.prototype.y = function (a) {\n        this.h.add(a);\n    };\n    XamMultiScaleImageView.prototype.aa = function (a) {\n        this.h.remove(a);\n    };\n    XamMultiScaleImageView.prototype.z = function (a) {\n    };\n    XamMultiScaleImageView.prototype.ao = function (a, b, c) {\n        a.n = b;\n        a.o = c;\n    };\n    XamMultiScaleImageView.prototype.r = function (a) {\n        var _loop_1 = function (b) {\n            if (a == this_1.i._inner[b]) {\n                if (a.i != null && a.i.ac != null) {\n                    var c = a.i.ac;\n                    var d_1 = c.c;\n                    var e_1 = this_1.b.ao.w(a.f + 8, a.d, a.e);\n                    if (e_1 != null) {\n                        var f = ((function () {\n                            var $ret = new CancellingMultiScaleImageEventArgs();\n                            $ret.uri = e_1.value;\n                            $ret.image = d_1;\n                            return $ret;\n                        })());\n                        this_1.b.bu(f);\n                    }\n                    if (this_1.g.containsKey(d_1)) {\n                        var g = this_1.g.item(d_1);\n                        for (var h = 0; h < g.count; h++) {\n                            g._inner[h]();\n                        }\n                        g.clear();\n                        this_1.g.removeItem(d_1);\n                    }\n                }\n                this_1.i._inner[b] = null;\n                this_1.q();\n                return { value: void 0 };\n            }\n        };\n        var this_1 = this;\n        for (var b = 0; b < this.i.count; ++b) {\n            var state_1 = _loop_1(b);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        for (var i = 0; i < this.j.count; ++i) {\n            if (this.j._inner[i] == a) {\n                this.j.removeAt(i);\n                break;\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.u = function (a) {\n        this.j.add(a);\n        this.j.aa(function (b, c) {\n            var d = 0;\n            var e = 0;\n            if (b.h != null) {\n                d = b.h.ac.b;\n            }\n            if (c.h != null) {\n                e = c.h.ac.b;\n            }\n            if (d < e) {\n                return -1;\n            }\n            else if (d > e) {\n                return 1;\n            }\n            return 0;\n        });\n        this.q();\n    };\n    XamMultiScaleImageView.prototype.q = function () {\n        var _this = this;\n        var index_ = -1;\n        if (this.l == null) {\n            return;\n        }\n        if (this.j.count > 0) {\n            for (var a = 0; a < this.i.count; ++a) {\n                if (this.i._inner[a] == null) {\n                    index_ = a;\n                    break;\n                }\n            }\n        }\n        if (index_ >= 0) {\n            this.i._inner[index_] = this.j._inner[0];\n            var b = new WriteableBitmap(this.b.ao.r, this.b.ao.p);\n            this.i._inner[index_].i.ac = b;\n            var ele_ = this.l.createElement(\"img\");\n            var c_1 = ele_.getNativeElement();\n            b.c = c_1;\n            var self_ = this;\n            var d = new List$1(Delegate_$type, 0);\n            this.g.addItem(c_1, d);\n            d.add(ele_.listen(\"load\", function (e) { return _this.ab(e, index_); }));\n            d.add(ele_.listen(\"readystatechange\", function (e) { return _this.ab(e, index_); }));\n            d.add(ele_.listen(\"error\", function (e) { return _this.ac(e, index_); }));\n            this.j.removeAt(0);\n            var e = this.b.ao.w(this.i._inner[index_].f + 8, this.i._inner[index_].d, this.i._inner[index_].e);\n            if (e == null) {\n                return;\n            }\n            var f_1 = e.value;\n            var g = ((function () {\n                var $ret = new DownloadingMultiScaleImageEventArgs();\n                $ret.uri = f_1;\n                $ret.image = c_1;\n                return $ret;\n            })());\n            this.b.bv(g);\n            f_1 = g.uri;\n            if (f_1 != null) {\n                c_1.src = f_1;\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.ab = function (a, b) {\n        var e_ = a.originalEvent;\n        var img_ = (e_.target);\n        var c = (img_.complete || (img_.readyState == 'complete' && e_.type == 'readystatechange'));\n        if (c) {\n            this.downloadCompleted(a, b);\n        }\n    };\n    XamMultiScaleImageView.prototype.ac = function (a, b) {\n        this.downloadError(a, b);\n    };\n    XamMultiScaleImageView.prototype.downloadError = function (a, b) {\n        var c = this.i._inner[b];\n        this.i._inner[b] = null;\n        if (c != null && c.i != null && c.i.ac != null) {\n            var e_ = a.originalEvent;\n            var d = (e_.target);\n            if (this.g.containsKey(d)) {\n                var e = this.g.item(d);\n                for (var f = 0; f < e.count; f++) {\n                    e._inner[f]();\n                }\n                e.clear();\n                this.g.removeItem(d);\n            }\n        }\n        this.q();\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.downloadCompleted = function (a, b) {\n        var c = this.i._inner[b];\n        var d = true;\n        if (c != null && c.i != null && c.i.ac != null) {\n            d = false;\n            var ele_ = c.i.ac.c;\n            if (!ele_.complete) {\n                d = true;\n            }\n            if ((ele_.width == 0 && ele_.height == 0)) {\n                d = true;\n            }\n        }\n        this.i._inner[b] = null;\n        if (d) {\n            this.q();\n            this.ad();\n            return;\n        }\n        var e_ = a.originalEvent;\n        var e = (e_.target);\n        if (this.g.containsKey(e)) {\n            var f = this.g.item(e);\n            for (var g = 0; g < f.count; g++) {\n                f._inner[g]();\n            }\n            f.clear();\n            this.g.removeItem(e);\n        }\n        this.b.bo(c, c.i.ac);\n        if (c.i != null) {\n            this.b.ca(c);\n        }\n        this.q();\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.a = function (a, b, c, d) {\n        var e = new WriteableBitmap(a, a);\n        e.c = b.c;\n        if (!b.d.isEmpty) {\n            c += truncate(Math.round(b.d.left));\n            d += truncate(Math.round(b.d.top));\n        }\n        e.d = new Rect(0, c, d, a, a);\n        return e;\n    };\n    XamMultiScaleImageView.prototype.am = function (a) {\n        a.s = 0;\n    };\n    XamMultiScaleImageView.prototype.an = function (a) {\n        a.s = 1;\n    };\n    XamMultiScaleImageView.prototype.f = function () {\n        return true;\n    };\n    XamMultiScaleImageView.prototype.s = function (a) {\n        if (this.b.al != null) {\n            this.b.al.deferredRefresh();\n        }\n        else {\n            if (this.k != null) {\n                this.k.setTimeout(a, 0);\n            }\n            else {\n                window.setTimeout(a, 0);\n            }\n        }\n    };\n    XamMultiScaleImageView.prototype.aq = function () {\n        if (this.p == -1) {\n            this.p = window.setInterval(runOn(this.b, this.b.b9), 50);\n        }\n    };\n    XamMultiScaleImageView.prototype.as = function () {\n        if (this.p != -1) {\n            window.clearInterval(this.p);\n            this.p = -1;\n        }\n    };\n    XamMultiScaleImageView.prototype.ap = function () {\n        if (this.o == -1) {\n            this.o = window.setInterval(runOn(this.b, this.b.br), 50);\n        }\n    };\n    XamMultiScaleImageView.prototype.ar = function () {\n        if (this.o != -1) {\n            window.clearInterval(this.o);\n            this.o = -1;\n        }\n    };\n    XamMultiScaleImageView.prototype.t = function () {\n        if (this.p != -1) {\n            this.ar();\n            this.b.by();\n        }\n    };\n    XamMultiScaleImageView.prototype.ae = function (a) {\n        this.k = a;\n        this.k.rootWrapper.setStyleProperty(\"position\", \"relative\");\n        this.m = this.k.createElement(\"canvas\");\n        this.m.setStyleProperty(\"position\", \"absolute\");\n        this.m.setStyleProperty(\"top\", \"0px\");\n        this.m.setStyleProperty(\"left\", \"0px\");\n        this.k.append(this.m);\n        this.c = new RenderingContext(new CanvasViewRenderer(), this.k.get2DCanvasContext(this.m));\n        this.af(this.k.rootWrapper.width(), this.k.rootWrapper.height());\n    };\n    XamMultiScaleImageView.prototype.af = function (a, b) {\n        this.m.setAttribute(\"width\", truncate((a * this.b.a4)).toString());\n        this.m.setAttribute(\"height\", truncate((b * this.b.a4)).toString());\n        this.m.setStyleProperty(\"width\", a.toString() + \"px\");\n        this.m.setStyleProperty(\"height\", b.toString() + \"px\");\n        this.b.cn = new Rect(0, 0, 0, a, b);\n        this.b.b5();\n    };\n    XamMultiScaleImageView.prototype.aj = function () {\n        this.ad();\n    };\n    Object.defineProperty(XamMultiScaleImageView.prototype, \"index\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImageView.prototype.postRender = function () {\n    };\n    Object.defineProperty(XamMultiScaleImageView.prototype, \"isDirty\", {\n        get: function () {\n            return this._isDirty;\n        },\n        set: function (a) {\n            this._isDirty = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImageView.prototype.ad = function () {\n        if (this.c == null) {\n            return;\n        }\n        if (!this.isDirty) {\n            this.isDirty = true;\n            this.b.ag.n();\n        }\n    };\n    XamMultiScaleImageView.prototype.undirty = function (a) {\n        this.isDirty = false;\n        this.ak();\n    };\n    XamMultiScaleImageView.prototype.ak = function () {\n        if (this.c == null) {\n            return;\n        }\n        if (this.c.d && this.b.a4 != 1) {\n            this.c.z();\n            this.c.aa(this.b.a4, this.b.a4);\n        }\n        if (!this.au.isEmpty) {\n            this.c.k(this.au.left, this.au.top, this.au.width, this.au.height);\n        }\n        this.au = this.b.cn;\n        for (var a = 0; a < this.h.count; a++) {\n            var b = this.h._inner[a];\n            if (b.s == 0) {\n                this.al(b);\n            }\n        }\n        for (var c = 0; c < this.h.count; c++) {\n            var d = this.h._inner[c];\n            if (d.s == 1) {\n                this.al(d);\n            }\n        }\n        if (this.c.d && this.b.a4 != 1) {\n            this.c.y();\n        }\n        this.b.bt();\n        this.b.bw();\n    };\n    XamMultiScaleImageView.prototype.d = function () {\n        var a = true;\n        for (var b = 0; b < this.i.count; b++) {\n            if (this.i._inner[b] != null) {\n                a = false;\n            }\n        }\n        return a;\n    };\n    XamMultiScaleImageView.prototype.al = function (a) {\n        if (this.c == null) {\n            return;\n        }\n        var b = a.ac;\n        var c = a._opacity * this.b._opacity;\n        if (b == null || b.c == null) {\n            return;\n        }\n        if (this.e(b.c)) {\n            return;\n        }\n        if (!b.d.isEmpty) {\n            if (b.d.width < 1 || b.d.height < 1) {\n                return;\n            }\n            this.c.n(b.c, c, b.d.left, b.d.top, b.d.width, b.d.height, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n        }\n        else {\n            this.c.m(b.c, c, Math.round(a.n + this.b.cn.left), Math.round(a.o + this.b.cn.top), a.width, a.height);\n        }\n    };\n    XamMultiScaleImageView.prototype.e = function (a) {\n        var img_ = a;\n        if (!img_.complete) {\n            return true;\n        }\n        if ((img_.width == 0 && img_.height == 0)) {\n            return true;\n        }\n        return false;\n    };\n    XamMultiScaleImageView.prototype.x = function () {\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.ag = function (a) {\n        this.c = a;\n        this.ad();\n    };\n    XamMultiScaleImageView.prototype.ah = function (a) {\n        this.l = a;\n        this.q();\n    };\n    XamMultiScaleImageView.prototype.ai = function (a) {\n        this.b.cn = a;\n        this.b.b5();\n    };\n    XamMultiScaleImageView.prototype.preRender = function () {\n    };\n    XamMultiScaleImageView.prototype.isValid = function () {\n        return true;\n    };\n    XamMultiScaleImageView.$t = markType(XamMultiScaleImageView, 'XamMultiScaleImageView', Base.$, [ISchedulableRender_$type]);\n    return XamMultiScaleImageView;\n}(Base));\nexport { XamMultiScaleImageView };\n/**\n * @hidden\n */\nvar XamMultiScaleTileSource = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleTileSource, _super);\n    function XamMultiScaleTileSource(a, b, c, d, e) {\n        var _this = _super.call(this) || this;\n        _this.t = 0;\n        _this.s = 0;\n        _this.n = 1;\n        _this.l = false;\n        _this.r = 0;\n        _this.p = 0;\n        _this.q = 0;\n        _this.j = null;\n        _this.t = a;\n        _this.s = b;\n        _this.r = c;\n        _this.p = d;\n        _this.q = e;\n        return _this;\n    }\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"v\", {\n        get: function () {\n            return this.t;\n        },\n        set: function (a) {\n            this.t = a;\n            this.y(0, 0, 0, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"u\", {\n        get: function () {\n            return this.s;\n        },\n        set: function (a) {\n            this.s = a;\n            this.y(0, 0, 0, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"o\", {\n        get: function () {\n            return this.n;\n        },\n        set: function (a) {\n            this.n = a;\n            if (this.k != null) {\n                this.k._opacity = this.n;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"m\", {\n        get: function () {\n            return this.l;\n        },\n        set: function (a) {\n            this.l = a;\n            if (this.k != null) {\n                this.k.av = this.l;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(XamMultiScaleTileSource.prototype, \"k\", {\n        get: function () {\n            return this.j;\n        },\n        set: function (a) {\n            this.j = a;\n            if (this.j != null) {\n                this.j._opacity = this.o;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleTileSource.prototype.w = function (a, b, c) {\n        var d = new List$1(Base.$, 0);\n        this.x(a, b, c, d);\n        var e = null;\n        if (d.count > 0) {\n            e = typeCast(Uri.$, d._inner[0]);\n        }\n        return e;\n    };\n    XamMultiScaleTileSource.prototype.y = function (a, b, c, d) {\n        if (this.k != null) {\n            this.k.bs(a, b, c, d);\n        }\n    };\n    XamMultiScaleTileSource.$t = markType(XamMultiScaleTileSource, 'XamMultiScaleTileSource', DependencyObject.$);\n    return XamMultiScaleTileSource;\n}(DependencyObject));\nexport { XamMultiScaleTileSource };\n/**\n * @hidden\n */\nvar XamMultiScaleImage = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(XamMultiScaleImage, _super);\n    function XamMultiScaleImage() {\n        var _this = _super.call(this) || this;\n        _this.ap = null;\n        _this.an = null;\n        _this.ak = null;\n        _this.ck = null;\n        _this.a2 = 0;\n        _this.at = false;\n        _this.propertyChanged = null;\n        _this.ba = 0;\n        _this.bb = 0;\n        _this.a0 = new Date();\n        _this.cl = null;\n        _this.a3 = 0;\n        _this.ay = new List$1(Tile.$, 0);\n        _this.aw = false;\n        _this.aq = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, 0x7FFFFFFF, new TilePositionComparer());\n        _this.az = new List$1(Tile.$, 0);\n        _this.imageTilesReady = null;\n        _this.as = false;\n        _this.cn = null;\n        _this.ag = null;\n        _this.imagesChanged = null;\n        _this.downloadingImage = null;\n        _this.cancellingImage = null;\n        _this.a1 = 1;\n        _this.cn = Rect.empty;\n        _this.ag = new CanvasRenderScheduler();\n        _this.an = new XamMultiScaleImageView(_this);\n        _this.ab = XamMultiScaleImage.$;\n        _this.ck = _this.cm;\n        _this.a2 = _this.a5;\n        return _this;\n    }\n    Object.defineProperty(XamMultiScaleImage.prototype, \"al\", {\n        get: function () {\n            return this.ak;\n        },\n        set: function (a) {\n            if (this.ak != null) {\n                this.ak.unRegister(this);\n            }\n            this.ak = a;\n            if (this.ak != null) {\n                this.ak.register(this, runOn(this, this.b6));\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.bc = function () {\n        if (!stringIsNullOrEmpty(this.bf)) {\n            return this.bf;\n        }\n        return null;\n    };\n    XamMultiScaleImage.prototype.bd = function () {\n        if (!stringIsNullOrEmpty(this.bj)) {\n            return this.bj;\n        }\n        return null;\n    };\n    XamMultiScaleImage.prototype.bx = function (a, b, c) {\n        var d = new PropertyChangedEventArgs(a);\n        if (this.propertyChanged != null) {\n            this.propertyChanged(this, d);\n        }\n        switch (a) {\n            case XamMultiScaleImage.$$p[2]:\n                if (this.ao != null) {\n                    this.ao.k = this;\n                }\n                this.b4();\n                this.b7();\n                this.b5();\n                break;\n            case XamMultiScaleImage.$$p[6]:\n                this.b8();\n                break;\n            case XamMultiScaleImage.$$p[7]:\n                this.b8();\n                break;\n            case XamMultiScaleImage.$$p[5]:\n                if (!this.ax) {\n                    this.an.t();\n                }\n                break;\n            case XamMultiScaleImage.$$p[0]:\n                this.at = this.av;\n                this.b5();\n                break;\n        }\n    };\n    XamMultiScaleImage.prototype.v = function () {\n        _super.prototype.v.call(this);\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b7 = function () {\n        this.cb();\n        if (this.ao != null) {\n            this.ba = Convert.toInt32(logBase(this.ao.r, 2));\n            this.bb = Convert.toInt32(logBase(this.ao.v, 2));\n        }\n    };\n    XamMultiScaleImage.prototype.bs = function (a, b, c, d) {\n        this.b4();\n        this.b7();\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b8 = function () {\n        if (this.ax) {\n            this.a0 = dateNow();\n            this.cl = this.ck;\n            this.a3 = this.a2;\n            this.an.aq();\n        }\n        else {\n            this.ck = this.cm;\n            this.a2 = this.a5;\n            this.b5();\n        }\n    };\n    XamMultiScaleImage.prototype.b9 = function () {\n        var a = 2;\n        var b = dateNow().getTime() - this.a0.getTime();\n        var c = b / 1000;\n        var d = MathUtil.c((c) / a, 0, 1);\n        var e = this.aj != null ? this.aj.ease(d) : d;\n        var f = 1 - e;\n        this.a2 = this.a3 * f + this.a5 * e;\n        this.ck = { $type: Point_$type, x: this.cl.x * f + this.cm.x * e, y: this.cl.y * f + this.cm.y * e };\n        if (d >= 1) {\n            this.an.as();\n        }\n        else {\n        }\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.a8 = function (a, b, c, d) {\n        for (var e = 0; e < this.ay.count; ++e) {\n            if (this.ay._inner[e].c == a && this.ay._inner[e].d == b && this.ay._inner[e].e == c && this.ay._inner[e].f == d) {\n                return e;\n            }\n        }\n        return -1;\n    };\n    XamMultiScaleImage.prototype.b6 = function (a) {\n        var _this = this;\n        this.aw = false;\n        this.as = false;\n        var b = this.at;\n        if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n            return;\n        }\n        var c = truncate(Math.ceil(this.cn.width / this.ao.r));\n        var d = truncate(Math.max(1, Math.floor(-logBase(this.a2 / c, 2))));\n        if (d >= this.bb - 8) {\n            d = (this.bb - 8) - 1;\n        }\n        var e = truncate(Math.round(Math.pow(2, d)));\n        var f = this.a2;\n        var g = this.cn.height * f / this.cn.width;\n        var h = this.ao.v / Math.pow(2, d);\n        var i = this.ao.u / Math.pow(2, d);\n        var j = truncate(Math.floor((this.ck.x * this.ao.v) / h));\n        var k = truncate(Math.ceil(((this.ck.x + f) * this.ao.v) / h));\n        var l = truncate(Math.floor((this.ck.y * this.ao.u) / i));\n        var m = truncate(Math.ceil(((this.ck.y + g) * this.ao.v) / i));\n        if (!b) {\n            j = Math.max(j, 0);\n            k = Math.min(k, e);\n        }\n        l = Math.max(l, 0);\n        m = Math.min(m, e);\n        var n = ((j * h) - (this.ck.x * this.ao.v)) / h;\n        var o = ((l * i) - (this.ck.y * this.ao.u)) / i;\n        var p = (f * this.ao.v / h) * (this.ao.r / this.cn.width);\n        var q = new List$1(Tile.$, 0);\n        var r;\n        var s;\n        for (var t = j; t < k; ++t) {\n            r = t;\n            s = t;\n            while (s < 0) {\n                s = e + s;\n            }\n            while (s > e - 1) {\n                s = (s - e);\n            }\n            var _loop_2 = function (u) {\n                var v = this_2.a8(r, s, u, d);\n                if (v >= 0) {\n                    q.add(this_2.ay._inner[v]);\n                    this_2.ay.removeAt(v);\n                }\n                else {\n                    q.add(((function () {\n                        var $ret = new Tile();\n                        $ret.c = r;\n                        $ret.d = s;\n                        $ret.e = u;\n                        $ret.f = d;\n                        return $ret;\n                    })()));\n                }\n            };\n            var this_2 = this;\n            for (var u = l; u < m; ++u) {\n                _loop_2(u);\n            }\n        }\n        this.ap.f = true;\n        this.cb();\n        this.ay = q;\n        var _loop_3 = function (w) {\n            if (this_3.ay._inner[w].i == null) {\n                this_3.ay._inner[w].i = this_3.ap.a();\n                this_3.ay._inner[w].i._opacity = 1;\n                this_3.an.am(this_3.ay._inner[w].i);\n                var x = this_3.am(this_3.ay._inner[w]);\n                if (x != null) {\n                    this_3.ay._inner[w].i.ac = x;\n                }\n                else {\n                    var y = null;\n                    var z = ((function () {\n                        var $ret = new Tile();\n                        $ret.d = _this.ay._inner[w].d;\n                        $ret.e = _this.ay._inner[w].e;\n                        $ret.f = _this.ay._inner[w].f;\n                        return $ret;\n                    })());\n                    while (z.f >= 0 && y == null) {\n                        z.d = z.d >> 1;\n                        z.e = z.e >> 1;\n                        z.f = z.f - 1;\n                        y = this_3.am(z);\n                    }\n                    if (y != null) {\n                        var aa = truncate(Math.pow(2, this_3.ay._inner[w].f - z.f));\n                        var ab = intDivide(256, aa);\n                        var ac = ab * (this_3.ay._inner[w].d % aa);\n                        var ad = ab * (this_3.ay._inner[w].e % aa);\n                        this_3.ay._inner[w].h = this_3.ap.a();\n                        this_3.ay._inner[w].h._opacity = 1;\n                        this_3.an.an(this_3.ay._inner[w].h);\n                        x = this_3.an.a(ab, y, ac, ad);\n                        this_3.ay._inner[w].h.ac = x;\n                    }\n                    this_3.an.u(this_3.ay._inner[w]);\n                }\n            }\n            var ae = this_3.ao.r / p;\n            var af = this_3.ao.p / p;\n            var ag = (this_3.ay._inner[w].c - j + n) * ae;\n            var ah = (this_3.ay._inner[w].e - l + o) * af;\n            this_3.ay._inner[w].i.width = ae + 0.5;\n            this_3.ay._inner[w].i.height = af + 0.5;\n            this_3.an.ao(this_3.ay._inner[w].i, ag, ah);\n            if (this_3.ay._inner[w].h != null) {\n                this_3.ay._inner[w].h.width = ae + 0.5;\n                this_3.ay._inner[w].h.height = af + 0.5;\n                this_3.an.ao(this_3.ay._inner[w].h, ag, ah);\n            }\n        };\n        var this_3 = this;\n        for (var w = 0; w < this.ay.count; ++w) {\n            _loop_3(w);\n        }\n        this.ap.f = false;\n        this.an.aj();\n    };\n    XamMultiScaleImage.prototype.b5 = function () {\n        if (this.ao == null || !this.an.f() || this.cn.width == 0 || this.cn.height == 0) {\n            return;\n        }\n        if (this.aw) {\n            return;\n        }\n        this.aw = true;\n        this.an.s(runOn(this, this.b6));\n    };\n    XamMultiScaleImage.prototype.cb = function () {\n        for (var a = 0; a < this.ay.count; ++a) {\n            this.an.r(this.ay._inner[a]);\n            this.bp(this.ay._inner[a]);\n            if (this.ay._inner[a].i != null) {\n                this.ap.n(this.ay._inner[a].i);\n                this.ay._inner[a].i.ac = null;\n                this.ay._inner[a].i = null;\n            }\n        }\n    };\n    XamMultiScaleImage.prototype.b4 = function () {\n        this.ar.i();\n    };\n    XamMultiScaleImage.prototype.am = function (a) {\n        return this.ar.item(a);\n    };\n    XamMultiScaleImage.prototype.bo = function (a, b) {\n        this.ar.item(a, b);\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"ar\", {\n        get: function () {\n            return this.aq;\n        },\n        set: function (a) {\n            this.aq = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.au = function () {\n        return this.az.count != 0;\n    };\n    XamMultiScaleImage.prototype.bt = function () {\n        var a = true;\n        if (this.au()) {\n            a = false;\n        }\n        if (!this.an.d()) {\n            a = false;\n        }\n        if (a && !this.as) {\n            if (this.imageTilesReady != null) {\n                this.imageTilesReady(this, new EventArgs());\n            }\n        }\n        this.as = a;\n    };\n    XamMultiScaleImage.prototype.ca = function (a) {\n        if (a.h != null) {\n            a.b = dateNow();\n            this.az.add(a);\n            this.an.ap();\n        }\n        else {\n            this.bt();\n        }\n    };\n    XamMultiScaleImage.prototype.bp = function (a) {\n        if (a.h != null) {\n            this.ap.n(a.h);\n            a.h.ac = null;\n            a.h = null;\n            for (var b = 0; b < this.az.count; ++b) {\n                if (this.az._inner[b] == a) {\n                    this.az.removeAt(b);\n                    break;\n                }\n            }\n            if (this.az.count == 0) {\n                this.an.ar();\n            }\n        }\n    };\n    XamMultiScaleImage.prototype.br = function () {\n        var a = dateNow();\n        var b = 0.5;\n        for (var c = 0; c < this.az.count;) {\n            var d = a.getTime() - this.az._inner[c].b.getTime();\n            var e = d / 1000;\n            var f = (e) / b;\n            f = MathUtil.c(f, 0, 1);\n            this.az._inner[c].h._opacity = 1 - f;\n            if (f >= 1) {\n                this.ap.n(this.az._inner[c].h);\n                this.az._inner[c].h.ac = null;\n                this.az._inner[c].h = null;\n                this.az.removeAt(c);\n            }\n            else {\n                ++c;\n            }\n            this.an.x();\n        }\n        if (this.az.count == 0) {\n            this.an.ar();\n        }\n    };\n    XamMultiScaleImage.prototype.by = function () {\n        this.a2 = this.a5;\n        this.ck = this.cm;\n        this.b5();\n    };\n    XamMultiScaleImage.prototype.b0 = function (a) {\n        var b = a;\n        this.ag.j(b);\n        this.an.ae(a);\n    };\n    XamMultiScaleImage.prototype.b1 = function (a) {\n        this.an.ag(a);\n    };\n    XamMultiScaleImage.prototype.b2 = function (a) {\n        this.an.ah(a);\n    };\n    XamMultiScaleImage.prototype.b3 = function (a) {\n        this.an.ai(a);\n    };\n    XamMultiScaleImage.prototype.bw = function () {\n        if (this.imagesChanged != null) {\n            this.imagesChanged(this, new EventArgs());\n        }\n    };\n    XamMultiScaleImage.prototype.bq = function () {\n        this.aw = false;\n    };\n    XamMultiScaleImage.prototype.bv = function (a) {\n        if (this.downloadingImage != null) {\n            this.downloadingImage(this, a);\n        }\n    };\n    XamMultiScaleImage.prototype.bu = function (a) {\n        if (this.cancellingImage != null) {\n            this.cancellingImage(this, a);\n        }\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"a4\", {\n        get: function () {\n            return this.a1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.prototype.bz = function (a) {\n        this.a1 = a;\n    };\n    Object.defineProperty(XamMultiScaleImage.prototype, \"a9\", {\n        get: function () {\n            return this.ar.h;\n        },\n        set: function (a) {\n            var b = a != this.a9;\n            if (b) {\n                this.ar = new LRUCache$2(Tile.$, WriteableBitmap.$, 1, a, new TilePositionComparer());\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    XamMultiScaleImage.$t = markType(XamMultiScaleImage, 'XamMultiScaleImage', Control.$, [INotifyPropertyChanged_$type]);\n    XamMultiScaleImage.$$p = markDep(DependencyProperty, PropertyMetadata, XamMultiScaleImage, 'bx', ['IsHorizontalTileWrappingEnabled:av:cc', [0, false], 'Referer:bf:cd', [2, null], 'Source:ao:ce', [XamMultiScaleTileSource.$, null], 'SpringsEasingFunction:aj:cf', [IEasingFunction_$type, null], 'UserAgent:bj:cg', [2, null], 'UseSprings:ax:ch', [0, false], 'ViewportOrigin:cm:ci', [Point_$type, { $type: Point_$type, x: 0, y: 0 }], 'ViewportWidth:a5:cj', [1, 1]]);\n    return XamMultiScaleImage;\n}(Control));\nexport { XamMultiScaleImage };\n"]},"metadata":{},"sourceType":"module"}