{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __assign, __values } from \"tslib\";\nimport { Brush } from './Brush';\nimport { Size } from './Size';\nimport { Rect } from './Rect';\nimport { BrushCollection } from './BrushCollection';\nimport { PointUtil } from './type';\nimport { EnumUtil, typeGetValue } from './type';\nimport { stringEndsWith, stringStartsWith } from './string';\nimport { ObservableColorCollection } from './ObservableColorCollection';\nexport function brushToString(v) {\n  if (v == null) {\n    return null;\n  }\n\n  return v.fill;\n}\nexport function stringToBrush(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var brush = Brush.create(v);\n  return brush;\n}\nexport function ensureEnum($t, v) {\n  if (v == null) {\n    return 0;\n  }\n\n  if (typeof v == \"number\") {\n    var n = v;\n\n    if (EnumUtil.getName($t, n) == undefined) {\n      return 0;\n    }\n\n    return v;\n  }\n\n  var ret = typeGetValue(EnumUtil.parse($t, v, true));\n  return ret;\n}\nexport function enumToString($t, v) {\n  return EnumUtil.toString($t, v);\n}\nexport function ensureBool(v) {\n  if (v == null) {\n    return false;\n  }\n\n  if (typeof v == \"boolean\") {\n    return v;\n  }\n\n  return v.toString().toLowerCase() == \"true\";\n}\nexport function colorToString(v) {\n  if (v == null) {\n    return null;\n  }\n\n  return v.colorString;\n}\nexport function stringToColor(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var brush = Brush.create(v);\n  return brush.color;\n}\nexport function fromSize(v) {\n  if (v == null) {\n    return null;\n  }\n\n  return {\n    width: v.width,\n    height: v.height\n  };\n}\nexport function sizeToString(v) {\n  if (!v) {\n    return null;\n  }\n\n  return v.width + \" \" + v.height;\n}\nexport function toSize(v) {\n  if (v == null) {\n    return Size.empty;\n  }\n\n  var size = null;\n\n  if (typeof v == \"string\") {\n    v = v.trim();\n    var parts = v.split(\" \");\n\n    if (parts.length != 2) {\n      parts = v.split(\",\");\n    }\n\n    if (parts.length != 2) {\n      return Size.empty;\n    }\n\n    parts[0] = parts[0].trim();\n    parts[1] = parts[1].trim();\n    var width = parseFloat(parts[0]);\n    var height = parseFloat(parts[1]);\n    return new Size(0, width, height);\n  } else {\n    if (v != null) {\n      size = new Size(0, v.width, v.height);\n    }\n  }\n\n  return size;\n}\nexport function fromPoint(v) {\n  return v;\n}\nexport function pointToString(v) {\n  if (!v) {\n    return null;\n  }\n\n  return v.x + \" \" + v.y;\n}\nexport function toPoint(v) {\n  if (v == null) {\n    return PointUtil.createXY(NaN, NaN);\n  }\n\n  var point = null;\n\n  if (typeof v == \"string\") {\n    v = v.trim();\n    var parts = v.split(\" \");\n\n    if (parts.length != 2) {\n      parts = v.split(\",\");\n    }\n\n    if (parts.length != 2) {\n      return PointUtil.createXY(NaN, NaN);\n    }\n\n    parts[0] = parts[0].trim();\n    parts[1] = parts[1].trim();\n    var x = parseFloat(parts[0]);\n    var y = parseFloat(parts[1]);\n    return PointUtil.createXY(x, y);\n  } else {\n    if (v != null) {\n      point = PointUtil.createXY(v.x, v.y);\n    }\n  }\n\n  return point;\n}\nexport function fromRect(v) {\n  if (v == null) {\n    return null;\n  }\n\n  return {\n    top: v.top,\n    left: v.left,\n    width: v.width,\n    height: v.height\n  };\n}\nexport function rectToString(v) {\n  if (!v) {\n    return null;\n  }\n\n  return v.left + \" \" + v.top + \" \" + v.width + \" \" + v.height;\n}\nexport function toRect(v) {\n  if (v == null) {\n    return Rect.empty;\n  }\n\n  var size = null;\n\n  if (typeof v == \"string\") {\n    var parts = v.split(\" \");\n\n    if (parts.length != 4) {\n      parts = v.split(\",\");\n    }\n\n    if (parts.length != 4) {\n      return Rect.empty;\n    }\n\n    parts[0] = parts[0].trim();\n    parts[1] = parts[1].trim();\n    parts[2] = parts[2].trim();\n    parts[3] = parts[3].trim();\n    var left = parseFloat(parts[0]);\n    var top_1 = parseFloat(parts[1]);\n    var width = parseFloat(parts[2]);\n    var height = parseFloat(parts[3]);\n    return new Rect(0, left, top_1, width, height);\n  } else {\n    if (v != null) {\n      size = new Rect(0, v.left, v.top, v.width, v.height);\n    }\n  }\n\n  return size;\n}\nexport function brushCollectionToString(v) {\n  var bArray = fromBrushCollection(v);\n\n  if (bArray == null) {\n    return null;\n  }\n\n  return bArray.join(\" \");\n}\nexport function toBrushCollection(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var isRGB = true;\n\n  if (typeof v == \"string\") {\n    v = v.trim();\n    v = v.split(/[\\s,]+(?![^(]*\\))/gm);\n\n    for (var i_1 = 0; i_1 < v.length; i_1++) {\n      v[i_1] = v[i_1].trim();\n    }\n  }\n\n  var val = v ? v[0] : null;\n\n  if (typeof val == 'string' && val == 'HSV' || val == 'RGB') {\n    if (v[0] == 'HSV') {\n      isRGB = false;\n    }\n\n    v = v.slice(1);\n  }\n\n  var brushCollection = new BrushCollection();\n\n  for (var i = 0; v && i < v.length; i++) {\n    var brush = Brush.create(v[i]);\n    brushCollection.add(brush);\n  }\n\n  return brushCollection;\n}\nexport function fromBrushCollection(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var internalCollection = v;\n  var ret = [];\n\n  for (var i = 0; i < internalCollection.count; i++) {\n    var brush = internalCollection.item(i);\n\n    if (brush != null) {\n      ret.push(brush.fill);\n    }\n  }\n\n  return ret;\n}\nexport function colorCollectionToString(v) {\n  var bArray = fromColorCollection(v);\n\n  if (bArray == null) {\n    return null;\n  }\n\n  return bArray.join(\" \");\n}\nexport function toColorCollection(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var isRGB = true;\n\n  if (typeof v == \"string\") {\n    v = v.trim();\n    v = v.split(/[\\s,]+(?![^(]*\\))/gm);\n\n    for (var i_2 = 0; i_2 < v.length; i_2++) {\n      v[i_2] = v[i_2].trim();\n    }\n  }\n\n  var val = v ? v[0] : null;\n\n  if (typeof val == 'string' && val == 'HSV' || val == 'RGB') {\n    if (v[0] == 'HSV') {\n      isRGB = false;\n    }\n\n    v = v.slice(1);\n  }\n\n  var colorCollection = new ObservableColorCollection();\n\n  for (var i = 0; v && i < v.length; i++) {\n    var color = stringToColor(v[i]);\n    colorCollection.add(color);\n  }\n\n  return colorCollection;\n}\nexport function fromColorCollection(v) {\n  if (v == null) {\n    return null;\n  }\n\n  var internalCollection = v;\n  var ret = [];\n\n  for (var i = 0; i < internalCollection.count; i++) {\n    ret.push(internalCollection.item(i).colorString);\n  }\n\n  return ret;\n}\nexport function arrayFindByName(arr, name) {\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i].findByName && arr[i].findByName(name)) {\n      return arr[i].findByName(name);\n    }\n  }\n}\n\nvar CollectionAdapter =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function CollectionAdapter(query, target, allList, toTarget, onItemAdded, onItemRemoved, collisionChecker) {\n    var _this = this;\n\n    this._manualItems = [];\n    this._collisionChecker = null;\n    this.actualContent = [];\n    this._removedManualKeys = new Set();\n\n    if (collisionChecker) {\n      this._collisionChecker = collisionChecker;\n    }\n\n    this._query = query;\n    this._target = target;\n    this._toTarget = toTarget;\n    this._allList = allList;\n    this._onItemAdded = onItemAdded;\n    this._onItemRemoved = onItemRemoved;\n    this.syncItems();\n\n    if (this._query.changes) {\n      this._query.changes.subscribe(function (v) {\n        return _this.onQueryChanged(v);\n      });\n    }\n  }\n\n  Object.defineProperty(CollectionAdapter.prototype, \"collisionChecker\", {\n    get: function () {\n      return this._collisionChecker;\n    },\n    set: function (v) {\n      this._collisionChecker = v;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CollectionAdapter.prototype.updateQuery = function (q) {\n    var _this = this;\n\n    this._query = q;\n\n    if (this._query.changes) {\n      this._query.changes.subscribe(function (v) {\n        return _this.onQueryChanged(v);\n      });\n    }\n\n    this.notifyContentChanged();\n  };\n\n  CollectionAdapter.prototype.shiftContentToManual = function (manualCollection, onMoving) {\n    var queryArray = null;\n\n    if (this._query.toArray) {\n      queryArray = this._query.toArray();\n    } else {\n      queryArray = this._query;\n    }\n\n    var item = null;\n    var manualSet = new Set();\n\n    if (this.collisionChecker) {\n      for (var i = 0; i < this._manualItems.length; i++) {\n        item = this._manualItems[i];\n\n        if (item) {\n          var key = this.collisionChecker(item);\n\n          if (key) {\n            if (!manualSet.has(key)) {\n              manualSet.add(key);\n            }\n          }\n        }\n      }\n    }\n\n    var mapWasEmpty = manualSet.size == 0;\n\n    for (var i = 0; i < queryArray.length; i++) {\n      item = queryArray[i];\n\n      if (!this._hasShiftedOnceAlready) {\n        this._manualItems.splice(i, 0, item);\n\n        manualCollection.insert(i, item);\n        onMoving(item);\n      } else {\n        var key = this.collisionChecker(item);\n\n        if (!key) {\n          this._manualItems.splice(i, 0, item);\n\n          manualCollection.insert(i, item);\n          onMoving(item);\n        } else {\n          if (!manualSet.has(key)) {\n            this._manualItems.splice(manualCollection.count, 0, item);\n\n            manualCollection.insert(manualCollection.count, item);\n            onMoving(item);\n          }\n        }\n      }\n    }\n\n    this.syncItems();\n    this._hasShiftedOnceAlready = true;\n  };\n\n  CollectionAdapter.prototype.syncItems = function () {\n    var targetMap = new Map();\n    var queryMap = new Map();\n    var manualMap = new Map();\n    var item = null;\n\n    for (var i = 0; i < this._allList.length; i++) {\n      item = this._allList[i];\n      targetMap.set(item, true);\n    }\n\n    var queryArray = null;\n\n    if (this._query.toArray) {\n      queryArray = this._query.toArray();\n    } else {\n      queryArray = this._query;\n    }\n\n    this.actualContent = queryArray;\n\n    if (this.collisionChecker) {\n      queryArray = queryArray.slice(0);\n      this.actualContent = queryArray;\n      var manualKeySet = new Set();\n\n      for (var i_3 = 0; i_3 < this._manualItems.length; i_3++) {\n        item = this._manualItems[i_3];\n\n        if (item) {\n          var key = this.collisionChecker(item);\n\n          if (key) {\n            if (!manualKeySet.has(key)) {\n              manualKeySet.add(key);\n            }\n          }\n        }\n      }\n\n      for (var i_4 = queryArray.length - 1; i_4 >= 0; i_4--) {\n        item = queryArray[i_4];\n\n        if (!item) {\n          queryArray.splice(i_4, 1);\n        } else {\n          var key = this.collisionChecker(item);\n\n          if (key && (manualKeySet.has(key) || this._removedManualKeys.has(key))) {\n            queryArray.splice(i_4, 1);\n          }\n        }\n      }\n    }\n\n    for (var i = 0; i < queryArray.length; i++) {\n      item = queryArray[i];\n      queryMap.set(item, true);\n    }\n\n    for (var i = 0; i < this._manualItems.length; i++) {\n      item = this._manualItems[i];\n      manualMap.set(item, true);\n    }\n\n    for (var i = this._allList.length - 1; i >= 0; i--) {\n      item = this._allList[i];\n\n      if (!queryMap.has(item) && !manualMap.has(item)) {\n        this._allList.splice(i, 1);\n\n        this._target.removeAt(i);\n\n        this._onItemRemoved(item);\n      }\n    }\n\n    var ind = 0;\n    var ins = 0;\n    var insItem = null;\n    var maxLen = queryArray.length + this._manualItems.length;\n\n    while (ind < maxLen) {\n      if (ind < queryArray.length) {\n        insItem = queryArray[ind];\n      } else if (ind - queryArray.length < this._manualItems.length) {\n        insItem = this._manualItems[ind - queryArray.length];\n      } else {\n        break;\n      }\n\n      if (ins < this._allList.length) {\n        item = this._allList[ins];\n\n        if (item === insItem) {\n          ins++;\n          ind++;\n        } else {\n          this._allList.splice(ins, 0, insItem);\n\n          this._target.insert(ins, this._toTarget(insItem));\n\n          this._onItemAdded(insItem);\n\n          ind++;\n          ins++;\n        }\n      } else {\n        this._allList.push(insItem);\n\n        this._target.add(this._toTarget(insItem));\n\n        this._onItemAdded(insItem);\n\n        ind++;\n        ins++;\n      }\n    }\n  };\n\n  CollectionAdapter.prototype.notifyContentChanged = function () {\n    this.onQueryChanged(this._query);\n  };\n\n  CollectionAdapter.prototype.onQueryChanged = function (currentItems) {\n    this.syncItems();\n  };\n\n  CollectionAdapter.prototype.addManualItem = function (item) {\n    if (this.collisionChecker) {\n      var key = this.collisionChecker(item);\n\n      if (key) {\n        if (this._removedManualKeys.has(key)) {\n          this._removedManualKeys.delete(key);\n        }\n      }\n    }\n\n    this._manualItems.push(item);\n\n    this.syncItems();\n  };\n\n  CollectionAdapter.prototype.removeManualItem = function (item) {\n    var ind = this._manualItems.indexOf(item);\n\n    if (ind >= 0) {\n      if (this.collisionChecker) {\n        var key = this.collisionChecker(item);\n\n        if (key) {\n          if (!this._removedManualKeys.has(key)) {\n            this._removedManualKeys.add(key);\n          }\n        }\n      }\n\n      this._manualItems.splice(ind, 1);\n\n      this.syncItems();\n      return true;\n    }\n\n    return false;\n  };\n\n  CollectionAdapter.prototype.removeManualItemAt = function (index) {\n    if (index < this._manualItems.length) {\n      var item = this._manualItems[index];\n\n      if (this.collisionChecker) {\n        var key = this.collisionChecker(item);\n\n        if (key) {\n          if (!this._removedManualKeys.has(key)) {\n            this._removedManualKeys.add(key);\n          }\n        }\n      }\n    }\n\n    this._manualItems.splice(index, 1);\n\n    this.syncItems();\n  };\n\n  CollectionAdapter.prototype.clearManualItems = function () {\n    if (this.collisionChecker) {\n      this._removedManualKeys.clear();\n    }\n\n    this._manualItems.length = 0;\n    this.syncItems();\n  };\n\n  CollectionAdapter.prototype.insertManualItem = function (index, item) {\n    if (this.collisionChecker) {\n      var key = this.collisionChecker(item);\n\n      if (key) {\n        if (this._removedManualKeys.has(key)) {\n          this._removedManualKeys.delete(key);\n        }\n      }\n    }\n\n    this._manualItems.splice(index, 0, item);\n\n    this.syncItems();\n  };\n\n  return CollectionAdapter;\n}();\n\nexport { CollectionAdapter };\nexport function addPaletteThemeEntry(theme, clss, background, border, foreground) {\n  if (theme[clss] === undefined) {\n    theme[clss] = {};\n  }\n\n  if (background !== null) {\n    theme[clss][\"background-color\"] = background;\n  }\n\n  if (border !== null && border !== undefined) {\n    theme[clss][\"border-top-color\"] = border;\n    theme[clss][\"border-left-color\"] = border;\n    theme[clss][\"border-right-color\"] = border;\n    theme[clss][\"border-bottom-color\"] = border;\n  }\n\n  if (foreground !== null && foreground !== undefined) {\n    theme[clss][\"color\"] = foreground;\n  }\n}\nexport function addTextThemeEntry(theme, clss, fontFamily, fontSize, textColor, leftMargin, topMargin, rightMargin, bottomMargin, horizontalAlignment, verticalAlignment) {\n  if (theme[clss] === undefined) {\n    theme[clss] = {};\n  }\n\n  var t = theme[clss];\n\n  if (fontFamily !== null && fontFamily !== undefined) {\n    t[\"font-family\"] = fontFamily;\n    t[\"font-weight\"] = \"\";\n    t[\"font-style\"] = \"\";\n    t[\"font-variant\"] = \"\";\n    t[\"line-height\"] = \"\";\n  }\n\n  if (fontSize !== null && fontSize !== undefined) {\n    t[\"font-size\"] = fontSize;\n    t[\"font-weight\"] = \"\";\n    t[\"font-style\"] = \"\";\n    t[\"font-variant\"] = \"\";\n    t[\"line-height\"] = \"\";\n  }\n\n  if (textColor !== null && textColor !== undefined) {\n    t[\"color\"] = textColor;\n  }\n\n  if (leftMargin !== null && leftMargin !== undefined) {\n    t[\"margin-left\"] = leftMargin;\n  }\n\n  if (topMargin !== null && topMargin !== undefined) {\n    t[\"margin-top\"] = topMargin;\n  }\n\n  if (rightMargin !== null && rightMargin !== undefined) {\n    t[\"margin-right\"] = rightMargin;\n  }\n\n  if (bottomMargin !== null && bottomMargin !== undefined) {\n    t[\"margin-bottom\"] = bottomMargin;\n  }\n\n  if (horizontalAlignment !== null && horizontalAlignment !== undefined) {\n    t[\"text-align\"] = horizontalAlignment;\n  }\n\n  if (verticalAlignment !== null && verticalAlignment !== undefined) {\n    t[\"vertical-align\"] = verticalAlignment;\n  }\n}\n\nfunction isStylableProperty(name) {\n  // using lower case to prevent issGrues with matching case of properties (e.g. chart.brushes)\n  var propName = name.toLowerCase(); // skip non-stylable properties\n\n  if (propName == \"height\" || propName == \"width\") {\n    return false;\n  } // check for all stylable properties\n\n\n  if (stringEndsWith(propName, \"height\") || // grid.rowHeight\n  stringEndsWith(propName, \"width\") || // zoomSlider.HigherThumbWidth\n  stringEndsWith(propName, \"width\") || // zoomSlider.HigherCalloutOutline\n  stringEndsWith(propName, \"inset\") || // zoomSlider.EndInset\n  stringEndsWith(propName, \"orientation\") || // zoomSlider.Orientation\n  stringEndsWith(propName, \"duration\") || // zoomSlider.PanTransitionDuration\n  stringEndsWith(propName, \"outline\") || // zoomSlider.BarOutline\n  stringEndsWith(propName, \"brush\") || stringEndsWith(propName, \"background\") || stringEndsWith(propName, \"opacity\") || stringEndsWith(propName, \"textstyle\") || stringEndsWith(propName, \"brushes\") || // chart.brushes  || chart.negativeBrushes\n  stringEndsWith(propName, \"outlines\") || // chart.outlines || chart.negativeOutlines\n  stringEndsWith(propName, \"thickness\") || // chart.AxisStrokeThickness\n  stringEndsWith(propName, \"colors\") || //\n  stringEndsWith(propName, \"color\") || // chart.AxisLabelTextColor\n  stringEndsWith(propName, \"margin\") || // chart.AxisLabelTopMargin\n  stringEndsWith(propName, \"location\") || // chart.AxisLabelLocation\n  stringEndsWith(propName, \"style\") || // chart.AxisLabelTextStyle\n  stringEndsWith(propName, \"alignment\") || // chart.AxisLabelHorizontalAlignment\n  stringEndsWith(propName, \"visibility\") || // chart.AxisLabelVisibility\n  stringEndsWith(propName, \"extent\") || // chart.AxisExtent\n  stringEndsWith(propName, \"length\") || // chart.AxisTickLength\n  stringEndsWith(propName, \"strip\") || // chart.AxisStrip\n  stringEndsWith(propName, \"stroke\") || // chart.AxisStroke\n  stringEndsWith(propName, \"fill\") || // piechart.OthersCategoryFill\n  stringEndsWith(propName, \"visible\") || stringEndsWith(propName, \"radius\") || stringStartsWith(propName, \"padding\") || propName === \"usecanvas\" || propName === \"useaccessibility\") {\n    // chart.isToolbarVisible\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolveUnits(val) {\n  // TODO convert \"em, px, pt, cm, in\" units to \"px\"?\n  // https://www.w3.org/Style/Examples/007/units.en.html\n  var value = val.toLowerCase();\n\n  if (stringEndsWith(value, \"px\")) {\n    // 20px\n    value = value.replace(\"px\", \"\");\n    value = value.replace(\" \", \"\");\n  }\n\n  return value;\n}\n\nexport function toSpinal(value) {\n  if (value == null) {\n    return null;\n  }\n\n  var output = [];\n  var upperRun = 0;\n\n  for (var i = 0; i < value.length; i++) {\n    var curr = value[i];\n    var upperChar = curr.toUpperCase();\n    var lowerChar = curr.toLowerCase();\n    var charIsNewWord = upperRun == 0 && output.length > 0;\n    var previousCharWasNewWord = upperRun > 1;\n\n    if (upperChar == curr) {\n      if (charIsNewWord) {\n        output.push('-');\n      }\n\n      upperRun++;\n    } else if (lowerChar == curr) {\n      if (previousCharWasNewWord) {\n        output.splice(output.length - 1, 0, '-');\n      }\n\n      upperRun = 0;\n    } else {\n      upperRun = 0;\n    }\n\n    output.push(lowerChar);\n  }\n\n  var sb = \"\";\n\n  for (var i = 0; i < output.length; i++) {\n    sb += output[i];\n  }\n\n  return sb;\n}\nexport function fromSpinal(value) {\n  if (value == null) {\n    return value;\n  }\n\n  var parts = value.split('-');\n\n  for (var j = 1; j < parts.length; j++) {\n    parts[j] = parts[j].substr(0, 1).toUpperCase() + parts[j].substr(1);\n  }\n\n  var ret = \"\";\n\n  for (var j = 0; j < parts.length; j++) {\n    ret += parts[j];\n  }\n\n  return ret;\n}\n\nfunction toCssPropertyName(value) {\n  var sb = toSpinal(value);\n  return sb;\n} // get all property names for specified component and its base classes\n\n\nexport function getAllPropertyNames(comp) {\n  var members = [];\n\n  while (comp = comp.prototype || Object.getPrototypeOf(comp)) {\n    if (comp == HTMLElement.prototype) {\n      break;\n    }\n\n    var props = Object.getOwnPropertyNames(comp.constructor.prototype);\n\n    for (var i = 0; i < props.length; i++) {\n      members.push(props[i]);\n    }\n  }\n\n  return members;\n}\nvar stylableMap = /*@__PURE__*/new Map();\nexport function initializePropertiesFromCss(ele, comp, cssPrefix, ignoredProperties, prefixRequired, additionalPrefixes) {\n  var e_1, _a;\n\n  var styles = getComputedStyle(ele);\n  var props = getAllPropertyNames(comp);\n  var filtered = false;\n  var stylableProperties = [];\n\n  if (stylableMap.has(comp.prototype || Object.getPrototypeOf(comp))) {\n    stylableProperties = stylableMap.get(comp.prototype || Object.getPrototypeOf(comp));\n    props = stylableProperties;\n    filtered = true;\n  }\n\n  var compName = comp.constructor.name;\n\n  try {\n    for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n      var prop = props_1_1.value;\n      var cssPropName = null;\n\n      if (filtered) {\n        cssPropName = prop[1];\n        prop = prop[0];\n      }\n\n      if (ignoredProperties && ignoredProperties.has(prop)) {\n        if (!filtered && isStylableProperty(prop)) {\n          var cssName = toCssPropertyName(prop);\n          stylableProperties.push([prop, cssName]);\n        }\n\n        continue;\n      }\n\n      if (filtered || isStylableProperty(prop)) {\n        var cssName = \"\";\n\n        if (cssPropName) {\n          cssName = cssPropName;\n        } else {\n          cssName = toCssPropertyName(prop);\n        } // check if custom property is set with a prefix\n\n\n        var cssValue = styles.getPropertyValue(\"--\" + cssPrefix + cssName);\n\n        if (cssValue && cssValue.length && cssValue.length > 0) {\n          comp[prop] = resolveUnits(cssValue.trim());\n        }\n\n        if (additionalPrefixes) {\n          for (var i = 0; i < additionalPrefixes.length; i++) {\n            var p = additionalPrefixes[i];\n            cssValue = styles.getPropertyValue(\"--\" + p + cssName);\n\n            if (cssValue && cssValue.length && cssValue.length > 0) {\n              comp[prop] = resolveUnits(cssValue.trim());\n            }\n          }\n        }\n\n        if (!prefixRequired) {\n          // check if custom property is set without a prefix\n          cssValue = styles.getPropertyValue(\"--\" + cssName);\n\n          if (cssValue && cssValue.length && cssValue.length > 0) {\n            comp[prop] = resolveUnits(cssValue.trim());\n          }\n        }\n\n        if (!filtered) {\n          stylableProperties.push([prop, cssName]);\n        }\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  if (!filtered) {\n    stylableMap.set(comp.prototype || Object.getPrototypeOf(comp), stylableProperties);\n  }\n}\nexport function addBrushPaletteThemeEntry(theme, clss, backgrounds, outlines) {\n  if (outlines == null) {\n    outlines = backgrounds;\n  }\n\n  var t = theme;\n\n  for (var i = 0; i < Math.max(backgrounds.length, outlines.length); i++) {\n    var pName = clss + \"-\" + (i + 1);\n\n    if (t[pName] === undefined) {\n      t[pName] = {};\n    }\n\n    if (backgrounds[i] !== undefined) {\n      t[pName][\"background-color\"] = backgrounds[i];\n    }\n\n    if (outlines[i] !== undefined) {\n      t[pName][\"border-top-color\"] = outlines[i];\n      t[pName][\"border-left-color\"] = outlines[i];\n      t[pName][\"border-right-color\"] = outlines[i];\n      t[pName][\"border-bottom-color\"] = outlines[i];\n    }\n  }\n}\nexport function getModifiedProps(prevProps, nextProps) {\n  var e_2, _a;\n\n  var mod = {};\n\n  try {\n    for (var _b = __values(Object.keys(nextProps)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var p = _c.value;\n\n      if (prevProps[p] == undefined || prevProps[p] !== nextProps[p]) {\n        mod[p] = nextProps[p];\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  return mod;\n}\nexport function isValidProp(owner, prop) {\n  while (owner = owner.prototype || Object.getPrototypeOf(owner)) {\n    if (owner == HTMLElement.prototype) {\n      break;\n    }\n\n    if (owner.hasOwnProperty(prop)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar NamePatcher =\n/** @class */\n\n/*@__PURE__*/\nfunction () {\n  function NamePatcher() {}\n\n  NamePatcher.ensureStylablePatched = function (prot) {\n    this.ensurePatched(prot, isStylableProperty);\n  };\n\n  NamePatcher.ensurePatched = function (prot, nameFilter) {\n    var e_3, _a;\n\n    if (!prot) {\n      return;\n    }\n\n    if (prot === Object.prototype || prot === HTMLElement.prototype) {\n      return;\n    }\n\n    if (this._patched.has(prot)) {\n      return;\n    }\n\n    this._patched.add(prot);\n\n    var _loop_1 = function (key) {\n      if (nameFilter && !nameFilter(key)) {\n        return \"continue\";\n      }\n\n      var p = Object.getOwnPropertyDescriptor(prot, key);\n\n      if (!p) {\n        return \"continue\";\n      }\n\n      var set = p.set;\n      var name_1 = key;\n\n      if (set !== undefined) {\n        var newSet = function (v) {\n          this.__p = name_1;\n\n          if (this.__m) {\n            this.__m(name_1);\n          }\n\n          set.call(this, v);\n        };\n\n        Object.defineProperty(prot, key, __assign(__assign({}, p), {\n          set: newSet\n        }));\n      }\n    };\n\n    try {\n      for (var _b = __values(Object.getOwnPropertyNames(prot)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var key = _c.value;\n\n        _loop_1(key);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    var base = Object.getPrototypeOf(prot);\n\n    if (base) {\n      this.ensurePatched(base, nameFilter);\n    }\n  };\n\n  NamePatcher._patched = new Set();\n  return NamePatcher;\n}();\n\nexport { NamePatcher };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/componentUtil.js"],"names":["__assign","__values","Brush","Size","Rect","BrushCollection","PointUtil","EnumUtil","typeGetValue","stringEndsWith","stringStartsWith","ObservableColorCollection","brushToString","v","fill","stringToBrush","brush","create","ensureEnum","$t","n","getName","undefined","ret","parse","enumToString","toString","ensureBool","toLowerCase","colorToString","colorString","stringToColor","color","fromSize","width","height","sizeToString","toSize","empty","size","trim","parts","split","length","parseFloat","fromPoint","pointToString","x","y","toPoint","createXY","NaN","point","fromRect","top","left","rectToString","toRect","top_1","brushCollectionToString","bArray","fromBrushCollection","join","toBrushCollection","isRGB","i_1","val","slice","brushCollection","i","add","internalCollection","count","item","push","colorCollectionToString","fromColorCollection","toColorCollection","i_2","colorCollection","arrayFindByName","arr","name","findByName","CollectionAdapter","query","target","allList","toTarget","onItemAdded","onItemRemoved","collisionChecker","_this","_manualItems","_collisionChecker","actualContent","_removedManualKeys","Set","_query","_target","_toTarget","_allList","_onItemAdded","_onItemRemoved","syncItems","changes","subscribe","onQueryChanged","Object","defineProperty","prototype","get","set","enumerable","configurable","updateQuery","q","notifyContentChanged","shiftContentToManual","manualCollection","onMoving","queryArray","toArray","manualSet","key","has","mapWasEmpty","_hasShiftedOnceAlready","splice","insert","targetMap","Map","queryMap","manualMap","manualKeySet","i_3","i_4","removeAt","ind","ins","insItem","maxLen","currentItems","addManualItem","delete","removeManualItem","indexOf","removeManualItemAt","index","clearManualItems","clear","insertManualItem","addPaletteThemeEntry","theme","clss","background","border","foreground","addTextThemeEntry","fontFamily","fontSize","textColor","leftMargin","topMargin","rightMargin","bottomMargin","horizontalAlignment","verticalAlignment","t","isStylableProperty","propName","resolveUnits","value","replace","toSpinal","output","upperRun","curr","upperChar","toUpperCase","lowerChar","charIsNewWord","previousCharWasNewWord","sb","fromSpinal","j","substr","toCssPropertyName","getAllPropertyNames","comp","members","getPrototypeOf","HTMLElement","props","getOwnPropertyNames","constructor","stylableMap","initializePropertiesFromCss","ele","cssPrefix","ignoredProperties","prefixRequired","additionalPrefixes","e_1","_a","styles","getComputedStyle","filtered","stylableProperties","compName","props_1","props_1_1","next","done","prop","cssPropName","cssName","cssValue","getPropertyValue","p","e_1_1","error","return","call","addBrushPaletteThemeEntry","backgrounds","outlines","Math","max","pName","getModifiedProps","prevProps","nextProps","e_2","mod","_b","keys","_c","e_2_1","isValidProp","owner","hasOwnProperty","NamePatcher","ensureStylablePatched","prot","ensurePatched","nameFilter","e_3","_patched","_loop_1","getOwnPropertyDescriptor","name_1","newSet","__p","__m","e_3_1","base"],"mappings":"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","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __assign, __values } from \"tslib\";\nimport { Brush } from './Brush';\nimport { Size } from './Size';\nimport { Rect } from './Rect';\nimport { BrushCollection } from './BrushCollection';\nimport { PointUtil } from './type';\nimport { EnumUtil, typeGetValue } from './type';\nimport { stringEndsWith, stringStartsWith } from './string';\nimport { ObservableColorCollection } from './ObservableColorCollection';\nexport function brushToString(v) {\n    if (v == null) {\n        return null;\n    }\n    return v.fill;\n}\nexport function stringToBrush(v) {\n    if (v == null) {\n        return null;\n    }\n    var brush = Brush.create(v);\n    return brush;\n}\nexport function ensureEnum($t, v) {\n    if (v == null) {\n        return 0;\n    }\n    if (typeof v == \"number\") {\n        var n = v;\n        if (EnumUtil.getName($t, n) == undefined) {\n            return 0;\n        }\n        return v;\n    }\n    var ret = typeGetValue(EnumUtil.parse($t, v, true));\n    return ret;\n}\nexport function enumToString($t, v) {\n    return EnumUtil.toString($t, v);\n}\nexport function ensureBool(v) {\n    if (v == null) {\n        return false;\n    }\n    if (typeof v == \"boolean\") {\n        return v;\n    }\n    return v.toString().toLowerCase() == \"true\";\n}\nexport function colorToString(v) {\n    if (v == null) {\n        return null;\n    }\n    return v.colorString;\n}\nexport function stringToColor(v) {\n    if (v == null) {\n        return null;\n    }\n    var brush = Brush.create(v);\n    return brush.color;\n}\nexport function fromSize(v) {\n    if (v == null) {\n        return null;\n    }\n    return {\n        width: v.width,\n        height: v.height\n    };\n}\nexport function sizeToString(v) {\n    if (!v) {\n        return null;\n    }\n    return v.width + \" \" + v.height;\n}\nexport function toSize(v) {\n    if (v == null) {\n        return Size.empty;\n    }\n    var size = null;\n    if (typeof v == \"string\") {\n        v = v.trim();\n        var parts = v.split(\" \");\n        if (parts.length != 2) {\n            parts = v.split(\",\");\n        }\n        if (parts.length != 2) {\n            return Size.empty;\n        }\n        parts[0] = parts[0].trim();\n        parts[1] = parts[1].trim();\n        var width = parseFloat(parts[0]);\n        var height = parseFloat(parts[1]);\n        return new Size(0, width, height);\n    }\n    else {\n        if (v != null) {\n            size = new Size(0, v.width, v.height);\n        }\n    }\n    return size;\n}\nexport function fromPoint(v) {\n    return v;\n}\nexport function pointToString(v) {\n    if (!v) {\n        return null;\n    }\n    return v.x + \" \" + v.y;\n}\nexport function toPoint(v) {\n    if (v == null) {\n        return PointUtil.createXY(NaN, NaN);\n    }\n    var point = null;\n    if (typeof v == \"string\") {\n        v = v.trim();\n        var parts = v.split(\" \");\n        if (parts.length != 2) {\n            parts = v.split(\",\");\n        }\n        if (parts.length != 2) {\n            return PointUtil.createXY(NaN, NaN);\n        }\n        parts[0] = parts[0].trim();\n        parts[1] = parts[1].trim();\n        var x = parseFloat(parts[0]);\n        var y = parseFloat(parts[1]);\n        return PointUtil.createXY(x, y);\n    }\n    else {\n        if (v != null) {\n            point = PointUtil.createXY(v.x, v.y);\n        }\n    }\n    return point;\n}\nexport function fromRect(v) {\n    if (v == null) {\n        return null;\n    }\n    return {\n        top: v.top,\n        left: v.left,\n        width: v.width,\n        height: v.height\n    };\n}\nexport function rectToString(v) {\n    if (!v) {\n        return null;\n    }\n    return v.left + \" \" + v.top + \" \" + v.width + \" \" + v.height;\n}\nexport function toRect(v) {\n    if (v == null) {\n        return Rect.empty;\n    }\n    var size = null;\n    if (typeof v == \"string\") {\n        var parts = v.split(\" \");\n        if (parts.length != 4) {\n            parts = v.split(\",\");\n        }\n        if (parts.length != 4) {\n            return Rect.empty;\n        }\n        parts[0] = parts[0].trim();\n        parts[1] = parts[1].trim();\n        parts[2] = parts[2].trim();\n        parts[3] = parts[3].trim();\n        var left = parseFloat(parts[0]);\n        var top_1 = parseFloat(parts[1]);\n        var width = parseFloat(parts[2]);\n        var height = parseFloat(parts[3]);\n        return new Rect(0, left, top_1, width, height);\n    }\n    else {\n        if (v != null) {\n            size = new Rect(0, v.left, v.top, v.width, v.height);\n        }\n    }\n    return size;\n}\nexport function brushCollectionToString(v) {\n    var bArray = fromBrushCollection(v);\n    if (bArray == null) {\n        return null;\n    }\n    return bArray.join(\" \");\n}\nexport function toBrushCollection(v) {\n    if (v == null) {\n        return null;\n    }\n    var isRGB = true;\n    if (typeof v == \"string\") {\n        v = v.trim();\n        v = v.split(/[\\s,]+(?![^(]*\\))/gm);\n        for (var i_1 = 0; i_1 < v.length; i_1++) {\n            v[i_1] = v[i_1].trim();\n        }\n    }\n    var val = v ? v[0] : null;\n    if (typeof val == 'string' && val == 'HSV' || val == 'RGB') {\n        if (v[0] == 'HSV') {\n            isRGB = false;\n        }\n        v = v.slice(1);\n    }\n    var brushCollection = new BrushCollection();\n    for (var i = 0; v && i < v.length; i++) {\n        var brush = Brush.create(v[i]);\n        brushCollection.add(brush);\n    }\n    return brushCollection;\n}\nexport function fromBrushCollection(v) {\n    if (v == null) {\n        return null;\n    }\n    var internalCollection = v;\n    var ret = [];\n    for (var i = 0; i < internalCollection.count; i++) {\n        var brush = internalCollection.item(i);\n        if (brush != null) {\n            ret.push(brush.fill);\n        }\n    }\n    return ret;\n}\nexport function colorCollectionToString(v) {\n    var bArray = fromColorCollection(v);\n    if (bArray == null) {\n        return null;\n    }\n    return bArray.join(\" \");\n}\nexport function toColorCollection(v) {\n    if (v == null) {\n        return null;\n    }\n    var isRGB = true;\n    if (typeof v == \"string\") {\n        v = v.trim();\n        v = v.split(/[\\s,]+(?![^(]*\\))/gm);\n        for (var i_2 = 0; i_2 < v.length; i_2++) {\n            v[i_2] = v[i_2].trim();\n        }\n    }\n    var val = v ? v[0] : null;\n    if (typeof val == 'string' && val == 'HSV' || val == 'RGB') {\n        if (v[0] == 'HSV') {\n            isRGB = false;\n        }\n        v = v.slice(1);\n    }\n    var colorCollection = new ObservableColorCollection();\n    for (var i = 0; v && i < v.length; i++) {\n        var color = stringToColor(v[i]);\n        colorCollection.add(color);\n    }\n    return colorCollection;\n}\nexport function fromColorCollection(v) {\n    if (v == null) {\n        return null;\n    }\n    var internalCollection = v;\n    var ret = [];\n    for (var i = 0; i < internalCollection.count; i++) {\n        ret.push(internalCollection.item(i).colorString);\n    }\n    return ret;\n}\nexport function arrayFindByName(arr, name) {\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i].findByName && arr[i].findByName(name)) {\n            return arr[i].findByName(name);\n        }\n    }\n}\nvar CollectionAdapter = /** @class */ /*@__PURE__*/ (function () {\n    function CollectionAdapter(query, target, allList, toTarget, onItemAdded, onItemRemoved, collisionChecker) {\n        var _this = this;\n        this._manualItems = [];\n        this._collisionChecker = null;\n        this.actualContent = [];\n        this._removedManualKeys = new Set();\n        if (collisionChecker) {\n            this._collisionChecker = collisionChecker;\n        }\n        this._query = query;\n        this._target = target;\n        this._toTarget = toTarget;\n        this._allList = allList;\n        this._onItemAdded = onItemAdded;\n        this._onItemRemoved = onItemRemoved;\n        this.syncItems();\n        if (this._query.changes) {\n            this._query.changes.subscribe(function (v) { return _this.onQueryChanged(v); });\n        }\n    }\n    Object.defineProperty(CollectionAdapter.prototype, \"collisionChecker\", {\n        get: function () {\n            return this._collisionChecker;\n        },\n        set: function (v) {\n            this._collisionChecker = v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CollectionAdapter.prototype.updateQuery = function (q) {\n        var _this = this;\n        this._query = q;\n        if (this._query.changes) {\n            this._query.changes.subscribe(function (v) { return _this.onQueryChanged(v); });\n        }\n        this.notifyContentChanged();\n    };\n    CollectionAdapter.prototype.shiftContentToManual = function (manualCollection, onMoving) {\n        var queryArray = null;\n        if (this._query.toArray) {\n            queryArray = this._query.toArray();\n        }\n        else {\n            queryArray = this._query;\n        }\n        var item = null;\n        var manualSet = new Set();\n        if (this.collisionChecker) {\n            for (var i = 0; i < this._manualItems.length; i++) {\n                item = this._manualItems[i];\n                if (item) {\n                    var key = this.collisionChecker(item);\n                    if (key) {\n                        if (!manualSet.has(key)) {\n                            manualSet.add(key);\n                        }\n                    }\n                }\n            }\n        }\n        var mapWasEmpty = manualSet.size == 0;\n        for (var i = 0; i < queryArray.length; i++) {\n            item = queryArray[i];\n            if (!this._hasShiftedOnceAlready) {\n                this._manualItems.splice(i, 0, item);\n                manualCollection.insert(i, item);\n                onMoving(item);\n            }\n            else {\n                var key = this.collisionChecker(item);\n                if (!key) {\n                    this._manualItems.splice(i, 0, item);\n                    manualCollection.insert(i, item);\n                    onMoving(item);\n                }\n                else {\n                    if (!manualSet.has(key)) {\n                        this._manualItems.splice(manualCollection.count, 0, item);\n                        manualCollection.insert(manualCollection.count, item);\n                        onMoving(item);\n                    }\n                }\n            }\n        }\n        this.syncItems();\n        this._hasShiftedOnceAlready = true;\n    };\n    CollectionAdapter.prototype.syncItems = function () {\n        var targetMap = new Map();\n        var queryMap = new Map();\n        var manualMap = new Map();\n        var item = null;\n        for (var i = 0; i < this._allList.length; i++) {\n            item = this._allList[i];\n            targetMap.set(item, true);\n        }\n        var queryArray = null;\n        if (this._query.toArray) {\n            queryArray = this._query.toArray();\n        }\n        else {\n            queryArray = this._query;\n        }\n        this.actualContent = queryArray;\n        if (this.collisionChecker) {\n            queryArray = queryArray.slice(0);\n            this.actualContent = queryArray;\n            var manualKeySet = new Set();\n            for (var i_3 = 0; i_3 < this._manualItems.length; i_3++) {\n                item = this._manualItems[i_3];\n                if (item) {\n                    var key = this.collisionChecker(item);\n                    if (key) {\n                        if (!manualKeySet.has(key)) {\n                            manualKeySet.add(key);\n                        }\n                    }\n                }\n            }\n            for (var i_4 = queryArray.length - 1; i_4 >= 0; i_4--) {\n                item = queryArray[i_4];\n                if (!item) {\n                    queryArray.splice(i_4, 1);\n                }\n                else {\n                    var key = this.collisionChecker(item);\n                    if (key && (manualKeySet.has(key) || this._removedManualKeys.has(key))) {\n                        queryArray.splice(i_4, 1);\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < queryArray.length; i++) {\n            item = queryArray[i];\n            queryMap.set(item, true);\n        }\n        for (var i = 0; i < this._manualItems.length; i++) {\n            item = this._manualItems[i];\n            manualMap.set(item, true);\n        }\n        for (var i = this._allList.length - 1; i >= 0; i--) {\n            item = this._allList[i];\n            if (!queryMap.has(item) && !manualMap.has(item)) {\n                this._allList.splice(i, 1);\n                this._target.removeAt(i);\n                this._onItemRemoved(item);\n            }\n        }\n        var ind = 0;\n        var ins = 0;\n        var insItem = null;\n        var maxLen = queryArray.length + this._manualItems.length;\n        while (ind < maxLen) {\n            if (ind < queryArray.length) {\n                insItem = queryArray[ind];\n            }\n            else if ((ind - queryArray.length) < this._manualItems.length) {\n                insItem = this._manualItems[ind - queryArray.length];\n            }\n            else {\n                break;\n            }\n            if (ins < this._allList.length) {\n                item = this._allList[ins];\n                if (item === insItem) {\n                    ins++;\n                    ind++;\n                }\n                else {\n                    this._allList.splice(ins, 0, insItem);\n                    this._target.insert(ins, this._toTarget(insItem));\n                    this._onItemAdded(insItem);\n                    ind++;\n                    ins++;\n                }\n            }\n            else {\n                this._allList.push(insItem);\n                this._target.add(this._toTarget(insItem));\n                this._onItemAdded(insItem);\n                ind++;\n                ins++;\n            }\n        }\n    };\n    CollectionAdapter.prototype.notifyContentChanged = function () {\n        this.onQueryChanged(this._query);\n    };\n    CollectionAdapter.prototype.onQueryChanged = function (currentItems) {\n        this.syncItems();\n    };\n    CollectionAdapter.prototype.addManualItem = function (item) {\n        if (this.collisionChecker) {\n            var key = this.collisionChecker(item);\n            if (key) {\n                if (this._removedManualKeys.has(key)) {\n                    this._removedManualKeys.delete(key);\n                }\n            }\n        }\n        this._manualItems.push(item);\n        this.syncItems();\n    };\n    CollectionAdapter.prototype.removeManualItem = function (item) {\n        var ind = this._manualItems.indexOf(item);\n        if (ind >= 0) {\n            if (this.collisionChecker) {\n                var key = this.collisionChecker(item);\n                if (key) {\n                    if (!this._removedManualKeys.has(key)) {\n                        this._removedManualKeys.add(key);\n                    }\n                }\n            }\n            this._manualItems.splice(ind, 1);\n            this.syncItems();\n            return true;\n        }\n        return false;\n    };\n    CollectionAdapter.prototype.removeManualItemAt = function (index) {\n        if (index < this._manualItems.length) {\n            var item = this._manualItems[index];\n            if (this.collisionChecker) {\n                var key = this.collisionChecker(item);\n                if (key) {\n                    if (!this._removedManualKeys.has(key)) {\n                        this._removedManualKeys.add(key);\n                    }\n                }\n            }\n        }\n        this._manualItems.splice(index, 1);\n        this.syncItems();\n    };\n    CollectionAdapter.prototype.clearManualItems = function () {\n        if (this.collisionChecker) {\n            this._removedManualKeys.clear();\n        }\n        this._manualItems.length = 0;\n        this.syncItems();\n    };\n    CollectionAdapter.prototype.insertManualItem = function (index, item) {\n        if (this.collisionChecker) {\n            var key = this.collisionChecker(item);\n            if (key) {\n                if (this._removedManualKeys.has(key)) {\n                    this._removedManualKeys.delete(key);\n                }\n            }\n        }\n        this._manualItems.splice(index, 0, item);\n        this.syncItems();\n    };\n    return CollectionAdapter;\n}());\nexport { CollectionAdapter };\nexport function addPaletteThemeEntry(theme, clss, background, border, foreground) {\n    if (theme[clss] === undefined) {\n        theme[clss] = {};\n    }\n    if (background !== null) {\n        theme[clss][\"background-color\"] = background;\n    }\n    if (border !== null && border !== undefined) {\n        theme[clss][\"border-top-color\"] = border;\n        theme[clss][\"border-left-color\"] = border;\n        theme[clss][\"border-right-color\"] = border;\n        theme[clss][\"border-bottom-color\"] = border;\n    }\n    if (foreground !== null && foreground !== undefined) {\n        theme[clss][\"color\"] = foreground;\n    }\n}\nexport function addTextThemeEntry(theme, clss, fontFamily, fontSize, textColor, leftMargin, topMargin, rightMargin, bottomMargin, horizontalAlignment, verticalAlignment) {\n    if (theme[clss] === undefined) {\n        theme[clss] = {};\n    }\n    var t = theme[clss];\n    if (fontFamily !== null && fontFamily !== undefined) {\n        t[\"font-family\"] = fontFamily;\n        t[\"font-weight\"] = \"\";\n        t[\"font-style\"] = \"\";\n        t[\"font-variant\"] = \"\";\n        t[\"line-height\"] = \"\";\n    }\n    if (fontSize !== null && fontSize !== undefined) {\n        t[\"font-size\"] = fontSize;\n        t[\"font-weight\"] = \"\";\n        t[\"font-style\"] = \"\";\n        t[\"font-variant\"] = \"\";\n        t[\"line-height\"] = \"\";\n    }\n    if (textColor !== null && textColor !== undefined) {\n        t[\"color\"] = textColor;\n    }\n    if (leftMargin !== null && leftMargin !== undefined) {\n        t[\"margin-left\"] = leftMargin;\n    }\n    if (topMargin !== null && topMargin !== undefined) {\n        t[\"margin-top\"] = topMargin;\n    }\n    if (rightMargin !== null && rightMargin !== undefined) {\n        t[\"margin-right\"] = rightMargin;\n    }\n    if (bottomMargin !== null && bottomMargin !== undefined) {\n        t[\"margin-bottom\"] = bottomMargin;\n    }\n    if (horizontalAlignment !== null && horizontalAlignment !== undefined) {\n        t[\"text-align\"] = horizontalAlignment;\n    }\n    if (verticalAlignment !== null && verticalAlignment !== undefined) {\n        t[\"vertical-align\"] = verticalAlignment;\n    }\n}\nfunction isStylableProperty(name) {\n    // using lower case to prevent issGrues with matching case of properties (e.g. chart.brushes)\n    var propName = name.toLowerCase();\n    // skip non-stylable properties\n    if (propName == \"height\" ||\n        propName == \"width\") {\n        return false;\n    }\n    // check for all stylable properties\n    if (stringEndsWith(propName, \"height\") || // grid.rowHeight\n        stringEndsWith(propName, \"width\") || // zoomSlider.HigherThumbWidth\n        stringEndsWith(propName, \"width\") || // zoomSlider.HigherCalloutOutline\n        stringEndsWith(propName, \"inset\") || // zoomSlider.EndInset\n        stringEndsWith(propName, \"orientation\") || // zoomSlider.Orientation\n        stringEndsWith(propName, \"duration\") || // zoomSlider.PanTransitionDuration\n        stringEndsWith(propName, \"outline\") || // zoomSlider.BarOutline\n        stringEndsWith(propName, \"brush\") ||\n        stringEndsWith(propName, \"background\") ||\n        stringEndsWith(propName, \"opacity\") ||\n        stringEndsWith(propName, \"textstyle\") ||\n        stringEndsWith(propName, \"brushes\") || // chart.brushes  || chart.negativeBrushes\n        stringEndsWith(propName, \"outlines\") || // chart.outlines || chart.negativeOutlines\n        stringEndsWith(propName, \"thickness\") || // chart.AxisStrokeThickness\n        stringEndsWith(propName, \"colors\") || //\n        stringEndsWith(propName, \"color\") || // chart.AxisLabelTextColor\n        stringEndsWith(propName, \"margin\") || // chart.AxisLabelTopMargin\n        stringEndsWith(propName, \"location\") || // chart.AxisLabelLocation\n        stringEndsWith(propName, \"style\") || // chart.AxisLabelTextStyle\n        stringEndsWith(propName, \"alignment\") || // chart.AxisLabelHorizontalAlignment\n        stringEndsWith(propName, \"visibility\") || // chart.AxisLabelVisibility\n        stringEndsWith(propName, \"extent\") || // chart.AxisExtent\n        stringEndsWith(propName, \"length\") || // chart.AxisTickLength\n        stringEndsWith(propName, \"strip\") || // chart.AxisStrip\n        stringEndsWith(propName, \"stroke\") || // chart.AxisStroke\n        stringEndsWith(propName, \"fill\") || // piechart.OthersCategoryFill\n        stringEndsWith(propName, \"visible\") ||\n        stringEndsWith(propName, \"radius\") ||\n        stringStartsWith(propName, \"padding\") ||\n        propName === \"usecanvas\" ||\n        propName === \"useaccessibility\") { // chart.isToolbarVisible\n        return true;\n    }\n    return false;\n}\nfunction resolveUnits(val) {\n    // TODO convert \"em, px, pt, cm, in\" units to \"px\"?\n    // https://www.w3.org/Style/Examples/007/units.en.html\n    var value = val.toLowerCase();\n    if (stringEndsWith(value, \"px\")) { // 20px\n        value = value.replace(\"px\", \"\");\n        value = value.replace(\" \", \"\");\n    }\n    return value;\n}\nexport function toSpinal(value) {\n    if (value == null) {\n        return null;\n    }\n    var output = [];\n    var upperRun = 0;\n    for (var i = 0; i < value.length; i++) {\n        var curr = value[i];\n        var upperChar = curr.toUpperCase();\n        var lowerChar = curr.toLowerCase();\n        var charIsNewWord = (upperRun == 0 && output.length > 0);\n        var previousCharWasNewWord = (upperRun > 1);\n        if (upperChar == curr) {\n            if (charIsNewWord) {\n                output.push('-');\n            }\n            upperRun++;\n        }\n        else if (lowerChar == curr) {\n            if (previousCharWasNewWord) {\n                output.splice(output.length - 1, 0, '-');\n            }\n            upperRun = 0;\n        }\n        else {\n            upperRun = 0;\n        }\n        output.push(lowerChar);\n    }\n    var sb = \"\";\n    for (var i = 0; i < output.length; i++) {\n        sb += output[i];\n    }\n    return sb;\n}\nexport function fromSpinal(value) {\n    if (value == null) {\n        return value;\n    }\n    var parts = value.split('-');\n    for (var j = 1; j < parts.length; j++) {\n        parts[j] = parts[j].substr(0, 1).toUpperCase() + parts[j].substr(1);\n    }\n    var ret = \"\";\n    for (var j = 0; j < parts.length; j++) {\n        ret += parts[j];\n    }\n    return ret;\n}\nfunction toCssPropertyName(value) {\n    var sb = toSpinal(value);\n    return sb;\n}\n// get all property names for specified component and its base classes\nexport function getAllPropertyNames(comp) {\n    var members = [];\n    while (comp = (comp.prototype || Object.getPrototypeOf(comp))) {\n        if (comp == HTMLElement.prototype) {\n            break;\n        }\n        var props = Object.getOwnPropertyNames(comp.constructor.prototype);\n        for (var i = 0; i < props.length; i++) {\n            members.push(props[i]);\n        }\n    }\n    return members;\n}\nvar stylableMap = /*@__PURE__*/ new Map();\nexport function initializePropertiesFromCss(ele, comp, cssPrefix, ignoredProperties, prefixRequired, additionalPrefixes) {\n    var e_1, _a;\n    var styles = getComputedStyle(ele);\n    var props = getAllPropertyNames(comp);\n    var filtered = false;\n    var stylableProperties = [];\n    if (stylableMap.has(comp.prototype || Object.getPrototypeOf(comp))) {\n        stylableProperties = stylableMap.get(comp.prototype || Object.getPrototypeOf(comp));\n        props = stylableProperties;\n        filtered = true;\n    }\n    var compName = comp.constructor.name;\n    try {\n        for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n            var prop = props_1_1.value;\n            var cssPropName = null;\n            if (filtered) {\n                cssPropName = prop[1];\n                prop = prop[0];\n            }\n            if (ignoredProperties && ignoredProperties.has(prop)) {\n                if (!filtered && isStylableProperty(prop)) {\n                    var cssName = toCssPropertyName(prop);\n                    stylableProperties.push([prop, cssName]);\n                }\n                continue;\n            }\n            if (filtered || isStylableProperty(prop)) {\n                var cssName = \"\";\n                if (cssPropName) {\n                    cssName = cssPropName;\n                }\n                else {\n                    cssName = toCssPropertyName(prop);\n                }\n                // check if custom property is set with a prefix\n                var cssValue = styles.getPropertyValue(\"--\" + cssPrefix + cssName);\n                if (cssValue && cssValue.length && cssValue.length > 0) {\n                    comp[prop] = resolveUnits(cssValue.trim());\n                }\n                if (additionalPrefixes) {\n                    for (var i = 0; i < additionalPrefixes.length; i++) {\n                        var p = additionalPrefixes[i];\n                        cssValue = styles.getPropertyValue(\"--\" + p + cssName);\n                        if (cssValue && cssValue.length && cssValue.length > 0) {\n                            comp[prop] = resolveUnits(cssValue.trim());\n                        }\n                    }\n                }\n                if (!prefixRequired) {\n                    // check if custom property is set without a prefix\n                    cssValue = styles.getPropertyValue(\"--\" + cssName);\n                    if (cssValue && cssValue.length && cssValue.length > 0) {\n                        comp[prop] = resolveUnits(cssValue.trim());\n                    }\n                }\n                if (!filtered) {\n                    stylableProperties.push([prop, cssName]);\n                }\n            }\n        }\n    }\n    catch (e_1_1) {\n        e_1 = { error: e_1_1 };\n    }\n    finally {\n        try {\n            if (props_1_1 && !props_1_1.done && (_a = props_1.return))\n                _a.call(props_1);\n        }\n        finally {\n            if (e_1)\n                throw e_1.error;\n        }\n    }\n    if (!filtered) {\n        stylableMap.set(comp.prototype || Object.getPrototypeOf(comp), stylableProperties);\n    }\n}\nexport function addBrushPaletteThemeEntry(theme, clss, backgrounds, outlines) {\n    if (outlines == null) {\n        outlines = backgrounds;\n    }\n    var t = theme;\n    for (var i = 0; i < Math.max(backgrounds.length, outlines.length); i++) {\n        var pName = clss + \"-\" + (i + 1);\n        if (t[pName] === undefined) {\n            t[pName] = {};\n        }\n        if (backgrounds[i] !== undefined) {\n            t[pName][\"background-color\"] = backgrounds[i];\n        }\n        if (outlines[i] !== undefined) {\n            t[pName][\"border-top-color\"] = outlines[i];\n            t[pName][\"border-left-color\"] = outlines[i];\n            t[pName][\"border-right-color\"] = outlines[i];\n            t[pName][\"border-bottom-color\"] = outlines[i];\n        }\n    }\n}\nexport function getModifiedProps(prevProps, nextProps) {\n    var e_2, _a;\n    var mod = {};\n    try {\n        for (var _b = __values(Object.keys(nextProps)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var p = _c.value;\n            if (prevProps[p] == undefined ||\n                prevProps[p] !== nextProps[p]) {\n                mod[p] = nextProps[p];\n            }\n        }\n    }\n    catch (e_2_1) {\n        e_2 = { error: e_2_1 };\n    }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return))\n                _a.call(_b);\n        }\n        finally {\n            if (e_2)\n                throw e_2.error;\n        }\n    }\n    return mod;\n}\nexport function isValidProp(owner, prop) {\n    while (owner = (owner.prototype || Object.getPrototypeOf(owner))) {\n        if (owner == HTMLElement.prototype) {\n            break;\n        }\n        if (owner.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n    return false;\n}\nvar NamePatcher = /** @class */ /*@__PURE__*/ (function () {\n    function NamePatcher() {\n    }\n    NamePatcher.ensureStylablePatched = function (prot) {\n        this.ensurePatched(prot, isStylableProperty);\n    };\n    NamePatcher.ensurePatched = function (prot, nameFilter) {\n        var e_3, _a;\n        if (!prot) {\n            return;\n        }\n        if (prot === Object.prototype || prot === HTMLElement.prototype) {\n            return;\n        }\n        if (this._patched.has(prot)) {\n            return;\n        }\n        this._patched.add(prot);\n        var _loop_1 = function (key) {\n            if (nameFilter && !nameFilter(key)) {\n                return \"continue\";\n            }\n            var p = Object.getOwnPropertyDescriptor(prot, key);\n            if (!p) {\n                return \"continue\";\n            }\n            var set = p.set;\n            var name_1 = key;\n            if (set !== undefined) {\n                var newSet = function (v) {\n                    this.__p = name_1;\n                    if (this.__m) {\n                        this.__m(name_1);\n                    }\n                    set.call(this, v);\n                };\n                Object.defineProperty(prot, key, __assign(__assign({}, p), { set: newSet }));\n            }\n        };\n        try {\n            for (var _b = __values(Object.getOwnPropertyNames(prot)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                _loop_1(key);\n            }\n        }\n        catch (e_3_1) {\n            e_3 = { error: e_3_1 };\n        }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return))\n                    _a.call(_b);\n            }\n            finally {\n                if (e_3)\n                    throw e_3.error;\n            }\n        }\n        var base = Object.getPrototypeOf(prot);\n        if (base) {\n            this.ensurePatched(base, nameFilter);\n        }\n    };\n    NamePatcher._patched = new Set();\n    return NamePatcher;\n}());\nexport { NamePatcher };\n"]},"metadata":{},"sourceType":"module"}