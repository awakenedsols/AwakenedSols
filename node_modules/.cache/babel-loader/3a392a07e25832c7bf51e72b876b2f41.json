{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, String_$type, Delegate_$type, markType } from \"./type\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { TileWorkSettings } from \"./TileWorkSettings\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { HeatTileGeneratorWorker } from \"./HeatTileGeneratorWorker\";\nimport { List$1 } from \"./List$1\";\nimport { LinkedListNode$1 } from \"./LinkedListNode$1\";\nimport { HeatTileImageCreatedEventArgs } from \"./HeatTileImageCreatedEventArgs\";\nimport { ITileWorkCompletedSink_$type } from \"./ITileWorkCompletedSink\";\n/**\n * @hidden\n */\n\nvar HeatTileGeneratorWorkerManager =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(HeatTileGeneratorWorkerManager, _super);\n\n  function HeatTileGeneratorWorkerManager() {\n    var _this = _super.call(this) || this;\n\n    _this.b = true;\n    _this.o = null;\n    _this.k = null;\n    _this._supportsTransferable = false;\n    _this.d = false;\n    _this._worker = null;\n    _this.a = false;\n    _this.j = 0;\n    _this.g = new Dictionary$2(String_$type, TileWorkSettings.$, 0);\n    _this.h = new Dictionary$2(String_$type, Delegate_$type, 0);\n    _this.i = new LinkedList$1(HeatTileGeneratorWorker.$);\n    _this.f = new Dictionary$2(String_$type, List$1.$.specialize(LinkedListNode$1.$.specialize(HeatTileGeneratorWorker.$)), 0);\n    return _this;\n  }\n\n  Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"e\", {\n    get: function () {\n      return this.b;\n    },\n    set: function (a) {\n      this.b = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"p\", {\n    get: function () {\n      return this.o;\n    },\n    set: function (a) {\n      this.o = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"n\", {\n    get: function () {\n      return this.k;\n    },\n    set: function (a) {\n      this.k = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  HeatTileGeneratorWorkerManager.prototype.u = function () {\n    if (!this.a) {\n      this.a = true;\n\n      if (window.Worker) {\n        this.d = true;\n      }\n\n      if (this.d && this.e) {\n        this.v();\n        var test = new ArrayBuffer(1);\n\n        this._worker.postMessage(test, [test]);\n\n        if (test.byteLength == 0) {\n          this._supportsTransferable = true;\n        }\n\n        ;\n      }\n\n      if (!this._supportsTransferable) {\n        this.b = false;\n      }\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.v = function () {\n    if (this.p == null && this.n == null) {\n      throw new Error('HeatTileGenerator wants to use web workers, but webWorkerScriptPath and webWorkerInstance were not specified. Either specify the path, an instance, or set allowWebWorkers to false');\n    }\n\n    if (this.n != null) {\n      this._worker = this.n;\n    } else {\n      var path_ = this.p;\n      this._worker = new Worker(path_);\n    }\n\n    this._worker.postMessage = this._worker.webkitPostMessage || this._worker.postMessage;\n    var onMessage_ = runOn(this, this.z);\n    this._worker.onmessage = onMessage_;\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.z = function (args_) {\n    var data_ = args_.data;\n    var a = new HeatTileImageCreatedEventArgs();\n    a.imageData = data_.imageData == null ? null : new Uint8ClampedArray(data_.imageData);\n    a.z = data_.z;\n    a.x = data_.x;\n    a.y = data_.y;\n    a.url = data_.url;\n    a.globalMinimumValue = data_.globalMinimumValue;\n    a.globalMaximumValue = data_.globalMaximumValue;\n    a.globalMaximumValueLongitude = data_.globalMaximumValueLongitude;\n    a.globalMaximumValueLatitude = data_.globalMaximumValueLatitude;\n    a.globalMinimumValueLongitude = data_.globalMinimumValueLongitude;\n    a.globalMinimumValueLatitude = data_.globalMinimumValueLatitude;\n    var b = data_.messageId.toString();\n\n    if (!this.g.containsKey(b)) {\n      return;\n    }\n\n    var c = this.g.item(b);\n    var d = this.h.item(b);\n    this.g.removeItem(b);\n    this.h.removeItem(b);\n    a.image = c.image;\n    d(this, a);\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.x = function () {\n    this.u();\n\n    if (this.e && this._worker == null) {\n      this.v();\n    }\n\n    if (!this.e && this._worker != null) {\n      this._worker.terminate();\n\n      this._worker.onmessage = null;\n      this._worker = null;\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.toDoubleArray = function (arr_) {\n    return new Float64Array(arr_).buffer;\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.r = function (a, b, c) {\n    this.j++;\n\n    if (this.j >= 0x7FFFFFFF) {\n      this.j = 1;\n    }\n\n    this.g.addItem(this.j.toString(), a);\n    this.h.addItem(this.j.toString(), b);\n    var messageId_ = this.j;\n    var innerSettings_ = a.flatten();\n    innerSettings_.messageId = messageId_;\n    innerSettings_.transferableSupported = this._supportsTransferable;\n\n    if (a.isNewData) {\n      innerSettings_.latitudes = this.toDoubleArray(innerSettings_.latitudes);\n      innerSettings_.longitudes = this.toDoubleArray(innerSettings_.longitudes);\n      innerSettings_.values = this.toDoubleArray(innerSettings_.values);\n    } else {\n      innerSettings_.latitudes = null;\n      innerSettings_.longitudes = null;\n      innerSettings_.values = null;\n    }\n\n    if (this._supportsTransferable && a.isNewData) {\n      this._worker.postMessage(innerSettings_, [innerSettings_.latitudes, innerSettings_.longitudes, innerSettings_.values]);\n    } else {\n      this._worker.postMessage(innerSettings_);\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.t = function (z_, x_, y_) {\n    var cancelMsg_ = {\n      cancelTile: true,\n      z: z_,\n      x: x_,\n      y: y_\n    };\n\n    this._worker.postMessage(cancelMsg_);\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.y = function (a, b, c) {\n    this.x();\n\n    if (this.e) {\n      this.r(a, b, c);\n    } else {\n      this.q(a, b, c);\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.aa = function () {\n    var _this = this;\n\n    if (this.i.c != null) {\n      var a = this.i.c;\n      this.i.h(a);\n      var b = a.c.g;\n\n      if (this.f.containsKey(b.z + \"_\" + b.x + \"_\" + b.y)) {\n        var c = this.f.item(b.z + \"_\" + b.x + \"_\" + b.y);\n        c.remove(a);\n\n        if (c.count == 0) {\n          this.f.removeItem(b.z + \"_\" + b.x + \"_\" + b.y);\n        }\n      }\n\n      a.c.doWork();\n    }\n\n    if (this.i.c != null) {\n      window.setTimeout(function () {\n        return _this.aa();\n      }, 16);\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.q = function (a, b, c) {\n    var _this = this;\n\n    {\n      var d = new HeatTileGeneratorWorker(a);\n      d.completedSink = new TileWorkCompletedSink(this, b);\n      this.i.f(d);\n      var e = void 0;\n      var f = d.g.z + \"_\" + d.g.x + \"_\" + d.g.y;\n\n      if (this.f.containsKey(f)) {\n        e = this.f.item(f);\n      } else {\n        e = new List$1(LinkedListNode$1.$.specialize(HeatTileGeneratorWorker.$), 0);\n        this.f.addItem(f, e);\n      }\n\n      e.add(this.i.d);\n      window.setTimeout(function () {\n        return _this.aa();\n      }, 16);\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.w = function () {\n    if (this._worker != null) {\n      this._worker.terminate();\n\n      this._worker = null;\n    }\n\n    this.g.clear();\n    this.h.clear();\n  };\n\n  HeatTileGeneratorWorkerManager.prototype.s = function (a, b, c) {\n    this.x();\n\n    if (this.e) {\n      this.t(a, b, c);\n    } else {\n      if (this.f.containsKey(a + \"_\" + b + \"_\" + c)) {\n        var d = this.f.item(a + \"_\" + b + \"_\" + c);\n\n        for (var e = d.count - 1; e >= 0; e--) {\n          var f = d._inner[e];\n\n          if (f.c.g.testRun) {\n            continue;\n          }\n\n          d.removeAt(e);\n          var g = f.c;\n          this.i.h(f);\n          g.completedSink = null;\n        }\n      }\n    }\n  };\n\n  HeatTileGeneratorWorkerManager.$t = markType(HeatTileGeneratorWorkerManager, 'HeatTileGeneratorWorkerManager');\n  return HeatTileGeneratorWorkerManager;\n}(Base);\n\nexport { HeatTileGeneratorWorkerManager };\n/**\n * @hidden\n */\n\nvar TileWorkCompletedSink =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(TileWorkCompletedSink, _super);\n\n  function TileWorkCompletedSink(a, b) {\n    var _this = _super.call(this) || this;\n\n    _this.a = null;\n    _this.b = null;\n    _this.a = a;\n    _this.b = b;\n    return _this;\n  }\n\n  TileWorkCompletedSink.prototype.onCompleted = function (a) {\n    this.b(this.a, a);\n  };\n\n  TileWorkCompletedSink.$t = markType(TileWorkCompletedSink, 'TileWorkCompletedSink', Base.$, [ITileWorkCompletedSink_$type]);\n  return TileWorkCompletedSink;\n}(Base);\n\nexport { TileWorkCompletedSink };","map":{"version":3,"sources":["/Users/genesisbarrios/Documents/coding/web3/Awakened Sols/AwakenedSols/node_modules/igniteui-react-core/esm5/lib/HeatTileGeneratorWorkerManager_combined.js"],"names":["__extends","Base","runOn","String_$type","Delegate_$type","markType","Dictionary$2","TileWorkSettings","LinkedList$1","HeatTileGeneratorWorker","List$1","LinkedListNode$1","HeatTileImageCreatedEventArgs","ITileWorkCompletedSink_$type","HeatTileGeneratorWorkerManager","_super","_this","call","b","o","k","_supportsTransferable","d","_worker","a","j","g","$","h","i","f","specialize","Object","defineProperty","prototype","get","set","enumerable","configurable","u","window","Worker","e","v","test","ArrayBuffer","postMessage","byteLength","p","n","Error","path_","webkitPostMessage","onMessage_","z","onmessage","args_","data_","data","imageData","Uint8ClampedArray","x","y","url","globalMinimumValue","globalMaximumValue","globalMaximumValueLongitude","globalMaximumValueLatitude","globalMinimumValueLongitude","globalMinimumValueLatitude","messageId","toString","containsKey","c","item","removeItem","image","terminate","toDoubleArray","arr_","Float64Array","buffer","r","addItem","messageId_","innerSettings_","flatten","transferableSupported","isNewData","latitudes","longitudes","values","t","z_","x_","y_","cancelMsg_","cancelTile","q","aa","remove","count","doWork","setTimeout","completedSink","TileWorkCompletedSink","add","w","clear","s","_inner","testRun","removeAt","$t","onCompleted"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,YAAtB,EAAoCC,cAApC,EAAoDC,QAApD,QAAoE,QAApE;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,uBAAT,QAAwC,2BAAxC;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AACA,SAASC,6BAAT,QAA8C,iCAA9C;AACA,SAASC,4BAAT,QAA6C,0BAA7C;AACA;AACA;AACA;;AACA,IAAIC,8BAA8B;AAAG;;AAAc;AAAe,UAAUC,MAAV,EAAkB;AAChFf,EAAAA,SAAS,CAACc,8BAAD,EAAiCC,MAAjC,CAAT;;AACA,WAASD,8BAAT,GAA0C;AACtC,QAAIE,KAAK,GAAGD,MAAM,CAACE,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,IAAAA,KAAK,CAACE,CAAN,GAAU,IAAV;AACAF,IAAAA,KAAK,CAACG,CAAN,GAAU,IAAV;AACAH,IAAAA,KAAK,CAACI,CAAN,GAAU,IAAV;AACAJ,IAAAA,KAAK,CAACK,qBAAN,GAA8B,KAA9B;AACAL,IAAAA,KAAK,CAACM,CAAN,GAAU,KAAV;AACAN,IAAAA,KAAK,CAACO,OAAN,GAAgB,IAAhB;AACAP,IAAAA,KAAK,CAACQ,CAAN,GAAU,KAAV;AACAR,IAAAA,KAAK,CAACS,CAAN,GAAU,CAAV;AACAT,IAAAA,KAAK,CAACU,CAAN,GAAU,IAAIpB,YAAJ,CAAiBH,YAAjB,EAA+BI,gBAAgB,CAACoB,CAAhD,EAAmD,CAAnD,CAAV;AACAX,IAAAA,KAAK,CAACY,CAAN,GAAU,IAAItB,YAAJ,CAAiBH,YAAjB,EAA+BC,cAA/B,EAA+C,CAA/C,CAAV;AACAY,IAAAA,KAAK,CAACa,CAAN,GAAU,IAAIrB,YAAJ,CAAiBC,uBAAuB,CAACkB,CAAzC,CAAV;AACAX,IAAAA,KAAK,CAACc,CAAN,GAAU,IAAIxB,YAAJ,CAAiBH,YAAjB,EAA+BO,MAAM,CAACiB,CAAP,CAASI,UAAT,CAAoBpB,gBAAgB,CAACgB,CAAjB,CAAmBI,UAAnB,CAA8BtB,uBAAuB,CAACkB,CAAtD,CAApB,CAA/B,EAA8G,CAA9G,CAAV;AACA,WAAOX,KAAP;AACH;;AACDgB,EAAAA,MAAM,CAACC,cAAP,CAAsBnB,8BAA8B,CAACoB,SAArD,EAAgE,GAAhE,EAAqE;AACjEC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKjB,CAAZ;AACH,KAHgE;AAIjEkB,IAAAA,GAAG,EAAE,UAAUZ,CAAV,EAAa;AACd,WAAKN,CAAL,GAASM,CAAT;AACH,KANgE;AAOjEa,IAAAA,UAAU,EAAE,KAPqD;AAQjEC,IAAAA,YAAY,EAAE;AARmD,GAArE;AAUAN,EAAAA,MAAM,CAACC,cAAP,CAAsBnB,8BAA8B,CAACoB,SAArD,EAAgE,GAAhE,EAAqE;AACjEC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKhB,CAAZ;AACH,KAHgE;AAIjEiB,IAAAA,GAAG,EAAE,UAAUZ,CAAV,EAAa;AACd,WAAKL,CAAL,GAASK,CAAT;AACH,KANgE;AAOjEa,IAAAA,UAAU,EAAE,KAPqD;AAQjEC,IAAAA,YAAY,EAAE;AARmD,GAArE;AAUAN,EAAAA,MAAM,CAACC,cAAP,CAAsBnB,8BAA8B,CAACoB,SAArD,EAAgE,GAAhE,EAAqE;AACjEC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKf,CAAZ;AACH,KAHgE;AAIjEgB,IAAAA,GAAG,EAAE,UAAUZ,CAAV,EAAa;AACd,WAAKJ,CAAL,GAASI,CAAT;AACH,KANgE;AAOjEa,IAAAA,UAAU,EAAE,KAPqD;AAQjEC,IAAAA,YAAY,EAAE;AARmD,GAArE;;AAUAxB,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCK,CAAzC,GAA6C,YAAY;AACrD,QAAI,CAAC,KAAKf,CAAV,EAAa;AACT,WAAKA,CAAL,GAAS,IAAT;;AACA,UAAKgB,MAAM,CAACC,MAAZ,EAAqB;AACjB,aAAKnB,CAAL,GAAS,IAAT;AACH;;AACD,UAAI,KAAKA,CAAL,IAAU,KAAKoB,CAAnB,EAAsB;AAClB,aAAKC,CAAL;AACA,YAAIC,IAAI,GAAG,IAAIC,WAAJ,CAAgB,CAAhB,CAAX;;AACA,aAAKtB,OAAL,CAAauB,WAAb,CAAyBF,IAAzB,EAA+B,CAACA,IAAD,CAA/B;;AACA,YAAIA,IAAI,CAACG,UAAL,IAAmB,CAAvB,EAA0B;AACtB,eAAK1B,qBAAL,GAA6B,IAA7B;AACH;;AACD;AACH;;AACD,UAAI,CAAC,KAAKA,qBAAV,EAAiC;AAC7B,aAAKH,CAAL,GAAS,KAAT;AACH;AACJ;AACJ,GAnBD;;AAoBAJ,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCS,CAAzC,GAA6C,YAAY;AACrD,QAAI,KAAKK,CAAL,IAAU,IAAV,IAAkB,KAAKC,CAAL,IAAU,IAAhC,EAAsC;AAClC,YAAM,IAAIC,KAAJ,CAAU,qLAAV,CAAN;AACH;;AACD,QAAI,KAAKD,CAAL,IAAU,IAAd,EAAoB;AAChB,WAAK1B,OAAL,GAAe,KAAK0B,CAApB;AACH,KAFD,MAGK;AACD,UAAIE,KAAK,GAAG,KAAKH,CAAjB;AACA,WAAKzB,OAAL,GAAe,IAAIkB,MAAJ,CAAWU,KAAX,CAAf;AACH;;AACD,SAAK5B,OAAL,CAAauB,WAAb,GAA2B,KAAKvB,OAAL,CAAa6B,iBAAb,IAAkC,KAAK7B,OAAL,CAAauB,WAA1E;AACA,QAAIO,UAAU,GAAGnD,KAAK,CAAC,IAAD,EAAO,KAAKoD,CAAZ,CAAtB;AACA,SAAK/B,OAAL,CAAagC,SAAb,GAAyBF,UAAzB;AACH,GAdD;;AAeAvC,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCoB,CAAzC,GAA6C,UAAUE,KAAV,EAAiB;AAC1D,QAAIC,KAAK,GAAGD,KAAK,CAACE,IAAlB;AACA,QAAIlC,CAAC,GAAG,IAAIZ,6BAAJ,EAAR;AACAY,IAAAA,CAAC,CAACmC,SAAF,GAAeF,KAAK,CAACE,SAAN,IAAmB,IAAnB,GAA0B,IAA1B,GAAiC,IAAIC,iBAAJ,CAAsBH,KAAK,CAACE,SAA5B,CAAhD;AACAnC,IAAAA,CAAC,CAAC8B,CAAF,GAAOG,KAAK,CAACH,CAAb;AACA9B,IAAAA,CAAC,CAACqC,CAAF,GAAOJ,KAAK,CAACI,CAAb;AACArC,IAAAA,CAAC,CAACsC,CAAF,GAAOL,KAAK,CAACK,CAAb;AACAtC,IAAAA,CAAC,CAACuC,GAAF,GAASN,KAAK,CAACM,GAAf;AACAvC,IAAAA,CAAC,CAACwC,kBAAF,GAAwBP,KAAK,CAACO,kBAA9B;AACAxC,IAAAA,CAAC,CAACyC,kBAAF,GAAwBR,KAAK,CAACQ,kBAA9B;AACAzC,IAAAA,CAAC,CAAC0C,2BAAF,GAAiCT,KAAK,CAACS,2BAAvC;AACA1C,IAAAA,CAAC,CAAC2C,0BAAF,GAAgCV,KAAK,CAACU,0BAAtC;AACA3C,IAAAA,CAAC,CAAC4C,2BAAF,GAAiCX,KAAK,CAACW,2BAAvC;AACA5C,IAAAA,CAAC,CAAC6C,0BAAF,GAAgCZ,KAAK,CAACY,0BAAtC;AACA,QAAInD,CAAC,GAAIuC,KAAK,CAACa,SAAN,CAAgBC,QAAhB,EAAT;;AACA,QAAI,CAAC,KAAK7C,CAAL,CAAO8C,WAAP,CAAmBtD,CAAnB,CAAL,EAA4B;AACxB;AACH;;AACD,QAAIuD,CAAC,GAAG,KAAK/C,CAAL,CAAOgD,IAAP,CAAYxD,CAAZ,CAAR;AACA,QAAII,CAAC,GAAG,KAAKM,CAAL,CAAO8C,IAAP,CAAYxD,CAAZ,CAAR;AACA,SAAKQ,CAAL,CAAOiD,UAAP,CAAkBzD,CAAlB;AACA,SAAKU,CAAL,CAAO+C,UAAP,CAAkBzD,CAAlB;AACAM,IAAAA,CAAC,CAACoD,KAAF,GAAUH,CAAC,CAACG,KAAZ;AACAtD,IAAAA,CAAC,CAAC,IAAD,EAAOE,CAAP,CAAD;AACH,GAxBD;;AAyBAV,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyC2B,CAAzC,GAA6C,YAAY;AACrD,SAAKtB,CAAL;;AACA,QAAI,KAAKG,CAAL,IAAU,KAAKnB,OAAL,IAAgB,IAA9B,EAAoC;AAChC,WAAKoB,CAAL;AACH;;AACD,QAAI,CAAC,KAAKD,CAAN,IAAW,KAAKnB,OAAL,IAAgB,IAA/B,EAAqC;AACjC,WAAKA,OAAL,CAAasD,SAAb;;AACA,WAAKtD,OAAL,CAAagC,SAAb,GAAyB,IAAzB;AACA,WAAKhC,OAAL,GAAe,IAAf;AACH;AACJ,GAVD;;AAWAT,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyC4C,aAAzC,GAAyD,UAAUC,IAAV,EAAgB;AACrE,WAAO,IAAIC,YAAJ,CAAiBD,IAAjB,EAAuBE,MAA9B;AACH,GAFD;;AAGAnE,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCgD,CAAzC,GAA6C,UAAU1D,CAAV,EAAaN,CAAb,EAAgBuD,CAAhB,EAAmB;AAC5D,SAAKhD,CAAL;;AACA,QAAI,KAAKA,CAAL,IAAU,UAAd,EAA0B;AACtB,WAAKA,CAAL,GAAS,CAAT;AACH;;AACD,SAAKC,CAAL,CAAOyD,OAAP,CAAe,KAAK1D,CAAL,CAAO8C,QAAP,EAAf,EAAkC/C,CAAlC;AACA,SAAKI,CAAL,CAAOuD,OAAP,CAAe,KAAK1D,CAAL,CAAO8C,QAAP,EAAf,EAAkCrD,CAAlC;AACA,QAAIkE,UAAU,GAAG,KAAK3D,CAAtB;AACA,QAAI4D,cAAc,GAAG7D,CAAC,CAAC8D,OAAF,EAArB;AACAD,IAAAA,cAAc,CAACf,SAAf,GAA2Bc,UAA3B;AACAC,IAAAA,cAAc,CAACE,qBAAf,GAAuC,KAAKlE,qBAA5C;;AACA,QAAIG,CAAC,CAACgE,SAAN,EAAiB;AACbH,MAAAA,cAAc,CAACI,SAAf,GAA2B,KAAKX,aAAL,CAAmBO,cAAc,CAACI,SAAlC,CAA3B;AACAJ,MAAAA,cAAc,CAACK,UAAf,GAA4B,KAAKZ,aAAL,CAAmBO,cAAc,CAACK,UAAlC,CAA5B;AACAL,MAAAA,cAAc,CAACM,MAAf,GAAwB,KAAKb,aAAL,CAAmBO,cAAc,CAACM,MAAlC,CAAxB;AACH,KAJD,MAKK;AACDN,MAAAA,cAAc,CAACI,SAAf,GAA2B,IAA3B;AACAJ,MAAAA,cAAc,CAACK,UAAf,GAA4B,IAA5B;AACAL,MAAAA,cAAc,CAACM,MAAf,GAAwB,IAAxB;AACH;;AACD,QAAI,KAAKtE,qBAAL,IAA8BG,CAAC,CAACgE,SAApC,EAA+C;AAC3C,WAAKjE,OAAL,CAAauB,WAAb,CAAyBuC,cAAzB,EAAyC,CAACA,cAAc,CAACI,SAAhB,EACrCJ,cAAc,CAACK,UADsB,EAErCL,cAAc,CAACM,MAFsB,CAAzC;AAGH,KAJD,MAKK;AACD,WAAKpE,OAAL,CAAauB,WAAb,CAAyBuC,cAAzB;AACH;AACJ,GA7BD;;AA8BAvE,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyC0D,CAAzC,GAA6C,UAAUC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsB;AAC/D,QAAIC,UAAU,GAAG;AACbC,MAAAA,UAAU,EAAE,IADC;AAEb3C,MAAAA,CAAC,EAAEuC,EAFU;AAGbhC,MAAAA,CAAC,EAAEiC,EAHU;AAIbhC,MAAAA,CAAC,EAAEiC;AAJU,KAAjB;;AAMA,SAAKxE,OAAL,CAAauB,WAAb,CAAyBkD,UAAzB;AACH,GARD;;AASAlF,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyC4B,CAAzC,GAA6C,UAAUtC,CAAV,EAAaN,CAAb,EAAgBuD,CAAhB,EAAmB;AAC5D,SAAKZ,CAAL;;AACA,QAAI,KAAKnB,CAAT,EAAY;AACR,WAAKwC,CAAL,CAAO1D,CAAP,EAAUN,CAAV,EAAauD,CAAb;AACH,KAFD,MAGK;AACD,WAAKyB,CAAL,CAAO1E,CAAP,EAAUN,CAAV,EAAauD,CAAb;AACH;AACJ,GARD;;AASA3D,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCiE,EAAzC,GAA8C,YAAY;AACtD,QAAInF,KAAK,GAAG,IAAZ;;AACA,QAAI,KAAKa,CAAL,CAAO4C,CAAP,IAAY,IAAhB,EAAsB;AAClB,UAAIjD,CAAC,GAAG,KAAKK,CAAL,CAAO4C,CAAf;AACA,WAAK5C,CAAL,CAAOD,CAAP,CAASJ,CAAT;AACA,UAAIN,CAAC,GAAGM,CAAC,CAACiD,CAAF,CAAI/C,CAAZ;;AACA,UAAI,KAAKI,CAAL,CAAO0C,WAAP,CAAmBtD,CAAC,CAACoC,CAAF,GAAM,GAAN,GAAYpC,CAAC,CAAC2C,CAAd,GAAkB,GAAlB,GAAwB3C,CAAC,CAAC4C,CAA7C,CAAJ,EAAqD;AACjD,YAAIW,CAAC,GAAG,KAAK3C,CAAL,CAAO4C,IAAP,CAAYxD,CAAC,CAACoC,CAAF,GAAM,GAAN,GAAYpC,CAAC,CAAC2C,CAAd,GAAkB,GAAlB,GAAwB3C,CAAC,CAAC4C,CAAtC,CAAR;AACAW,QAAAA,CAAC,CAAC2B,MAAF,CAAS5E,CAAT;;AACA,YAAIiD,CAAC,CAAC4B,KAAF,IAAW,CAAf,EAAkB;AACd,eAAKvE,CAAL,CAAO6C,UAAP,CAAkBzD,CAAC,CAACoC,CAAF,GAAM,GAAN,GAAYpC,CAAC,CAAC2C,CAAd,GAAkB,GAAlB,GAAwB3C,CAAC,CAAC4C,CAA5C;AACH;AACJ;;AACDtC,MAAAA,CAAC,CAACiD,CAAF,CAAI6B,MAAJ;AACH;;AACD,QAAI,KAAKzE,CAAL,CAAO4C,CAAP,IAAY,IAAhB,EAAsB;AAClBjC,MAAAA,MAAM,CAAC+D,UAAP,CAAkB,YAAY;AAAE,eAAOvF,KAAK,CAACmF,EAAN,EAAP;AAAoB,OAApD,EAAsD,EAAtD;AACH;AACJ,GAlBD;;AAmBArF,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCgE,CAAzC,GAA6C,UAAU1E,CAAV,EAAaN,CAAb,EAAgBuD,CAAhB,EAAmB;AAC5D,QAAIzD,KAAK,GAAG,IAAZ;;AACA;AACI,UAAIM,CAAC,GAAG,IAAIb,uBAAJ,CAA4Be,CAA5B,CAAR;AACAF,MAAAA,CAAC,CAACkF,aAAF,GAAkB,IAAIC,qBAAJ,CAA0B,IAA1B,EAAgCvF,CAAhC,CAAlB;AACA,WAAKW,CAAL,CAAOC,CAAP,CAASR,CAAT;AACA,UAAIoB,CAAC,GAAG,KAAK,CAAb;AACA,UAAIZ,CAAC,GAAGR,CAAC,CAACI,CAAF,CAAI4B,CAAJ,GAAQ,GAAR,GAAchC,CAAC,CAACI,CAAF,CAAImC,CAAlB,GAAsB,GAAtB,GAA4BvC,CAAC,CAACI,CAAF,CAAIoC,CAAxC;;AACA,UAAI,KAAKhC,CAAL,CAAO0C,WAAP,CAAmB1C,CAAnB,CAAJ,EAA2B;AACvBY,QAAAA,CAAC,GAAG,KAAKZ,CAAL,CAAO4C,IAAP,CAAY5C,CAAZ,CAAJ;AACH,OAFD,MAGK;AACDY,QAAAA,CAAC,GAAG,IAAIhC,MAAJ,CAAWC,gBAAgB,CAACgB,CAAjB,CAAmBI,UAAnB,CAA8BtB,uBAAuB,CAACkB,CAAtD,CAAX,EAAqE,CAArE,CAAJ;AACA,aAAKG,CAAL,CAAOqD,OAAP,CAAerD,CAAf,EAAkBY,CAAlB;AACH;;AACDA,MAAAA,CAAC,CAACgE,GAAF,CAAM,KAAK7E,CAAL,CAAOP,CAAb;AACAkB,MAAAA,MAAM,CAAC+D,UAAP,CAAkB,YAAY;AAAE,eAAOvF,KAAK,CAACmF,EAAN,EAAP;AAAoB,OAApD,EAAsD,EAAtD;AACH;AACJ,GAlBD;;AAmBArF,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyCyE,CAAzC,GAA6C,YAAY;AACrD,QAAI,KAAKpF,OAAL,IAAgB,IAApB,EAA0B;AACtB,WAAKA,OAAL,CAAasD,SAAb;;AACA,WAAKtD,OAAL,GAAe,IAAf;AACH;;AACD,SAAKG,CAAL,CAAOkF,KAAP;AACA,SAAKhF,CAAL,CAAOgF,KAAP;AACH,GAPD;;AAQA9F,EAAAA,8BAA8B,CAACoB,SAA/B,CAAyC2E,CAAzC,GAA6C,UAAUrF,CAAV,EAAaN,CAAb,EAAgBuD,CAAhB,EAAmB;AAC5D,SAAKZ,CAAL;;AACA,QAAI,KAAKnB,CAAT,EAAY;AACR,WAAKkD,CAAL,CAAOpE,CAAP,EAAUN,CAAV,EAAauD,CAAb;AACH,KAFD,MAGK;AACD,UAAI,KAAK3C,CAAL,CAAO0C,WAAP,CAAmBhD,CAAC,GAAG,GAAJ,GAAUN,CAAV,GAAc,GAAd,GAAoBuD,CAAvC,CAAJ,EAA+C;AAC3C,YAAInD,CAAC,GAAG,KAAKQ,CAAL,CAAO4C,IAAP,CAAYlD,CAAC,GAAG,GAAJ,GAAUN,CAAV,GAAc,GAAd,GAAoBuD,CAAhC,CAAR;;AACA,aAAK,IAAI/B,CAAC,GAAGpB,CAAC,CAAC+E,KAAF,GAAU,CAAvB,EAA0B3D,CAAC,IAAI,CAA/B,EAAkCA,CAAC,EAAnC,EAAuC;AACnC,cAAIZ,CAAC,GAAGR,CAAC,CAACwF,MAAF,CAASpE,CAAT,CAAR;;AACA,cAAIZ,CAAC,CAAC2C,CAAF,CAAI/C,CAAJ,CAAMqF,OAAV,EAAmB;AACf;AACH;;AACDzF,UAAAA,CAAC,CAAC0F,QAAF,CAAWtE,CAAX;AACA,cAAIhB,CAAC,GAAGI,CAAC,CAAC2C,CAAV;AACA,eAAK5C,CAAL,CAAOD,CAAP,CAASE,CAAT;AACAJ,UAAAA,CAAC,CAAC8E,aAAF,GAAkB,IAAlB;AACH;AACJ;AACJ;AACJ,GApBD;;AAqBA1F,EAAAA,8BAA8B,CAACmG,EAA/B,GAAoC5G,QAAQ,CAACS,8BAAD,EAAiC,gCAAjC,CAA5C;AACA,SAAOA,8BAAP;AACH,CA/OiE,CA+OhEb,IA/OgE,CAAlE;;AAgPA,SAASa,8BAAT;AACA;AACA;AACA;;AACA,IAAI2F,qBAAqB;AAAG;;AAAc;AAAe,UAAU1F,MAAV,EAAkB;AACvEf,EAAAA,SAAS,CAACyG,qBAAD,EAAwB1F,MAAxB,CAAT;;AACA,WAAS0F,qBAAT,CAA+BjF,CAA/B,EAAkCN,CAAlC,EAAqC;AACjC,QAAIF,KAAK,GAAGD,MAAM,CAACE,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,IAAAA,KAAK,CAACQ,CAAN,GAAU,IAAV;AACAR,IAAAA,KAAK,CAACE,CAAN,GAAU,IAAV;AACAF,IAAAA,KAAK,CAACQ,CAAN,GAAUA,CAAV;AACAR,IAAAA,KAAK,CAACE,CAAN,GAAUA,CAAV;AACA,WAAOF,KAAP;AACH;;AACDyF,EAAAA,qBAAqB,CAACvE,SAAtB,CAAgCgF,WAAhC,GAA8C,UAAU1F,CAAV,EAAa;AACvD,SAAKN,CAAL,CAAO,KAAKM,CAAZ,EAAeA,CAAf;AACH,GAFD;;AAGAiF,EAAAA,qBAAqB,CAACQ,EAAtB,GAA2B5G,QAAQ,CAACoG,qBAAD,EAAwB,uBAAxB,EAAiDxG,IAAI,CAAC0B,CAAtD,EAAyD,CAACd,4BAAD,CAAzD,CAAnC;AACA,SAAO4F,qBAAP;AACH,CAfwD,CAevDxG,IAfuD,CAAzD;;AAgBA,SAASwG,qBAAT","sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends } from \"tslib\";\nimport { Base, runOn, String_$type, Delegate_$type, markType } from \"./type\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { TileWorkSettings } from \"./TileWorkSettings\";\nimport { LinkedList$1 } from \"./LinkedList$1\";\nimport { HeatTileGeneratorWorker } from \"./HeatTileGeneratorWorker\";\nimport { List$1 } from \"./List$1\";\nimport { LinkedListNode$1 } from \"./LinkedListNode$1\";\nimport { HeatTileImageCreatedEventArgs } from \"./HeatTileImageCreatedEventArgs\";\nimport { ITileWorkCompletedSink_$type } from \"./ITileWorkCompletedSink\";\n/**\n * @hidden\n */\nvar HeatTileGeneratorWorkerManager = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(HeatTileGeneratorWorkerManager, _super);\n    function HeatTileGeneratorWorkerManager() {\n        var _this = _super.call(this) || this;\n        _this.b = true;\n        _this.o = null;\n        _this.k = null;\n        _this._supportsTransferable = false;\n        _this.d = false;\n        _this._worker = null;\n        _this.a = false;\n        _this.j = 0;\n        _this.g = new Dictionary$2(String_$type, TileWorkSettings.$, 0);\n        _this.h = new Dictionary$2(String_$type, Delegate_$type, 0);\n        _this.i = new LinkedList$1(HeatTileGeneratorWorker.$);\n        _this.f = new Dictionary$2(String_$type, List$1.$.specialize(LinkedListNode$1.$.specialize(HeatTileGeneratorWorker.$)), 0);\n        return _this;\n    }\n    Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"e\", {\n        get: function () {\n            return this.b;\n        },\n        set: function (a) {\n            this.b = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"p\", {\n        get: function () {\n            return this.o;\n        },\n        set: function (a) {\n            this.o = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HeatTileGeneratorWorkerManager.prototype, \"n\", {\n        get: function () {\n            return this.k;\n        },\n        set: function (a) {\n            this.k = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HeatTileGeneratorWorkerManager.prototype.u = function () {\n        if (!this.a) {\n            this.a = true;\n            if ((window.Worker)) {\n                this.d = true;\n            }\n            if (this.d && this.e) {\n                this.v();\n                var test = new ArrayBuffer(1);\n                this._worker.postMessage(test, [test]);\n                if (test.byteLength == 0) {\n                    this._supportsTransferable = true;\n                }\n                ;\n            }\n            if (!this._supportsTransferable) {\n                this.b = false;\n            }\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.v = function () {\n        if (this.p == null && this.n == null) {\n            throw new Error('HeatTileGenerator wants to use web workers, but webWorkerScriptPath and webWorkerInstance were not specified. Either specify the path, an instance, or set allowWebWorkers to false');\n        }\n        if (this.n != null) {\n            this._worker = this.n;\n        }\n        else {\n            var path_ = this.p;\n            this._worker = new Worker(path_);\n        }\n        this._worker.postMessage = this._worker.webkitPostMessage || this._worker.postMessage;\n        var onMessage_ = runOn(this, this.z);\n        this._worker.onmessage = onMessage_;\n    };\n    HeatTileGeneratorWorkerManager.prototype.z = function (args_) {\n        var data_ = args_.data;\n        var a = new HeatTileImageCreatedEventArgs();\n        a.imageData = (data_.imageData == null ? null : new Uint8ClampedArray(data_.imageData));\n        a.z = (data_.z);\n        a.x = (data_.x);\n        a.y = (data_.y);\n        a.url = (data_.url);\n        a.globalMinimumValue = (data_.globalMinimumValue);\n        a.globalMaximumValue = (data_.globalMaximumValue);\n        a.globalMaximumValueLongitude = (data_.globalMaximumValueLongitude);\n        a.globalMaximumValueLatitude = (data_.globalMaximumValueLatitude);\n        a.globalMinimumValueLongitude = (data_.globalMinimumValueLongitude);\n        a.globalMinimumValueLatitude = (data_.globalMinimumValueLatitude);\n        var b = (data_.messageId.toString());\n        if (!this.g.containsKey(b)) {\n            return;\n        }\n        var c = this.g.item(b);\n        var d = this.h.item(b);\n        this.g.removeItem(b);\n        this.h.removeItem(b);\n        a.image = c.image;\n        d(this, a);\n    };\n    HeatTileGeneratorWorkerManager.prototype.x = function () {\n        this.u();\n        if (this.e && this._worker == null) {\n            this.v();\n        }\n        if (!this.e && this._worker != null) {\n            this._worker.terminate();\n            this._worker.onmessage = null;\n            this._worker = null;\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.toDoubleArray = function (arr_) {\n        return new Float64Array(arr_).buffer;\n    };\n    HeatTileGeneratorWorkerManager.prototype.r = function (a, b, c) {\n        this.j++;\n        if (this.j >= 0x7FFFFFFF) {\n            this.j = 1;\n        }\n        this.g.addItem(this.j.toString(), a);\n        this.h.addItem(this.j.toString(), b);\n        var messageId_ = this.j;\n        var innerSettings_ = a.flatten();\n        innerSettings_.messageId = messageId_;\n        innerSettings_.transferableSupported = this._supportsTransferable;\n        if (a.isNewData) {\n            innerSettings_.latitudes = this.toDoubleArray(innerSettings_.latitudes);\n            innerSettings_.longitudes = this.toDoubleArray(innerSettings_.longitudes);\n            innerSettings_.values = this.toDoubleArray(innerSettings_.values);\n        }\n        else {\n            innerSettings_.latitudes = null;\n            innerSettings_.longitudes = null;\n            innerSettings_.values = null;\n        }\n        if (this._supportsTransferable && a.isNewData) {\n            this._worker.postMessage(innerSettings_, [innerSettings_.latitudes,\n                innerSettings_.longitudes,\n                innerSettings_.values]);\n        }\n        else {\n            this._worker.postMessage(innerSettings_);\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.t = function (z_, x_, y_) {\n        var cancelMsg_ = {\n            cancelTile: true,\n            z: z_,\n            x: x_,\n            y: y_\n        };\n        this._worker.postMessage(cancelMsg_);\n    };\n    HeatTileGeneratorWorkerManager.prototype.y = function (a, b, c) {\n        this.x();\n        if (this.e) {\n            this.r(a, b, c);\n        }\n        else {\n            this.q(a, b, c);\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.aa = function () {\n        var _this = this;\n        if (this.i.c != null) {\n            var a = this.i.c;\n            this.i.h(a);\n            var b = a.c.g;\n            if (this.f.containsKey(b.z + \"_\" + b.x + \"_\" + b.y)) {\n                var c = this.f.item(b.z + \"_\" + b.x + \"_\" + b.y);\n                c.remove(a);\n                if (c.count == 0) {\n                    this.f.removeItem(b.z + \"_\" + b.x + \"_\" + b.y);\n                }\n            }\n            a.c.doWork();\n        }\n        if (this.i.c != null) {\n            window.setTimeout(function () { return _this.aa(); }, 16);\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.q = function (a, b, c) {\n        var _this = this;\n        {\n            var d = new HeatTileGeneratorWorker(a);\n            d.completedSink = new TileWorkCompletedSink(this, b);\n            this.i.f(d);\n            var e = void 0;\n            var f = d.g.z + \"_\" + d.g.x + \"_\" + d.g.y;\n            if (this.f.containsKey(f)) {\n                e = this.f.item(f);\n            }\n            else {\n                e = new List$1(LinkedListNode$1.$.specialize(HeatTileGeneratorWorker.$), 0);\n                this.f.addItem(f, e);\n            }\n            e.add(this.i.d);\n            window.setTimeout(function () { return _this.aa(); }, 16);\n        }\n    };\n    HeatTileGeneratorWorkerManager.prototype.w = function () {\n        if (this._worker != null) {\n            this._worker.terminate();\n            this._worker = null;\n        }\n        this.g.clear();\n        this.h.clear();\n    };\n    HeatTileGeneratorWorkerManager.prototype.s = function (a, b, c) {\n        this.x();\n        if (this.e) {\n            this.t(a, b, c);\n        }\n        else {\n            if (this.f.containsKey(a + \"_\" + b + \"_\" + c)) {\n                var d = this.f.item(a + \"_\" + b + \"_\" + c);\n                for (var e = d.count - 1; e >= 0; e--) {\n                    var f = d._inner[e];\n                    if (f.c.g.testRun) {\n                        continue;\n                    }\n                    d.removeAt(e);\n                    var g = f.c;\n                    this.i.h(f);\n                    g.completedSink = null;\n                }\n            }\n        }\n    };\n    HeatTileGeneratorWorkerManager.$t = markType(HeatTileGeneratorWorkerManager, 'HeatTileGeneratorWorkerManager');\n    return HeatTileGeneratorWorkerManager;\n}(Base));\nexport { HeatTileGeneratorWorkerManager };\n/**\n * @hidden\n */\nvar TileWorkCompletedSink = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(TileWorkCompletedSink, _super);\n    function TileWorkCompletedSink(a, b) {\n        var _this = _super.call(this) || this;\n        _this.a = null;\n        _this.b = null;\n        _this.a = a;\n        _this.b = b;\n        return _this;\n    }\n    TileWorkCompletedSink.prototype.onCompleted = function (a) {\n        this.b(this.a, a);\n    };\n    TileWorkCompletedSink.$t = markType(TileWorkCompletedSink, 'TileWorkCompletedSink', Base.$, [ITileWorkCompletedSink_$type]);\n    return TileWorkCompletedSink;\n}(Base));\nexport { TileWorkCompletedSink };\n"]},"metadata":{},"sourceType":"module"}